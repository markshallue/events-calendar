"use strict";"use client";var Pr=Object.create;var Ne=Object.defineProperty;var Or=Object.getOwnPropertyDescriptor;var Rr=Object.getOwnPropertyNames;var jr=Object.getPrototypeOf,Nr=Object.prototype.hasOwnProperty;var Vr=(e,t)=>{for(var r in t)Ne(e,r,{get:t[r],enumerable:!0})},xt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Rr(t))!Nr.call(e,o)&&o!==r&&Ne(e,o,{get:()=>t[o],enumerable:!(n=Or(t,o))||n.enumerable});return e};var S=(e,t,r)=>(r=e!=null?Pr(jr(e)):{},xt(t||!e||!e.__esModule?Ne(r,"default",{value:e,enumerable:!0}):r,e)),_r=e=>xt(Ne({},"__esModule",{value:!0}),e);var Do={};Vr(Do,{CALENDAR_VIEWS:()=>F,DAYS_IN_FULL_MONTH:()=>et,DAY_LABELS_SHORT:()=>Qe,DEFAULT_COLOR:()=>fe,EventsCalendar:()=>bo,HOURS:()=>tt,Header:()=>ht,MONTHS:()=>pe,arrangeWeekEvents:()=>G,arrangeWeekdayEvents:()=>dt,createDayjsObjFromTime:()=>$r,filterByDate:()=>I,filterByView:()=>ot,filterByWeek:()=>ve,getBackgroundFromGroups:()=>J,getPlaceholderEvent:()=>ye,getTimeDiff:()=>$,getTimeLabel:()=>rt,getVisibleEvents:()=>it,hasOverlap:()=>U,isBetween:()=>P,parseRawEvents:()=>at,returnValidStartEnd:()=>ge,setTime:()=>me,updateEvent:()=>ue,useEventsCalendar:()=>mt});module.exports=_r(Do);var Pe=require("react");var Ke={};var Ht=require("react");var ce={};function me(e,t){return e.hour(t.hour()).minute(t.minute())}var F=["year","month","week","day"],pe=["January","February","March","April","May","June","July","August","September","October","November","December"],Qe=["S","M","T","W","T","F","S"],et=42,fe="#0ea5e9",tt=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"];function P(e,t,r,n=!1){return e.isAfter(t)&&e.isBefore(r)||e.isSame(t,"d")||(n?!1:e.isSame(r,"d"))}function U(e,t,r,n){return P(e,r,n)||P(r,e,t)||P(n,e,t)}function ue({state:e,dispatch:t,date:r,view:n}){let o=n==="month"?"day":"minute";if(e.dragStartOffset===null){let c=r.diff(e.clickedEvent.start,o);t({type:"update_event",dragStartOffset:c});return}let{start:a,end:i,startTime:s,endTime:d}=e.clickedEvent,l=r.subtract(e.dragStartOffset,o),p=i.diff(a,o),f=l.add(p,o);n!=="month"&&!l.isSame(f,"day")||t({type:"update_event",event:{...e.placeholderEvent,start:n==="month"?l.hour(a.hour()).minute(a.minute()):l,end:n==="month"?f.hour(i.hour()).minute(i.minute()):f,startTime:n==="month"?s:l.format("h:mma"),endTime:n==="month"?d:f.format("h:mma")}})}function $(e,t){let r=e.hour()*60+e.minute();return t.hour()*60+t.minute()-r}function rt(e,t){if(!e.start||!e.end)return"";let r=t<=30?", ":"";return e.start.isBefore(e.end)?`${r}${e.start.format("h:mma")} - ${e.end.format("h:mma")}`:`${r}${e.end.format("h:mma")} - ${e.start.format("h:mma")}`}function ve(e,t){let r=t.add(6,"d");return e.filter(({start:n,end:o})=>U(t,r,n,o||n))}function I(e,t){return e.filter(({start:r,end:n})=>P(t,r,n))}function ot(e,t,r){let n=r==="year"?"year":"month",o=t.startOf(n).day(0),a=t.endOf(n).day(6);return e.filter(({start:i,end:s})=>U(o,a,i,s))}var he=S(require("dayjs")),nt=(e,t)=>{let r=t.replace(/.{2}$/," $&").toUpperCase();return(0,he.default)(`${e.format("DD-MMM-YYYY")} ${r}`)};function at(e){return e.filter(t=>t.start||t.end).map((t,r)=>{let n=t.start?(0,he.default)(t.start):(0,he.default)(t.end);t.startTime&&(n=nt(n,t.startTime));let o=t.end?(0,he.default)(t.end):n;return(t.startTime||t.endTime||t.isAllDay===!1)&&(!t.startTime&&!t.endTime?o=n.add(1,"hour"):t.endTime?o=nt(o,t.endTime):o=nt(o,t.startTime).add(1,"hour")),{...t,id:t.id??r,title:t.title??"",start:n,end:o,isAllDay:t.isAllDay!==!1}})}function it(e,t,r,n){return e.filter(({order:o,start:a})=>o<r&&(n||t.day()===0||t.isSame(a,"day")))}function Lr(e){return[...e].sort((r,n)=>{let o=r.end.diff(r.start,"day")+1,a=n.end.diff(n.start,"day")+1;return o>a?-1:o<a?1:r.start.isBefore(n.start,"day")?-1:n.start.isBefore(r.start,"day")?1:r.isAllDay&&!n.isAllDay?-1:!r.isAllDay&&n.isAllDay?1:0})}function Br(e){let t=0;for(;e.has(t);)t++;return t}function G(e){if(e.length<2)return e.map(a=>({...a,order:0,indent:0}));let t=Lr(e),[r,...n]=t,o=[{...r,order:0,indent:0}];return n.forEach(a=>{let i=a.start,s=a.end||i,d=new Set;for(let p of o){let f=p.start,c=p.end||f;U(i,s,f,c)&&d.add(p.order)}let l=Br(d);o.push({...a,order:l,indent:0})}),o}var st=S(require("dayjs")),H={id:null,dragId:null,title:"Untitled",groups:[],start:(0,st.default)(),end:(0,st.default)(),startTime:void 0,endTime:void 0,isActive:!1,isAllDay:!0,indent:0,order:0};function ge(e,t){return t?e.isSame(t)||e.isBefore(t)?[e,t]:[t,e]:[e,e]}var ye=(e,t,r,n)=>{let[o,a]=ge(e,t),i=n&&r?o.add(15,"minute"):a;return{...H,id:null,start:o,end:i,isActive:!0,isAllDay:!r,startTime:r?o.format("h:mma"):void 0,endTime:r?i.format("h:mma"):void 0,order:r?100:0}};function Yr(e){return e.length<2?e:e.sort((t,r)=>{let n=$(t.start,r.start);return n>0?-1:n<0?1:0})}function zr(e,t,r){return e.isSame(t)||e.isAfter(t)&&e.isBefore(r)}function dt(e,t){if(e.length<2)return e.map(i=>({...i,order:0,indent:0}));let r=Yr(e),[n,...o]=r,a=[{...n,order:0,indent:0}];return o.forEach((i,s)=>{let d=me(t,i.start),l=0;a.forEach(p=>{let f=me(t,p.start),c=me(t,p.end);zr(d,f,c)&&(l+=1)}),a.push({...i,order:s+1,indent:l})}),a}var lt=S(require("dayjs")),$r=(e,t,r="01-Jan-2000",n="01-Jan-2000")=>{let o=e?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",a=t?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",i=(0,lt.default)(`${r} ${o}`),s=(0,lt.default)(`${n} ${a}`);return{start:i,end:s}};function J(e){let t=e?.map(o=>o.color).filter(Boolean)??[];if(!t.length)return{backgroundColor:fe};if(t.length===1)return{backgroundColor:t[0]};let r=100/t.length;return{backgroundImage:`-webkit-linear-gradient(-30deg,${t.map((o,a)=>`${o} ${r*a}% ${r*a+r}%`).join(", ")})`}}var Wr=({isTimeEvent:e,firstClickDate:t,start:r,date:n,dispatch:o})=>{if(e){let a=$(t,n)<0?ge(r,t.add(15,"minute"))[1]:t,i=r.hour(n.hour()).minute(n.minute());if(Math.abs($(a,n))>=15){let s=ye(a,i,!0);o({type:"update_event",event:s})}}else{let a=ye(t,n);o({type:"update_event",event:a})}},Mt=({enableDragCreation:e,dispatch:t,state:r,onEventCreate:n})=>{if(!e)return s=>{s.type==="mousedown"&&t({type:"reset_calendar"})};let o=()=>t({type:"open_popover"}),a=()=>t({type:"reset_calendar"});return(s,d,l,p)=>{let{dragActive:f,firstClickDate:c,placeholderEvent:u}=r,{start:g}=u;if(s.button!==0){f&&t({type:"event_create_stop"});return}switch(s.type){case"mousedown":{if(r.eventAnchor||r.overflowIsOpen){t({type:"reset_calendar"});return}let m=ye(d,d,l,!0);t({type:"event_create_start",date:d,event:m,anchor:p.current});break}case"mouseenter":{if(s.buttons!==1||!f||!c)return;Wr({isTimeEvent:l,firstClickDate:c,start:g,date:d,dispatch:t});break}case"mouseup":{if(!f)return;n&&n({clickedEvent:r.clickedEvent,newEvent:r.placeholderEvent,eventRef:p.current,openPopover:o,reset:a}),t({type:"event_create_end",anchor:p.current})}}}};var L=require("react"),Fr={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Ur(e){let t=(0,L.useRef)(0),r=(0,L.useRef)(null),[n,o]=(0,L.useState)(Fr),a=(0,L.useMemo)(()=>typeof window<"u"?new ResizeObserver(i=>{let s=i[0];s&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{r.current&&o(s.contentRect)}))}):null,[]);return(0,L.useEffect)(()=>(r.current&&a?.observe(r.current,e),()=>{a?.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[r.current]),[r,n]}function Tt(e){let[t,{width:r,height:n}]=Ur(e);return{ref:t,width:r,height:n}}var kt=require("react"),M=require("@floating-ui/react");function At({dispatch:e,event:t,isInOverflow:r,hasContextMenu:n,state:o}){let[a,i]=(0,kt.useState)(!1),s=()=>i(!1),d=t.id!==null&&o.clickedEvent?.id===t.id,{refs:l,floatingStyles:p,context:f}=(0,M.useFloating)({open:a,onOpenChange:i,middleware:[(0,M.offset)({mainAxis:5,alignmentAxis:4}),(0,M.flip)({fallbackPlacements:["left-start"]}),(0,M.shift)({padding:10})],placement:"right-start"}),c=(0,M.useDismiss)(f),{getFloatingProps:u}=(0,M.useInteractions)([c]);return{handleContextMenu:(m,v)=>{n&&(m.preventDefault(),!(o.popoverIsOpen||o.overflowIsOpen&&!r)&&(l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m.clientX,y:m.clientY,top:m.clientY,right:m.clientX,bottom:m.clientY,left:m.clientX}}}),e({type:"open_context_menu",event:t,anchor:v.current}),i(!0)))},isActive:d,contextIsOpen:a,refs:l,floatingStyles:p,getFloatingProps:u,closeContextMenu:s}}var ct=S(require("dayjs")),X=require("react");var Ce={clickedEvent:H,popoverIsOpen:!1,eventAnchor:null,dragActive:!1,firstClickDate:null,placeholderEvent:H,dragStartOffset:null,eventDragActive:!1,overflowAnchor:null,overflowIsOpen:!1};function St(e,t){switch(t.type){case"reset_calendar":return Ce;case"open_overflow":return{...e,...Ce,overflowIsOpen:!0,overflowAnchor:t.anchor||e.overflowAnchor};case"open_popover":return{...e,popoverIsOpen:!0};case"open_context_menu":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor};case"set_clicked_event":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor,placeholderEvent:H};case"update_event":return{...e,dragStartOffset:t.dragStartOffset??e.dragStartOffset,placeholderEvent:{...e.placeholderEvent,...t.event,id:null}};case"event_create_start":return{...e,dragActive:!0,firstClickDate:t.date||e.firstClickDate,placeholderEvent:{...e.placeholderEvent,...t.event,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_end":return{...e,dragActive:!1,firstClickDate:null,placeholderEvent:{...e.placeholderEvent,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_stop":return{...e,dragActive:!1,firstClickDate:null,clickedEvent:H,placeholderEvent:H,eventDragActive:!1};case"event_reschedule_start":return{...e,eventDragActive:!0,clickedEvent:t.event||e.clickedEvent,placeholderEvent:{...e.placeholderEvent,order:0,...t.event,id:null,isActive:!0}};case"event_reschedule_end":return{...e,eventDragActive:!1,dragStartOffset:null,eventAnchor:t.anchor||e.eventAnchor};default:return console.log(`Invalid action type ${t.type} passed to calendar reducer`),e}}function mt({isInitialised:e=!1,initialDate:t=(0,ct.default)(),initialView:r="month",closeOnClickOutside:n=!0}={}){let[o,a]=(0,X.useState)((0,ct.default)(t)),[i,s]=(0,X.useState)(r),[d,l]=(0,X.useReducer)(St,Ce);return(0,X.useEffect)(()=>{if(!n||e)return;let p=()=>l({type:"reset_calendar"});return window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[l,e,n]),{activeDate:o,setActiveDate:a,view:i,setView:s,state:d,dispatch:l}}function Pt(e){let r=mt({isInitialised:!!e});return e||r}var Ee={};var ee=require("react/jsx-runtime");function Ot({event:e,isCompact:t}){let{title:r,start:n,groups:o}=e,a=J(o),s={border:`1px solid ${(o?.map(d=>d.color).filter(Boolean)??[])[0]??fe}`};return(0,ee.jsxs)("div",{className:`${Ee.timeContainer}`,"data-sm":t,style:s,children:[(0,ee.jsx)("div",{className:`${Ee.timeDot}`,style:a}),(0,ee.jsx)("div",{className:`${Ee.timeText}`,children:n.format("h:mma")}),(0,ee.jsx)("span",{className:`${Ee.timeLabel}`,children:r})]})}var Ve={};var Rt=e=>{switch(e){case"both":return"polygon(10px 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 10px 100%, 0% 50%)";case"left":return"polygon(10px 0%, 100% 0%, 100% 100%, 10px 100%, 0% 50%)";case"right":return"polygon(0% 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 0% 100%)";case"none":return;default:return}};var jt=(e,t,r,n,o,a)=>{if(e)return{width:"100%"};let i=t.start.isSame(r,"w")?t.start.day():0,s=t.end.isSame(r,"w")?t.end.day():6;return{position:"absolute",left:a?"0.125rem":`calc(${i*100/7}% + 0.125rem)`,top:`calc(${a?4:n?24:26}px + ${t.order*(n?21:22)}px + ${o?6:0}px)`,width:a?"calc(100% - 6px)":`calc(${100*(1+(s-i))/7}% - 0.25rem - 1px)`}};function Nt(e,t){return!t.isActive&&t.id===e.placeholderEvent.dragId}var Vt=(e,t,r,n,o)=>{let a=e?r.isBefore(t,"day"):!!o?.first&&r.isBefore(o.first,"day"),i=e?n.isAfter(t,"day"):!!o?.last&&n.isAfter(o.last,"day");return a&&i?"both":a?"left":i?"right":"none"};var _t=(e,t,r,n,o)=>{let a=r===0?6:0;return{gridColumnStart:r+1,gridRowStart:e.start&&e.start.hour()*4+Math.round(e.start.minute()/15)+1,gridRowEnd:e.end&&e.end.hour()*4+Math.round(e.end.minute()/15)+1,height:12*((t||60)/15)-2,borderWidth:e.indent>0?t>30?"1px":"0.5px":0,marginLeft:n*e.indent+a,width:`calc(100% - ${n*(e.indent+1)+a}px)`,zIndex:o?100:1+e.order,...J(e.groups)}};var _e=require("react/jsx-runtime");function It({date:e,event:t,minMaxDatesInView:r,isCompact:n,isInOverflow:o}){let a=Vt(o,e,t.start,t.end,r),i=Rt(a),s=J(t.groups);return(0,_e.jsx)("div",{className:Ve.container,style:{...s,clipPath:i},children:(0,_e.jsx)("div",{className:Ve.content,"data-sm":n,children:(0,_e.jsx)("span",{className:Ve.text,"data-arrows":a,children:t.title})})})}var T=require("react/jsx-runtime");function te({view:e,enableRescheduling:t,compact:r=!1,date:n,dispatch:o,event:a,isInWeekHeader:i=!1,isInOverflow:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,placeholderRef:f,renderContextMenu:c,state:u}){let g=(0,Ht.useRef)(null),m=!!c,v=!!p||t,h=e==="month",C=e==="day",E=()=>o({type:"open_popover"}),w=()=>o({type:"reset_calendar"}),y=()=>o({type:"reset_calendar"}),D=(_,kr,je,Ar)=>{if(_.stopPropagation(),kr||!je.current)return;let Ze=A&&u.eventAnchor?.dataset.anchorday===je.current.dataset.anchorday;!s&&u.overflowIsOpen&&o({type:"reset_calendar"}),Ze||o({type:"set_clicked_event",event:a,anchor:je.current});let Sr=()=>Ze?w():E();Ar?.({event:a,isDoubleClick:Ze,eventRef:je.current,openPopover:E,closePopover:w,togglePopover:Sr})},{handleContextMenu:x,isActive:A,contextIsOpen:z,refs:W,floatingStyles:b,getFloatingProps:K,closeContextMenu:Q}=At({dispatch:o,event:a,state:u,hasContextMenu:m,isInOverflow:s}),ie=a.id===null,se=ie&&a.start.isSame(n,"d")?f:g,de=Math.abs($(a.start,a.end)),le=de<=30,Xe=C?120:20,Oe=C?0:n.day(),Re=()=>{o({type:"reset_calendar"}),t&&!s&&o({type:"event_reschedule_start",event:{...a,dragId:a.id,order:h?a.order:1e3}})},qe=h?jt(s,a,n,r,i,d):_t(a,de,Oe,Xe,v&&A);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:h?ce.monthItemContainer:ce.weekItemContainer,"data-interactive":v,"data-active":v&&A,"data-anchorday":n.format("DD-MMM-YYYY"),"data-placeholder":ie,"data-dragactive":u.dragActive||u.eventDragActive,"data-isdragging":Nt(u,a),"data-sm":r,"data-time":h&&!a.isAllDay,draggable:"true",onClick:_=>D(_,ie,se,p),onContextMenu:_=>x(_,se),onDragStart:Re,ref:se,style:qe,children:h?a.isAllDay?(0,T.jsx)(It,{date:n,event:a,isCompact:r,isInOverflow:s,minMaxDatesInView:l}):(0,T.jsx)(Ot,{event:a,isCompact:r}):(0,T.jsxs)("div",{className:ce.itemLabelWrapper,"data-short":le,children:[(0,T.jsx)("span",{style:le?void 0:{width:"100%"},children:a.title}),(0,T.jsx)("span",{className:ce.timeText,children:rt(a,de)})]})}),z&&(0,T.jsx)("div",{ref:W.setFloating,style:{...b,zIndex:2},...K(),children:c&&c({event:a,closeContextMenu:Q,onClose:y,openPopover:E})})]})}var zt=require("react-dom"),Ie=require("react");var k=require("@floating-ui/react-dom"),Xr=32,Lt=32,Bt=16;function Yt({anchor:e}){let t={name:"preventViewportOverflow",async fn(o){let a=await(0,k.detectOverflow)(o),i=o.x;a.left>0&&(i=o.x+a.left+Lt),a.right>0&&(i=o.x-a.right-Lt);let s=o.y;return a.top>0&&(s=o.y+a.top+Bt),a.bottom>0&&(s=o.y-a.bottom-Bt),o.middlewareData.hide?.referenceHidden?{...o,x:i}:{...o,x:i,y:s}}},{refs:r,floatingStyles:n}=(0,k.useFloating)({elements:{reference:e},placement:"bottom",strategy:"fixed",whileElementsMounted:k.autoUpdate,middleware:[(0,k.hide)(),(0,k.offset)(8),(0,k.autoPlacement)({crossAxis:!0,padding:Xr}),t]});return{refs:r,floatingStyles:n}}var pt=require("react/jsx-runtime");function $t({anchor:e,zIndex:t,colorScheme:r,children:n}){let o=(0,Ie.useRef)({}),{refs:a,floatingStyles:i}=Yt({anchor:e});return(0,Ie.useEffect)(()=>{setTimeout(()=>{o.current={transitionDuration:"250ms",transitionProperty:"all"}},100)},[]),(0,zt.createPortal)((0,pt.jsx)("div",{ref:a.setFloating,style:{...i,...o.current,zIndex:t},"data-ec-color-scheme":r,children:(0,pt.jsx)("div",{onClick:s=>s.stopPropagation(),children:n})}),document.body)}var Wt=require("react/jsx-runtime");function He({anchor:e,colorScheme:t,isOpen:r,zIndex:n=1,children:o}){return!r||!e?null:(0,Wt.jsx)($t,{anchor:e,zIndex:n,colorScheme:t,children:o})}var ft={};var Ut=S(require("dayjs"));var Le={};var Ft=require("react");var re={};var we=require("react/jsx-runtime");function Be({date:e,dispatch:t,isCompact:r,numOverflowEvents:n,state:o}){let a=(0,Ft.useRef)(null),i=s=>{o.overflowIsOpen&&s.target===o.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:e,anchor:a.current})};if(n)return(0,we.jsxs)("div",{className:re.container,"data-sm":r,"data-date":e.format("DD-MMM-YYYY"),onClick:i,onMouseDown:s=>s.stopPropagation(),ref:a,children:[(0,we.jsx)("span",{className:`${re.label} ${re.smOnly}`,children:`+${n}`}),(0,we.jsxs)("span",{className:`${re.label} ${re.lgOnly}`,children:[n," more"]})]})}var oe=require("react/jsx-runtime");function Gt({dayRecord:e,dispatch:t,isCompact:r,numOverflowEvents:n,state:o}){let{date:a,isCurrentMonth:i}=e,s=a.isSame((0,Ut.default)(),"day"),d=s?"white":i?"dark":"dim";return(0,oe.jsxs)("div",{className:Le.cellHeader,children:[(0,oe.jsx)("div",{className:Le.dateContainer,"data-today":s,children:(0,oe.jsx)("span",{className:Le.dateLabel,"data-color":d,"data-sm":r,children:a.date()})}),(0,oe.jsx)(Be,{date:a,dispatch:t,isCompact:r,numOverflowEvents:n,state:o})]})}var N=require("react/jsx-runtime"),Qr=(e,t,r=!1)=>{let{isActive:n,isAllDay:o,start:a,end:i}=e;return n&&(!r||o)&&P(t,a,i)&&(t.day()===0||t.isSame(a,"day"))};function Ye({EVENT_LIMIT:e,enableRescheduling:t,compact:r,dayRecord:n,dispatch:o,handleMouseEvent:a,headerHeight:i="100%",isInWeekHeader:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,onEventReschedule:f,orderedEvents:c,placeholderRef:u,renderContextMenu:g,state:m}){let{date:v}=n,h=I(c,v),C=it(h,v,e,d),E=h.reduce((b,K)=>b+(K.order>=e?1:0),0),w=(d||s)&&E>0;Qr(m.placeholderEvent,v,s||d)&&C.push(m.placeholderEvent);let D=()=>o({type:"open_popover"}),x=()=>o({type:"reset_calendar"}),A=b=>{a(b,v,!1,u)},z=b=>{m.eventDragActive&&ue({state:m,dispatch:o,date:v,view:"month"}),a(b,v,!1,u)},W=b=>{m.eventDragActive&&(o({type:"event_reschedule_end",anchor:u.current}),f?.({clickedEvent:m.clickedEvent,newEvent:m.placeholderEvent,eventRef:u.current,openPopover:D,reset:x})),a(b,v,!1,u)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:ft.cell,"data-border":!d&&v.day()!==6,onMouseDown:A,onMouseEnter:z,onMouseUp:W,style:{height:i,cursor:m.eventDragActive?"grabbing":"auto"},children:[!s&&!d&&(0,N.jsx)(Gt,{state:m,dispatch:o,isCompact:r,dayRecord:n,numOverflowEvents:E}),(0,N.jsx)("div",{className:ft.cellContent,"data-week":s||d,children:w&&(0,N.jsx)(Be,{date:v,state:m,dispatch:o,isCompact:r,numOverflowEvents:E})})]}),C.map(b=>(0,N.jsx)(te,{date:v,view:"month",state:m,event:b,compact:r,dispatch:o,onEventClick:p,isInDayHeader:d,isInWeekHeader:s,placeholderRef:u,renderContextMenu:g,minMaxDatesInView:l,enableRescheduling:t},b.id))]})}var ut={};var vt=require("react/jsx-runtime");function Jt({visible:e}){if(e)return(0,vt.jsx)("div",{className:ut.loaderWrapper,children:(0,vt.jsx)("span",{className:ut.loader})})}var B={};var Xt={};var qt=require("react/jsx-runtime");function ne({isGroupButton:e,active:t=!1,onClick:r=()=>null,variant:n,children:o}){return(0,qt.jsx)("button",{type:"button",onClick:r,"data-group":e,"data-active":t,"data-variant":n,className:Xt.button,children:o})}var be=require("react/jsx-runtime");function Zt({hideViewToggle:e,views:t,setView:r,view:n,children:o}){if(t.length<1&&!o)return;let a=F.filter(i=>t.includes(i));return(0,be.jsxs)("div",{className:B.controls,children:[!e&&a.length>1&&(0,be.jsx)("div",{className:B.buttonGroup,children:a.map(i=>(0,be.jsx)(ne,{isGroupButton:!0,active:n===i,onClick:()=>r(i),children:i},i))}),o]})}var er=S(require("dayjs"));var De=require("react/jsx-runtime");function Kt({size:e="24",stroke:t="2"}){return(0,De.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-left",children:[(0,De.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,De.jsx)("path",{d:"M15 6l-6 6l6 6"})]})}var xe=require("react/jsx-runtime");function Qt({size:e="24",stroke:t="2"}){return(0,xe.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-right",children:[(0,xe.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,xe.jsx)("path",{d:"M9 6l6 6l-6 6"})]})}var V=require("react/jsx-runtime"),oo=(e,t)=>{let r=e.startOf("week"),n=e.endOf("week");return t==="year"?e.format("YYYY"):t==="month"?e.format("MMMM YYYY"):t==="week"?`${r.format("MMM DD")} - ${n.format("MMM DD, YYYY")}`:e.format("D MMMM, YYYY")};function tr({activeDate:e,setActiveDate:t,view:r}){let n=()=>t((0,er.default)()),o=i=>t(s=>s.add(1,i)),a=i=>t(s=>s.subtract(1,i));return(0,V.jsxs)("div",{className:B.navigation,children:[(0,V.jsx)(ne,{variant:"outline",onClick:n,children:"Today"}),(0,V.jsxs)("div",{className:B.actions,children:[(0,V.jsx)(ne,{variant:"subtle",onClick:()=>a(r),children:(0,V.jsx)(Kt,{size:"1.5rem"})}),(0,V.jsx)(ne,{variant:"subtle",onClick:()=>o(r),children:(0,V.jsx)(Qt,{size:"1.5rem"})})]}),(0,V.jsx)("span",{className:B.date,children:oo(e,r)})]})}var Me=require("react/jsx-runtime");function ht({activeDate:e,onClick:t=()=>null,hideViewToggle:r,setActiveDate:n,setView:o=()=>null,views:a=[...F],view:i="month",customControls:s}){return(0,Me.jsxs)("div",{className:B.header,onClick:t,children:[(0,Me.jsx)(tr,{activeDate:e,setActiveDate:n,view:i}),(0,Me.jsx)(Zt,{hideViewToggle:r,views:a,setView:o,view:i,children:s})]})}var Ct=require("react");var Te={};var gt=S(require("dayjs")),ze=require("react"),ao=48,io=60,so=(0,gt.default)().diff((0,gt.default)().startOf("day"),"m"),lo=ao/io;function rr({minutesToScroll:e=so,offset:t=140}={}){let r=(0,ze.useRef)(null);return(0,ze.useEffect)(()=>{if(!r.current)return;let n=lo*e-t;r.current.scrollTo({top:n})},[e,t]),r}var or=(e,t)=>{if(t==="day")return[{date:e}];let r=e.startOf("week"),o=r.subtract(r.day(),"d"),a=[];for(let i=0;i<7;i++)a.push({date:o,isCurrentMonth:o.month()===e.month()}),o=o.add(1,"day");return a};function nr(e,t){return e.reduce((r,n,o)=>({...r,[o]:dt(I(t,n.date),n.date)}),{})}var $e={};var We=require("react/jsx-runtime");function ar(){return(0,We.jsx)("div",{className:$e.hoursColumn,children:tt.map(e=>(0,We.jsx)("div",{className:$e.hour,children:(0,We.jsx)("span",{className:$e.hourLabel,children:e})},e))})}var ir=S(require("dayjs"));var Fe={};var ke=require("react/jsx-runtime"),Ue=(0,ir.default)();function sr({activeDate:e,isDayView:t}){if(!e.isSame(Ue,"day"))return;let r=t?1:Ue.day()+1,n=Ue.hour()*4+Math.round(Ue.minute()/15)+1;return(0,ke.jsxs)("div",{className:Fe.wrapper,style:{gridColumn:r,gridRow:n},children:[(0,ke.jsx)("div",{className:Fe.dot}),(0,ke.jsx)("div",{className:Fe.line})]})}var dr={};var Ae=require("react/jsx-runtime"),yt=e=>Array(e).fill(0).map((t,r)=>r),fo=(e,t,r,n,o)=>(o==="day"?e:e.startOf("week").add(t,"d")).hour(r).minute(n*15);function lr({view:e,activeDate:t,handleMouseEvent:r,placeholderRef:n,state:o,dispatch:a,onEventReschedule:i}){let s=e==="day"?[0]:yt(7),d=yt(24),l=yt(4),p=()=>a({type:"open_popover"}),f=()=>a({type:"reset_calendar"});return(0,Ae.jsx)(Ae.Fragment,{children:s.map(c=>d.map(u=>l.map(g=>{let m=fo(t,c,u,g,e);return(0,Ae.jsx)("div",{className:dr.gridCell,"data-isweekview":e==="week",onMouseDown:v=>r(v,m,!0,n),onMouseEnter:v=>{o.eventDragActive&&ue({state:o,dispatch:a,date:m,view:e}),r(v,m,!0,n)},onMouseUp:v=>{o.eventDragActive&&(a({type:"event_reschedule_end",anchor:n.current}),i?.({clickedEvent:o.clickedEvent,newEvent:o.placeholderEvent,eventRef:n.current,openPopover:p,reset:f})),r(v,m,!0,n)},style:{gridColumnStart:c+1,gridRow:`${u*4+g+1} / ${u*4+g+2}`,cursor:o.eventDragActive?"grabbing":"auto"}},`${c}${u}${g}`)})))})}var Ge={};var mr=S(require("dayjs")),ae=require("react/jsx-runtime"),cr=2;function pr({view:e,enableRescheduling:t,compact:r,allDayEvents:n,dispatch:o,handleMouseEvent:a,handleStopDrag:i,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,weekDatesArray:u}){let g=e==="day"?I(n,u[0].date):ve(n,u[0].date),m=G(g),v=m.length>0?Math.max(...m.map(y=>y.order+1)):0,h=Math.min(v,cr+1),C=r?20:23,E=h>0?8:0,w=C*h+E;return(0,ae.jsx)("div",{className:Ge.headerRow,"data-isweekview":e==="week",onMouseLeave:i,children:u.map((y,D)=>{let{date:x}=y,A=e==="week"||g.length>0;return(0,ae.jsxs)("div",{className:Ge.headerCell,"data-border":A,children:[e==="week"&&(0,ae.jsx)("div",{className:Ge.headerLabel,"data-today":x.isSame((0,mr.default)(),"day"),onMouseEnter:i,children:`${x.format("ddd")} ${x.format("DD")}`}),(0,ae.jsx)(Ye,{isInDayHeader:e==="day",isInWeekHeader:e==="week",EVENT_LIMIT:cr,enableRescheduling:t,compact:r,dayRecord:y,dispatch:o,handleMouseEvent:a,headerHeight:w,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,orderedEvents:m,placeholderRef:p,renderContextMenu:f,state:c})]},D)})})}var O=require("react/jsx-runtime");function fr({view:e,activeDate:t,compact:r,dispatch:n,enableRescheduling:o,events:a,handleMouseEvent:i,handleStopDrag:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c}){let u=e==="day",g=e==="week",m=a.filter(y=>y.isAllDay),v=a.filter(y=>!y.isAllDay),h=rr(),C=(0,Ct.useMemo)(()=>or(t,e),[t,e]),E={first:u?t:C[0].date,last:u?t:C[6].date},w=(0,Ct.useMemo)(()=>nr(C,v),[v,C]);return(0,O.jsxs)("div",{className:Te.timeView,children:[(0,O.jsx)(pr,{allDayEvents:m,compact:r,dispatch:n,enableRescheduling:o,handleMouseEvent:i,handleStopDrag:s,minMaxDatesInView:E,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,view:e,weekDatesArray:C}),(0,O.jsx)("div",{ref:h,className:Te.scrollWrapper,children:(0,O.jsxs)("div",{className:Te.gridWrapper,children:[(0,O.jsx)(ar,{}),(0,O.jsxs)("div",{className:Te.grid,"data-isweekview":g,onMouseEnter:s,onMouseLeave:s,children:[(0,O.jsx)(lr,{activeDate:t,dispatch:n,handleMouseEvent:i,onEventReschedule:l,placeholderRef:p,state:c,view:e}),(0,O.jsx)(sr,{activeDate:t,isDayView:u}),C.map(({date:y},D)=>{let x=w[D],{isActive:A,isAllDay:z,start:W,end:b}=c.placeholderEvent;return A&&!z&&P(y,W,b)&&x.push(c.placeholderEvent),x.map(Q=>(0,O.jsx)(te,{date:y,dispatch:n,enableRescheduling:o,event:Q,onEventClick:d,placeholderRef:p,renderContextMenu:f,state:c,view:e},Q.id))})]})]})})]})}var q={};var vr=require("react");var ur={};var gr=require("react/jsx-runtime");function hr({date:e,handleClick:t,isToday:r,isDimmed:n,isActive:o}){let a=(0,vr.useRef)(null);return(0,gr.jsx)("div",{ref:a,"data-date":e.format("DD-MMM-YYYY"),className:ur.date,"data-today":r,"data-dimmed":n,"data-active":o,onMouseDown:i=>i.stopPropagation(),onClick:i=>t(i,e,a),children:e.format("D")})}var yr=S(require("dayjs"));function Cr(e,t){let r={},n=new Set;t.forEach(({start:a,end:i})=>{let s=a.clone().startOf("day"),d=i.clone().startOf("day");for(;s.isBefore(d,"day")||s.isSame(d,"day");)n.add(s.format("YYYY-MM-DD")),s=s.add(1,"day")});let o=e.startOf("year");return pe.forEach((a,i)=>{let s=o.clone().day(0),d=Array.from({length:42},(l,p)=>{let f=s.clone().add(p,"day"),c=f.isSame((0,yr.default)(),"day"),u=o.isSame(f,"month"),g=u&&n.has(f.format("YYYY-MM-DD"));return{date:f,isToday:c,isActive:g,isCurrentMonth:u}});r[a]=d,o=o.month(i+1)}),r}var Y=require("react/jsx-runtime");function Er({activeDate:e,dispatch:t,events:r,state:n}){let o=Cr(e,r),a=()=>t({type:"reset_calendar"}),i=(s,d,l)=>{n.overflowIsOpen&&s.target===n.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:d,anchor:l.current})};return(0,Y.jsx)("div",{className:q.scrollWrapper,children:(0,Y.jsx)("div",{className:q.yearView,onMouseDown:a,children:pe.map(s=>(0,Y.jsxs)("div",{className:q.month,children:[(0,Y.jsx)("div",{className:q.monthLabel,children:s}),(0,Y.jsxs)("div",{className:q.monthDates,children:[Qe.map((d,l)=>(0,Y.jsx)("div",{className:q.monthHeaderDay,children:d},`${s}-${l}`)),o[s].map(({date:d,isToday:l,isCurrentMonth:p,isActive:f},c)=>(0,Y.jsx)(hr,{date:d,handleClick:i,isToday:l,isActive:f,isDimmed:!p},c))]})]},s))})})}var bt=require("react");var Je={};var Et={};var wt=require("react/jsx-runtime"),Co=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function wr({isCompact:e}){return(0,wt.jsx)("div",{className:Et.monthHeader,"data-sm":e,children:Co.map((t,r)=>(0,wt.jsx)("div",{className:Et.headerCell,children:t},r))})}var br=(e,t)=>{if(e===0)return 0;let r=2,n=8,o=26,a=t?18:20;return Math.max(Math.floor((e-o-n)/(a+r)),0)};var Dr=e=>{let t=e.startOf("month").day(0),r=t,n=e.add(1,"month").month(),o=[],a=[],i=1;for(;r.subtract(r.day(),"d").month()!==n;)o.push({date:r,isCurrentMonth:r.month()===e.month()}),i===7&&(a.push(o),o=[],i=0),i++,r=r.add(1,"day");return{weeks:a,first:t,last:r}};function xr(e,t){return e.reduce((r,n,o)=>({...r,[o]:G(ve(t,n[0].date))}),{})}var Z=require("react/jsx-runtime");function Mr({enableRescheduling:e,compact:t,activeDate:r,dispatch:n,events:o,handleMouseEvent:a,handleStopDrag:i,onEventClick:s,onEventReschedule:d,placeholderRef:l,renderContextMenu:p,state:f}){let c=(0,bt.useMemo)(()=>Dr(r),[r]),u={first:c.first,last:c.last},{ref:g,height:m}=Tt(),v=m/c.weeks.length,h=br(v,t),C=(0,bt.useMemo)(()=>xr(c.weeks,o),[o,c.weeks]);return(0,Z.jsxs)("div",{className:Je.monthView,children:[(0,Z.jsx)(wr,{isCompact:t}),(0,Z.jsx)("div",{className:Je.grid,onMouseLeave:i,ref:g,children:c.weeks.map((E,w)=>{let y=m>0?C[w]:[];return(0,Z.jsx)("div",{className:Je.row,children:E.map((D,x)=>(0,Z.jsx)(Ye,{EVENT_LIMIT:h,enableRescheduling:e,compact:t,dayRecord:D,dispatch:n,handleMouseEvent:a,isInWeekHeader:!1,minMaxDatesInView:u,onEventClick:s,onEventReschedule:d,orderedEvents:y,placeholderRef:l,renderContextMenu:p,state:f},x))},w)})})]})}var Tr=S(require("dayjs"));var Se={};var R=require("react/jsx-runtime"),wo=e=>e?(0,Tr.default)(e):void 0;function Dt({compact:e,dispatch:t,events:r,colorScheme:n,onEventClick:o,placeholderRef:a,renderContextMenu:i,state:s,enableRescheduling:d}){let l=wo(s.overflowAnchor?.dataset.date);if(!l||!s.overflowAnchor)return(0,R.jsx)(R.Fragment,{});let p=G(I(r,l));return(0,R.jsx)(He,{zIndex:2,anchor:s.overflowAnchor,isOpen:s.overflowIsOpen,colorScheme:n,children:(0,R.jsxs)("div",{className:Se.overflowCard,children:[(0,R.jsx)("span",{className:Se.label,children:l.format("dddd, MMMM D")}),!p.length&&(0,R.jsx)("div",{className:Se.empty,children:"No events scheduled for this date"}),(0,R.jsx)("div",{className:Se.eventsWrapper,children:p.map(f=>(0,R.jsx)(te,{view:"month",isInOverflow:!0,enableRescheduling:d,compact:e,date:l,dispatch:t,event:f,onEventClick:o,placeholderRef:a,renderContextMenu:i,state:s},f.id))})]})})}var j=require("react/jsx-runtime");function bo({calendar:e,compact:t=!1,colorScheme:r="light",enableDragCreation:n=!1,enableRescheduling:o=!1,events:a=[],popoverZIndex:i=101,isFetching:s=!1,noHeader:d=!1,onEventClick:l,onEventCreate:p,onEventReschedule:f,renderPopover:c,renderContextMenu:u,views:g=[...F]}){let{activeDate:m,setActiveDate:v,view:h,setView:C,state:E,dispatch:w}=Pt(e),y=(0,Pe.useMemo)(()=>at(a),[a]),D=(0,Pe.useMemo)(()=>ot(y,m,h),[y,m,h]),A=h==="week"||h==="day"?D.filter(_=>_.isAllDay):D,{eventAnchor:z,dragActive:W,eventDragActive:b,popoverIsOpen:K,clickedEvent:Q,placeholderEvent:ie}=E,se=()=>w({type:"reset_calendar"}),de=()=>{(W||b)&&w({type:"event_create_stop"})},le=(0,Pe.useRef)(null),Xe=Mt({enableDragCreation:n,dispatch:w,state:E,onEventCreate:p}),Oe={activeDate:m,dispatch:w,state:E,events:D},Re={...Oe,compact:t,onEventClick:l,handleStopDrag:de,placeholderRef:le,handleMouseEvent:Xe,onEventReschedule:f,renderContextMenu:u,enableRescheduling:o},qe=()=>{switch(h){case"year":return(0,j.jsx)(Er,{...Oe});case"month":return(0,j.jsx)(Mr,{...Re});case"week":case"day":return(0,j.jsx)(fr,{...Re,view:h});default:return null}};return(0,j.jsxs)("div",{className:Ke.root,"data-ec-color-scheme":r,children:[d?null:(0,j.jsx)(ht,{view:h,setActiveDate:v,setView:C,activeDate:m,views:g}),(0,j.jsxs)("div",{className:Ke.calendar,"data-withheader":!d,onClick:_=>_.stopPropagation(),children:[(0,j.jsx)(Jt,{visible:s}),qe(),c&&z&&(0,j.jsx)(He,{isOpen:K,anchor:z,zIndex:i,colorScheme:r,children:c({onClose:se,clickedEvent:Q,newEvent:ie})}),(0,j.jsx)(Dt,{state:E,compact:t,dispatch:w,events:A,colorScheme:r,onEventClick:l,placeholderRef:le,renderContextMenu:u,enableRescheduling:o})]})]})}0&&(module.exports={CALENDAR_VIEWS,DAYS_IN_FULL_MONTH,DAY_LABELS_SHORT,DEFAULT_COLOR,EventsCalendar,HOURS,Header,MONTHS,arrangeWeekEvents,arrangeWeekdayEvents,createDayjsObjFromTime,filterByDate,filterByView,filterByWeek,getBackgroundFromGroups,getPlaceholderEvent,getTimeDiff,getTimeLabel,getVisibleEvents,hasOverlap,isBetween,parseRawEvents,returnValidStartEnd,setTime,updateEvent,useEventsCalendar});
//# sourceMappingURL=index.js.map