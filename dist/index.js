"use strict";"use client";var cr=Object.create;var Ae=Object.defineProperty;var mr=Object.getOwnPropertyDescriptor;var pr=Object.getOwnPropertyNames;var vr=Object.getPrototypeOf,fr=Object.prototype.hasOwnProperty;var ur=(e,t)=>{for(var r in t)Ae(e,r,{get:t[r],enumerable:!0})},dt=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of pr(t))!fr.call(e,n)&&n!==r&&Ae(e,n,{get:()=>t[n],enumerable:!(a=mr(t,n))||a.enumerable});return e};var A=(e,t,r)=>(r=e!=null?cr(vr(e)):{},dt(t||!e||!e.__esModule?Ae(r,"default",{value:e,enumerable:!0}):r,e)),hr=e=>dt(Ae({},"__esModule",{value:!0}),e);var Vr={};ur(Vr,{CALENDAR_VIEWS:()=>$,DAYS_IN_FULL_MONTH:()=>Ie,DAY_LABELS_SHORT:()=>He,DEFAULT_COLOR:()=>se,EventsCalendar:()=>_r,HOURS:()=>Be,Header:()=>Qe,MONTHS:()=>le,arrangeWeekEvents:()=>F,arrangeWeekdayEvents:()=>Ge,createDayjsObjFromTime:()=>xr,filterByDate:()=>V,filterByView:()=>Ye,filterByWeek:()=>me,getBackgroundFromGroups:()=>U,getPlaceholderEvent:()=>fe,getTimeDiff:()=>B,getTimeLabel:()=>Le,getVisibleEvents:()=>Fe,hasOverlap:()=>W,isBetween:()=>P,parseRawEvents:()=>We,returnValidStartEnd:()=>ve,setTime:()=>de,updateEvent:()=>ce,useEventsCalendar:()=>qe});module.exports=hr(Vr);var Ce=require("react");var xt=require("react");function de(e,t){return e.hour(t.hour()).minute(t.minute())}var $=["year","month","week","day"],le=["January","February","March","April","May","June","July","August","September","October","November","December"],He=["S","M","T","W","T","F","S"],Ie=42,se="#0ea5e9",Be=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"];function P(e,t,r,a=!1){return e.isAfter(t)&&e.isBefore(r)||e.isSame(t,"d")||(a?!1:e.isSame(r,"d"))}function W(e,t,r,a){return P(e,r,a)||P(r,e,t)||P(a,e,t)}function ce({state:e,dispatch:t,date:r,view:a}){let n=a==="month"?"day":"minute";if(e.dragStartOffset===null){let c=r.diff(e.clickedEvent.start,n);t({type:"update_event",dragStartOffset:c});return}let{start:o,end:i,startTime:d,endTime:l}=e.clickedEvent,s=r.subtract(e.dragStartOffset,n),m=i.diff(o,n),v=s.add(m,n);a!=="month"&&!s.isSame(v,"day")||t({type:"update_event",event:{...e.placeholderEvent,start:a==="month"?s.hour(o.hour()).minute(o.minute()):s,end:a==="month"?v.hour(i.hour()).minute(i.minute()):v,startTime:a==="month"?d:s.format("h:mma"),endTime:a==="month"?l:v.format("h:mma")}})}function B(e,t){let r=e.hour()*60+e.minute();return t.hour()*60+t.minute()-r}function Le(e,t){if(!e.start||!e.end)return"";let r=t<=30?", ":"";return e.start.isBefore(e.end)?`${r}${e.start.format("h:mma")} - ${e.end.format("h:mma")}`:`${r}${e.end.format("h:mma")} - ${e.start.format("h:mma")}`}function me(e,t){let r=t.add(6,"d");return e.filter(({start:a,end:n})=>W(t,r,a,n||a))}function V(e,t){return e.filter(({start:r,end:a})=>P(t,r,a))}function Ye(e,t,r){let a=r==="year"?"year":"month",n=t.startOf(a).day(0),o=t.endOf(a).day(6);return e.filter(({start:i,end:d})=>W(n,o,i,d))}var pe=A(require("dayjs")),$e=(e,t)=>{let r=t.replace(/.{2}$/," $&").toUpperCase();return(0,pe.default)(`${e.format("DD-MMM-YYYY")} ${r}`)};function We(e){return e.filter(t=>t.start||t.end).map((t,r)=>{let a=t.start?(0,pe.default)(t.start):(0,pe.default)(t.end);t.startTime&&(a=$e(a,t.startTime));let n=t.end?(0,pe.default)(t.end):a;return(t.startTime||t.endTime||t.isAllDay===!1)&&(!t.startTime&&!t.endTime?n=a.add(1,"hour"):t.endTime?n=$e(n,t.endTime):n=$e(n,t.startTime).add(1,"hour")),{...t,id:t.id??r,title:t.title??"",start:a,end:n,isAllDay:t.isAllDay!==!1}})}function Fe(e,t,r,a){return e.filter(({order:n,start:o})=>n<r&&(a||t.day()===0||t.isSame(o,"day")))}function gr(e){return[...e].sort((r,a)=>{let n=r.end.diff(r.start,"day")+1,o=a.end.diff(a.start,"day")+1;return n>o?-1:n<o?1:r.start.isBefore(a.start,"day")?-1:a.start.isBefore(r.start,"day")?1:r.isAllDay&&!a.isAllDay?-1:!r.isAllDay&&a.isAllDay?1:0})}function yr(e){let t=0;for(;e.has(t);)t++;return t}function F(e){if(e.length<2)return e.map(o=>({...o,order:0,indent:0}));let t=gr(e),[r,...a]=t,n=[{...r,order:0,indent:0}];return a.forEach(o=>{let i=o.start,d=o.end||i,l=new Set;for(let m of n){let v=m.start,c=m.end||v;W(i,d,v,c)&&l.add(m.order)}let s=yr(l);n.push({...o,order:s,indent:0})}),n}var Ue=A(require("dayjs")),z={id:null,dragId:null,title:"Untitled",groups:[],start:(0,Ue.default)(),end:(0,Ue.default)(),startTime:void 0,endTime:void 0,isActive:!1,isAllDay:!0,indent:0,order:0};function ve(e,t){return t?e.isSame(t)||e.isBefore(t)?[e,t]:[t,e]:[e,e]}var fe=(e,t,r,a)=>{let[n,o]=ve(e,t),i=a&&r?n.add(15,"minute"):o;return{...z,id:null,start:n,end:i,isActive:!0,isAllDay:!r,startTime:r?n.format("h:mma"):void 0,endTime:r?i.format("h:mma"):void 0,order:r?100:0}};function wr(e){return e.length<2?e:e.sort((t,r)=>{let a=B(t.start,r.start);return a>0?-1:a<0?1:0})}function br(e,t,r){return e.isSame(t)||e.isAfter(t)&&e.isBefore(r)}function Ge(e,t){if(e.length<2)return e.map(i=>({...i,order:0,indent:0}));let r=wr(e),[a,...n]=r,o=[{...a,order:0,indent:0}];return n.forEach((i,d)=>{let l=de(t,i.start),s=0;o.forEach(m=>{let v=de(t,m.start),c=de(t,m.end);br(l,v,c)&&(s+=1)}),o.push({...i,order:d+1,indent:s})}),o}var Je=A(require("dayjs")),xr=(e,t,r="01-Jan-2000",a="01-Jan-2000")=>{let n=e?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",o=t?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",i=(0,Je.default)(`${r} ${n}`),d=(0,Je.default)(`${a} ${o}`);return{start:i,end:d}};function U(e){let t=e?.map(n=>n.color).filter(Boolean)??[];if(!t.length)return{backgroundColor:se};if(t.length===1)return{backgroundColor:t[0]};let r=100/t.length;return{backgroundImage:`-webkit-linear-gradient(-30deg,${t.map((n,o)=>`${n} ${r*o}% ${r*o+r}%`).join(", ")})`}}var Er=({isTimeEvent:e,firstClickDate:t,start:r,date:a,dispatch:n})=>{if(e){let o=B(t,a)<0?ve(r,t.add(15,"minute"))[1]:t,i=r.hour(a.hour()).minute(a.minute());if(Math.abs(B(o,a))>=15){let d=fe(o,i,!0);n({type:"update_event",event:d})}}else{let o=fe(t,a);n({type:"update_event",event:o})}},lt=({enableDragCreation:e,dispatch:t,state:r,onEventCreate:a})=>{if(!e)return d=>{d.type==="mousedown"&&t({type:"reset_calendar"})};let n=()=>t({type:"open_popover"}),o=()=>t({type:"reset_calendar"});return(d,l,s,m)=>{let{dragActive:v,firstClickDate:c,placeholderEvent:f}=r,{start:h}=f;if(d.button!==0){v&&t({type:"event_create_stop"});return}switch(d.type){case"mousedown":{if(r.eventAnchor||r.overflowIsOpen){t({type:"reset_calendar"});return}let p=fe(l,l,s,!0);t({type:"event_create_start",date:l,event:p,anchor:m.current});break}case"mouseenter":{if(d.buttons!==1||!v||!c)return;Er({isTimeEvent:s,firstClickDate:c,start:h,date:l,dispatch:t});break}case"mouseup":{if(!v)return;a&&a({clickedEvent:r.clickedEvent,newEvent:r.placeholderEvent,eventRef:m.current,openPopover:n,reset:o}),t({type:"event_create_end",anchor:m.current})}}}};var H=require("react"),Cr={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Dr(e){let t=(0,H.useRef)(0),r=(0,H.useRef)(null),[a,n]=(0,H.useState)(Cr),o=(0,H.useMemo)(()=>typeof window<"u"?new ResizeObserver(i=>{let d=i[0];d&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{r.current&&n(d.contentRect)}))}):null,[]);return(0,H.useEffect)(()=>(r.current&&o?.observe(r.current,e),()=>{o?.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[r.current]),[r,a]}function st(e){let[t,{width:r,height:a}]=Dr(e);return{ref:t,width:r,height:a}}var ct=require("react"),k=require("@floating-ui/react");function mt({dispatch:e,event:t,isInOverflow:r,hasContextMenu:a,state:n}){let[o,i]=(0,ct.useState)(!1),d=()=>i(!1),l=t.id!==null&&n.clickedEvent?.id===t.id,{refs:s,floatingStyles:m,context:v}=(0,k.useFloating)({open:o,onOpenChange:i,middleware:[(0,k.offset)({mainAxis:5,alignmentAxis:4}),(0,k.flip)({fallbackPlacements:["left-start"]}),(0,k.shift)({padding:10})],placement:"right-start"}),c=(0,k.useDismiss)(v),{getFloatingProps:f}=(0,k.useInteractions)([c]);return{handleContextMenu:(p,u)=>{a&&(p.preventDefault(),!(n.popoverIsOpen||n.overflowIsOpen&&!r)&&(s.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p.clientX,y:p.clientY,top:p.clientY,right:p.clientX,bottom:p.clientY,left:p.clientX}}}),e({type:"open_context_menu",event:t,anchor:u.current}),i(!0)))},isActive:l,contextIsOpen:o,refs:s,floatingStyles:m,getFloatingProps:f,closeContextMenu:d}}var Xe=A(require("dayjs")),G=require("react");var ue={clickedEvent:z,popoverIsOpen:!1,eventAnchor:null,dragActive:!1,firstClickDate:null,placeholderEvent:z,dragStartOffset:null,eventDragActive:!1,overflowAnchor:null,overflowIsOpen:!1};function pt(e,t){switch(t.type){case"reset_calendar":return ue;case"open_overflow":return{...e,...ue,overflowIsOpen:!0,overflowAnchor:t.anchor||e.overflowAnchor};case"open_popover":return{...e,popoverIsOpen:!0};case"open_context_menu":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor};case"set_clicked_event":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor,placeholderEvent:z};case"update_event":return{...e,dragStartOffset:t.dragStartOffset??e.dragStartOffset,placeholderEvent:{...e.placeholderEvent,...t.event,id:null}};case"event_create_start":return{...e,dragActive:!0,firstClickDate:t.date||e.firstClickDate,placeholderEvent:{...e.placeholderEvent,...t.event,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_end":return{...e,dragActive:!1,firstClickDate:null,placeholderEvent:{...e.placeholderEvent,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_stop":return{...e,dragActive:!1,firstClickDate:null,clickedEvent:z,placeholderEvent:z,eventDragActive:!1};case"event_reschedule_start":return{...e,eventDragActive:!0,clickedEvent:t.event||e.clickedEvent,placeholderEvent:{...e.placeholderEvent,order:0,...t.event,id:null,isActive:!0}};case"event_reschedule_end":return{...e,eventDragActive:!1,dragStartOffset:null,eventAnchor:t.anchor||e.eventAnchor};default:return console.log(`Invalid action type ${t.type} passed to calendar reducer`),e}}function qe({isInitialised:e=!1,initialDate:t=(0,Xe.default)(),initialView:r="month",closeOnClickOutside:a=!0}={}){let[n,o]=(0,G.useState)((0,Xe.default)(t)),[i,d]=(0,G.useState)(r),[l,s]=(0,G.useReducer)(pt,ue);return(0,G.useEffect)(()=>{if(!a||e)return;let m=()=>s({type:"reset_calendar"});return window.addEventListener("click",m),()=>{window.removeEventListener("click",m)}},[s,e,a]),{activeDate:n,setActiveDate:o,view:i,setView:d,state:l,dispatch:s}}function vt(e){let r=qe({isInitialised:!!e});return e||r}var K=require("react/jsx-runtime");function ft({event:e,isCompact:t}){let{title:r,start:a,groups:n}=e,o=U(n),d={border:`1px solid ${(n?.map(l=>l.color).filter(Boolean)??[])[0]??se}`};return(0,K.jsxs)("div",{className:"events-calendar-time","data-sm":t,style:d,children:[(0,K.jsx)("div",{className:"events-calendar-time-dot",style:o}),(0,K.jsx)("div",{className:"events-calendar-time-text",children:a.format("h:mma")}),(0,K.jsx)("span",{className:"events-calendar-time-label",children:r})]})}var ut=e=>{switch(e){case"both":return"polygon(10px 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 10px 100%, 0% 50%)";case"left":return"polygon(10px 0%, 100% 0%, 100% 100%, 10px 100%, 0% 50%)";case"right":return"polygon(0% 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 0% 100%)";case"none":return;default:return}};var ht=(e,t,r,a,n,o)=>{if(e)return{width:"100%"};let i=t.start.isSame(r,"w")?t.start.day():0,d=t.end.isSame(r,"w")?t.end.day():6;return{position:"absolute",left:o?"0.125rem":`calc(${i*100/7}% + 0.125rem)`,top:`calc(${o?4:a?24:26}px + ${t.order*(a?21:22)}px + ${n?6:0}px)`,width:o?"calc(100% - 6px)":`calc(${100*(1+(d-i))/7}% - 0.25rem - 1px)`}};function gt(e,t){return!t.isActive&&t.id===e.placeholderEvent.dragId}var yt=(e,t,r,a,n)=>{let o=e?r.isBefore(t,"day"):!!n?.first&&r.isBefore(n.first,"day"),i=e?a.isAfter(t,"day"):!!n?.last&&a.isAfter(n.last,"day");return o&&i?"both":o?"left":i?"right":"none"};var wt=(e,t,r,a,n)=>{let o=r===0?6:0;return{gridColumnStart:r+1,gridRowStart:e.start&&e.start.hour()*4+Math.round(e.start.minute()/15)+1,gridRowEnd:e.end&&e.end.hour()*4+Math.round(e.end.minute()/15)+1,height:12*((t||60)/15)-2,borderWidth:e.indent>0?t>30?"1px":"0.5px":0,marginLeft:a*e.indent+o,width:`calc(100% - ${a*(e.indent+1)+o}px)`,zIndex:n?100:1+e.order,...U(e.groups)}};var Pe=require("react/jsx-runtime");function bt({date:e,event:t,minMaxDatesInView:r,isCompact:a,isInOverflow:n}){let o=yt(n,e,t.start,t.end,r),i=ut(o),d=U(t.groups);return(0,Pe.jsx)("div",{className:"events-calendar-all-day-event",style:{...d,clipPath:i},children:(0,Pe.jsx)("div",{className:"events-calendar-all-day-event-content","data-sm":a,children:(0,Pe.jsx)("span",{className:"events-calendar-all-day-event-text","data-arrows":o,children:t.title})})})}var M=require("react/jsx-runtime");function Q({view:e,enableRescheduling:t,compact:r=!1,date:a,dispatch:n,event:o,isInWeekHeader:i=!1,isInOverflow:d=!1,isInDayHeader:l=!1,minMaxDatesInView:s,onEventClick:m,placeholderRef:v,renderContextMenu:c,state:f}){let h=(0,xt.useRef)(null),p=!!c,u=!!m||t,b=e==="month",g=e==="day",w=()=>n({type:"open_popover"}),E=()=>n({type:"reset_calendar"}),y=()=>n({type:"reset_calendar"}),j=(ie,dr,Te,lr)=>{if(ie.stopPropagation(),dr||!Te.current)return;let ze=D&&f.eventAnchor?.dataset.anchorday===Te.current.dataset.anchorday;!d&&f.overflowIsOpen&&n({type:"reset_calendar"}),ze||n({type:"set_clicked_event",event:o,anchor:Te.current});let sr=()=>ze?E():w();lr?.({event:o,isDoubleClick:ze,eventRef:Te.current,openPopover:w,closePopover:E,togglePopover:sr})},{handleContextMenu:C,isActive:D,contextIsOpen:L,refs:Y,floatingStyles:x,getFloatingProps:X,closeContextMenu:q}=mt({dispatch:n,event:o,state:f,hasContextMenu:p,isInOverflow:d}),ne=o.id===null,ae=ne&&o.start.isSame(a,"d")?v:h,Z=Math.abs(B(o.start,o.end)),De=Z<=30,ke=g?120:20,Me=g?0:a.day(),it=()=>{n({type:"reset_calendar"}),t&&!d&&n({type:"event_reschedule_start",event:{...o,dragId:o.id,order:b?o.order:1e3}})},oe=b?ht(d,o,a,r,i,l):wt(o,Z,Me,ke,u&&D);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:b?"events-calendar-month-item-container":"events-calendar-week-item-container","data-interactive":u,"data-active":u&&D,"data-anchorday":a.format("DD-MMM-YYYY"),"data-placeholder":ne,"data-dragactive":f.dragActive||f.eventDragActive,"data-isdragging":gt(f,o),"data-sm":r,"data-time":b&&!o.isAllDay,draggable:"true",onClick:ie=>j(ie,ne,ae,m),onContextMenu:ie=>C(ie,ae),onDragStart:it,ref:ae,style:oe,children:b?o.isAllDay?(0,M.jsx)(bt,{date:a,event:o,isCompact:r,isInOverflow:d,minMaxDatesInView:s}):(0,M.jsx)(ft,{event:o,isCompact:r}):(0,M.jsxs)("div",{className:"events-calendar-item-label","data-short":De,children:[(0,M.jsx)("span",{style:De?void 0:{width:"100%"},children:o.title}),(0,M.jsx)("span",{className:"events-calendar-time-text",children:Le(o,Z)})]})}),L&&(0,M.jsx)("div",{ref:Y.setFloating,style:{...x,zIndex:2},...X(),children:c&&c({event:o,closeContextMenu:q,onClose:y,openPopover:w})})]})}var kt=require("react-dom"),Se=require("react");var T=require("@floating-ui/react-dom"),kr=32,Et=32,Ct=16;function Dt({anchor:e}){let t={name:"preventViewportOverflow",async fn(n){let o=await(0,T.detectOverflow)(n),i=n.x;o.left>0&&(i=n.x+o.left+Et),o.right>0&&(i=n.x-o.right-Et);let d=n.y;return o.top>0&&(d=n.y+o.top+Ct),o.bottom>0&&(d=n.y-o.bottom-Ct),n.middlewareData.hide?.referenceHidden?{...n,x:i}:{...n,x:i,y:d}}},{refs:r,floatingStyles:a}=(0,T.useFloating)({elements:{reference:e},placement:"bottom",strategy:"fixed",whileElementsMounted:T.autoUpdate,middleware:[(0,T.hide)(),(0,T.offset)(8),(0,T.autoPlacement)({crossAxis:!0,padding:kr}),t]});return{refs:r,floatingStyles:a}}var Ze=require("react/jsx-runtime");function Mt({anchor:e,zIndex:t,children:r}){let a=(0,Se.useRef)({}),{refs:n,floatingStyles:o}=Dt({anchor:e});return(0,Se.useEffect)(()=>{setTimeout(()=>{a.current={transitionDuration:"250ms",transitionProperty:"all"}},100)},[]),(0,kt.createPortal)((0,Ze.jsx)("div",{ref:n.setFloating,style:{...o,...a.current,zIndex:t},children:(0,Ze.jsx)("div",{onClick:i=>i.stopPropagation(),children:r})}),document.body)}var Tt=require("react/jsx-runtime");function Oe({anchor:e,isOpen:t,zIndex:r=1,children:a}){return!t||!e?null:(0,Tt.jsx)(Mt,{anchor:e,zIndex:r,children:a})}var Pt=A(require("dayjs"));var At=require("react");var he=require("react/jsx-runtime");function Re({date:e,dispatch:t,isCompact:r,numOverflowEvents:a,state:n}){let o=(0,At.useRef)(null),i=d=>{n.overflowIsOpen&&d.target===n.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:e,anchor:o.current})};if(a)return(0,he.jsxs)("div",{className:"events-calendar-show-more-text-container","data-sm":r,"data-date":e.format("DD-MMM-YYYY"),onClick:i,onMouseDown:d=>d.stopPropagation(),ref:o,children:[(0,he.jsx)("span",{className:"events-calendar-show-more-text-label events-calendar-sm-only",children:`+${a}`}),(0,he.jsxs)("span",{className:"events-calendar-show-more-text-label events-calendar-lg-only",children:[a," more"]})]})}var ee=require("react/jsx-runtime");function St({dayRecord:e,dispatch:t,isCompact:r,numOverflowEvents:a,state:n}){let{date:o,isCurrentMonth:i}=e,d=o.isSame((0,Pt.default)(),"day");return(0,ee.jsxs)("div",{className:"events-calendar-month-cell-header",children:[(0,ee.jsx)("div",{className:"events-calendar-month-cell-date-container","data-today":d,children:(0,ee.jsx)("span",{className:"events-calendar-month-cell-date-label","data-color":d?"white":i?"dark":"dim","data-sm":r,children:o.date()})}),(0,ee.jsx)(Re,{date:o,dispatch:t,isCompact:r,numOverflowEvents:a,state:n})]})}var N=require("react/jsx-runtime"),Mr=(e,t,r=!1)=>{let{isActive:a,isAllDay:n,start:o,end:i}=e;return a&&(!r||n)&&P(t,o,i)&&(t.day()===0||t.isSame(o,"day"))};function je({EVENT_LIMIT:e,enableRescheduling:t,compact:r,dayRecord:a,dispatch:n,handleMouseEvent:o,headerHeight:i="100%",isInWeekHeader:d=!1,isInDayHeader:l=!1,minMaxDatesInView:s,onEventClick:m,onEventReschedule:v,orderedEvents:c,placeholderRef:f,renderContextMenu:h,state:p}){let{date:u}=a,b=V(c,u),g=Fe(b,u,e,l),w=b.reduce((x,X)=>x+(X.order>=e?1:0),0),E=(l||d)&&w>0;Mr(p.placeholderEvent,u,d||l)&&g.push(p.placeholderEvent);let j=()=>n({type:"open_popover"}),C=()=>n({type:"reset_calendar"}),D=x=>{o(x,u,!1,f)},L=x=>{p.eventDragActive&&ce({state:p,dispatch:n,date:u,view:"month"}),o(x,u,!1,f)},Y=x=>{p.eventDragActive&&(n({type:"event_reschedule_end",anchor:f.current}),v?.({clickedEvent:p.clickedEvent,newEvent:p.placeholderEvent,eventRef:f.current,openPopover:j,reset:C})),o(x,u,!1,f)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"events-calendar-month-cell","data-border":!l&&u.day()!==6,onMouseDown:D,onMouseEnter:L,onMouseUp:Y,style:{height:i,cursor:p.eventDragActive?"grabbing":"auto"},children:[!d&&!l&&(0,N.jsx)(St,{state:p,dispatch:n,isCompact:r,dayRecord:a,numOverflowEvents:w}),(0,N.jsx)("div",{className:"events-calendar-month-cell-content","data-week":d||l,children:E&&(0,N.jsx)(Re,{date:u,state:p,dispatch:n,isCompact:r,numOverflowEvents:w})})]}),g.map(x=>(0,N.jsx)(Q,{date:u,view:"month",state:p,event:x,compact:r,dispatch:n,onEventClick:m,isInDayHeader:l,isInWeekHeader:d,placeholderRef:f,renderContextMenu:h,minMaxDatesInView:s,enableRescheduling:t},x.id))]})}var Ke=require("react/jsx-runtime");function Ot({visible:e}){if(e)return(0,Ke.jsx)("div",{className:"events-calendar-loader-wrapper",children:(0,Ke.jsx)("span",{className:"events-calendar-loader"})})}var Rt=require("react/jsx-runtime");function te({isGroupButton:e,active:t=!1,onClick:r=()=>null,variant:a,children:n}){return(0,Rt.jsx)("button",{type:"button",onClick:r,"data-group":e,"data-active":t,"data-variant":a,className:"events-calendar-header-button",children:n})}var ge=require("react/jsx-runtime");function jt({hideViewToggle:e,views:t,setView:r,view:a,children:n}){if(t.length<1&&!n)return;let o=$.filter(i=>t.includes(i));return(0,ge.jsxs)("div",{className:"events-calendar-header-controls",children:[!e&&o.length>1&&(0,ge.jsx)("div",{className:"events-calendar-button-group",children:o.map(i=>(0,ge.jsx)(te,{isGroupButton:!0,active:a===i,onClick:()=>r(i),children:i},i))}),n]})}var Vt=A(require("dayjs"));var ye=require("react/jsx-runtime");function Nt({size:e="24",stroke:t="2"}){return(0,ye.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-left",children:[(0,ye.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,ye.jsx)("path",{d:"M15 6l-6 6l6 6"})]})}var we=require("react/jsx-runtime");function _t({size:e="24",stroke:t="2"}){return(0,we.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-right",children:[(0,we.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,we.jsx)("path",{d:"M9 6l6 6l-6 6"})]})}var _=require("react/jsx-runtime"),Tr=(e,t)=>{let r=e.startOf("week"),a=e.endOf("week");return t==="year"?e.format("YYYY"):t==="month"?e.format("MMMM YYYY"):t==="week"?`${r.format("MMM DD")} - ${a.format("MMM DD, YYYY")}`:e.format("D MMMM, YYYY")};function zt({activeDate:e,setActiveDate:t,view:r}){let a=()=>t((0,Vt.default)()),n=i=>t(d=>d.add(1,i)),o=i=>t(d=>d.subtract(1,i));return(0,_.jsxs)("div",{className:"events-calendar-nav",children:[(0,_.jsx)(te,{variant:"outline",onClick:a,children:"Today"}),(0,_.jsxs)("div",{className:"events-calendar-nav-actions",children:[(0,_.jsx)(te,{variant:"subtle",onClick:()=>o(r),children:(0,_.jsx)(Nt,{size:"1.5rem"})}),(0,_.jsx)(te,{variant:"subtle",onClick:()=>n(r),children:(0,_.jsx)(_t,{size:"1.5rem"})})]}),(0,_.jsx)("span",{className:"events-calendar-title",children:Tr(e,r)})]})}var be=require("react/jsx-runtime");function Qe({activeDate:e,onClick:t=()=>null,hideViewToggle:r,setActiveDate:a,setView:n=()=>null,views:o=[...$],view:i="month",customControls:d}){return(0,be.jsxs)("div",{className:"events-calendar-header",onClick:t,children:[(0,be.jsx)(zt,{activeDate:e,setActiveDate:a,view:i}),(0,be.jsx)(jt,{hideViewToggle:r,views:o,setView:n,view:i,children:d})]})}var rt=require("react");var et=A(require("dayjs")),Ne=require("react"),Ar=48,Pr=60,Sr=(0,et.default)().diff((0,et.default)().startOf("day"),"m"),Or=Ar/Pr;function Ht({minutesToScroll:e=Sr,offset:t=140}={}){let r=(0,Ne.useRef)(null);return(0,Ne.useEffect)(()=>{if(!r.current)return;let a=Or*e-t;r.current.scrollTo({top:a})},[e,t]),r}var It=(e,t)=>{if(t==="day")return[{date:e}];let r=e.startOf("week"),n=r.subtract(r.day(),"d"),o=[];for(let i=0;i<7;i++)o.push({date:n,isCurrentMonth:n.month()===e.month()}),n=n.add(1,"day");return o};function Bt(e,t){return e.reduce((r,a,n)=>({...r,[n]:Ge(V(t,a.date),a.date)}),{})}var _e=require("react/jsx-runtime");function Lt(){return(0,_e.jsx)("div",{className:"events-calendar-hours-column",children:Be.map(e=>(0,_e.jsx)("div",{className:"events-calendar-hour",children:(0,_e.jsx)("span",{className:"events-calendar-hour-label",children:e})},e))})}var Yt=A(require("dayjs"));var xe=require("react/jsx-runtime"),Ve=(0,Yt.default)();function $t({activeDate:e,isDayView:t}){if(!e.isSame(Ve,"day"))return;let r=t?1:Ve.day()+1,a=Ve.hour()*4+Math.round(Ve.minute()/15)+1;return(0,xe.jsxs)("div",{className:"events-calendar-time-indicator",style:{gridColumn:r,gridRow:a},children:[(0,xe.jsx)("div",{className:"events-calendar-time-indicator-dot"}),(0,xe.jsx)("div",{className:"events-calendar-time-indicator-line"})]})}var Ee=require("react/jsx-runtime"),tt=e=>Array(e).fill(0).map((t,r)=>r),Rr=(e,t,r,a,n)=>(n==="day"?e:e.startOf("week").add(t,"d")).hour(r).minute(a*15);function Wt({view:e,activeDate:t,handleMouseEvent:r,placeholderRef:a,state:n,dispatch:o,onEventReschedule:i}){let d=e==="day"?[0]:tt(7),l=tt(24),s=tt(4),m=()=>o({type:"open_popover"}),v=()=>o({type:"reset_calendar"});return(0,Ee.jsx)(Ee.Fragment,{children:d.map(c=>l.map(f=>s.map(h=>{let p=Rr(t,c,f,h,e);return(0,Ee.jsx)("div",{className:"events-calendar-time-background-cell","data-isweekview":e==="week",onMouseDown:u=>r(u,p,!0,a),onMouseEnter:u=>{n.eventDragActive&&ce({state:n,dispatch:o,date:p,view:e}),r(u,p,!0,a)},onMouseUp:u=>{n.eventDragActive&&(o({type:"event_reschedule_end",anchor:a.current}),i?.({clickedEvent:n.clickedEvent,newEvent:n.placeholderEvent,eventRef:a.current,openPopover:m,reset:v})),r(u,p,!0,a)},style:{gridColumnStart:c+1,gridRow:`${f*4+h+1} / ${f*4+h+2}`,cursor:n.eventDragActive?"grabbing":"auto"}},`${c}${f}${h}`)})))})}var Ut=A(require("dayjs")),re=require("react/jsx-runtime"),Ft=2;function Gt({view:e,enableRescheduling:t,compact:r,allDayEvents:a,dispatch:n,handleMouseEvent:o,handleStopDrag:i,minMaxDatesInView:d,onEventClick:l,onEventReschedule:s,placeholderRef:m,renderContextMenu:v,state:c,weekDatesArray:f}){let h=e==="day"?V(a,f[0].date):me(a,f[0].date),p=F(h),u=p.length>0?Math.max(...p.map(y=>y.order+1)):0,b=Math.min(u,Ft+1),g=r?20:23,w=b>0?8:0,E=g*b+w;return(0,re.jsx)("div",{className:"events-calendar-time-view-header","data-isweekview":e==="week",onMouseLeave:i,children:f.map((y,j)=>{let{date:C}=y,D=e==="week"||h.length>0;return(0,re.jsxs)("div",{className:"events-calendar-time-view-header-cell","data-border":D,children:[e==="week"&&(0,re.jsx)("div",{className:"events-calendar-time-view-header-label","data-today":C.isSame((0,Ut.default)(),"day"),onMouseEnter:i,children:`${C.format("ddd")} ${C.format("DD")}`}),(0,re.jsx)(je,{isInDayHeader:e==="day",isInWeekHeader:e==="week",EVENT_LIMIT:Ft,enableRescheduling:t,compact:r,dayRecord:y,dispatch:n,handleMouseEvent:o,headerHeight:E,minMaxDatesInView:d,onEventClick:l,onEventReschedule:s,orderedEvents:p,placeholderRef:m,renderContextMenu:v,state:c})]},j)})})}var S=require("react/jsx-runtime");function Jt({view:e,activeDate:t,compact:r,dispatch:a,enableRescheduling:n,events:o,handleMouseEvent:i,handleStopDrag:d,onEventClick:l,onEventReschedule:s,placeholderRef:m,renderContextMenu:v,state:c}){let f=e==="day",h=e==="week",p=o.filter(y=>y.isAllDay),u=o.filter(y=>!y.isAllDay),b=Ht(),g=(0,rt.useMemo)(()=>It(t,e),[t,e]),w={first:f?t:g[0].date,last:f?t:g[6].date},E=(0,rt.useMemo)(()=>Bt(g,u),[u,g]);return(0,S.jsxs)("div",{className:"events-calendar-time-view",children:[(0,S.jsx)(Gt,{allDayEvents:p,compact:r,dispatch:a,enableRescheduling:n,handleMouseEvent:i,handleStopDrag:d,minMaxDatesInView:w,onEventClick:l,onEventReschedule:s,placeholderRef:m,renderContextMenu:v,state:c,view:e,weekDatesArray:g}),(0,S.jsx)("div",{ref:b,className:"events-calendar-time-view-scroll-wrapper",children:(0,S.jsxs)("div",{className:"events-calendar-time-view-grid-wrapper",children:[(0,S.jsx)(Lt,{}),(0,S.jsxs)("div",{className:"events-calendar-time-view-grid","data-isweekview":h,onMouseEnter:d,onMouseLeave:d,children:[(0,S.jsx)(Wt,{activeDate:t,dispatch:a,handleMouseEvent:i,onEventReschedule:s,placeholderRef:m,state:c,view:e}),(0,S.jsx)($t,{activeDate:t,isDayView:f}),g.map(({date:y},j)=>{let C=E[j],{isActive:D,isAllDay:L,start:Y,end:x}=c.placeholderEvent;return D&&!L&&P(y,Y,x)&&C.push(c.placeholderEvent),C.map(q=>(0,S.jsx)(Q,{date:y,dispatch:a,enableRescheduling:n,event:q,onEventClick:l,placeholderRef:m,renderContextMenu:v,state:c,view:e},q.id))})]})]})})]})}var Xt=require("react");var Zt=require("react/jsx-runtime");function qt({date:e,handleClick:t,isToday:r,isDimmed:a,isActive:n}){let o=(0,Xt.useRef)(null);return(0,Zt.jsx)("div",{ref:o,"data-date":e.format("DD-MMM-YYYY"),className:"events-calendar-year-view-month-date","data-today":r,"data-dimmed":a,"data-active":n,onMouseDown:i=>i.stopPropagation(),onClick:i=>t(i,e,o),children:e.format("D")})}var Kt=A(require("dayjs"));function Qt(e,t){let r={},a=new Set;t.forEach(({start:o,end:i})=>{let d=o.clone().startOf("day"),l=i.clone().startOf("day");for(;d.isBefore(l,"day")||d.isSame(l,"day");)a.add(d.format("YYYY-MM-DD")),d=d.add(1,"day")});let n=e.startOf("year");return le.forEach((o,i)=>{let d=n.clone().day(0),l=Array.from({length:42},(s,m)=>{let v=d.clone().add(m,"day"),c=v.isSame((0,Kt.default)(),"day"),f=n.isSame(v,"month"),h=f&&a.has(v.format("YYYY-MM-DD"));return{date:v,isToday:c,isActive:h,isCurrentMonth:f}});r[o]=l,n=n.month(i+1)}),r}var I=require("react/jsx-runtime");function er({activeDate:e,dispatch:t,events:r,state:a}){let n=Qt(e,r),o=()=>t({type:"reset_calendar"}),i=(d,l,s)=>{a.overflowIsOpen&&d.target===a.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:l,anchor:s.current})};return(0,I.jsx)("div",{className:"events-calendar-year-view-scroll-wrapper",children:(0,I.jsx)("div",{className:"events-calendar-year-view",onMouseDown:o,children:le.map(d=>(0,I.jsxs)("div",{className:"events-calendar-year-view-month",children:[(0,I.jsx)("div",{className:"events-calendar-year-view-month-label",children:d}),(0,I.jsxs)("div",{className:"events-calendar-year-view-month-dates",children:[He.map((l,s)=>(0,I.jsx)("div",{className:"events-calendar-year-view-month-header",children:l},`${d}-${s}`)),n[d].map(({date:l,isToday:s,isCurrentMonth:m,isActive:v},c)=>(0,I.jsx)(qt,{date:l,handleClick:i,isToday:s,isActive:v,isDimmed:!m},c))]})]},d))})})}var at=require("react");var nt=require("react/jsx-runtime"),jr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function tr({isCompact:e}){return(0,nt.jsx)("div",{className:"events-calendar-month-header","data-sm":e,children:jr.map((t,r)=>(0,nt.jsx)("div",{className:"events-calendar-month-header-cell",children:t},r))})}var rr=(e,t)=>{if(e===0)return 0;let r=2,a=8,n=26,o=t?18:20;return Math.max(Math.floor((e-n-a)/(o+r)),0)};var nr=e=>{let t=e.startOf("month").day(0),r=t,a=e.add(1,"month").month(),n=[],o=[],i=1;for(;r.subtract(r.day(),"d").month()!==a;)n.push({date:r,isCurrentMonth:r.month()===e.month()}),i===7&&(o.push(n),n=[],i=0),i++,r=r.add(1,"day");return{weeks:o,first:t,last:r}};function ar(e,t){return e.reduce((r,a,n)=>({...r,[n]:F(me(t,a[0].date))}),{})}var J=require("react/jsx-runtime");function or({enableRescheduling:e,compact:t,activeDate:r,dispatch:a,events:n,handleMouseEvent:o,handleStopDrag:i,onEventClick:d,onEventReschedule:l,placeholderRef:s,renderContextMenu:m,state:v}){let c=(0,at.useMemo)(()=>nr(r),[r]),f={first:c.first,last:c.last},{ref:h,height:p}=st(),u=p/c.weeks.length,b=rr(u,t),g=(0,at.useMemo)(()=>ar(c.weeks,n),[n,c.weeks]);return(0,J.jsxs)("div",{className:"events-calendar-month-view",children:[(0,J.jsx)(tr,{isCompact:t}),(0,J.jsx)("div",{className:"events-calendar-month-view-grid",onMouseLeave:i,ref:h,children:c.weeks.map((w,E)=>{let y=p>0?g[E]:[];return(0,J.jsx)("div",{className:"events-calendar-month-view-row",children:w.map((j,C)=>(0,J.jsx)(je,{EVENT_LIMIT:b,enableRescheduling:e,compact:t,dayRecord:j,dispatch:a,handleMouseEvent:o,isInWeekHeader:!1,minMaxDatesInView:f,onEventClick:d,onEventReschedule:l,orderedEvents:y,placeholderRef:s,renderContextMenu:m,state:v},C))},E)})})]})}var ir=A(require("dayjs"));var O=require("react/jsx-runtime"),Nr=e=>e?(0,ir.default)(e):void 0;function ot({compact:e,dispatch:t,events:r,onEventClick:a,placeholderRef:n,renderContextMenu:o,state:i,enableRescheduling:d}){let l=Nr(i.overflowAnchor?.dataset.date);if(!l||!i.overflowAnchor)return(0,O.jsx)(O.Fragment,{});let s=F(V(r,l));return(0,O.jsx)(Oe,{zIndex:2,anchor:i.overflowAnchor,isOpen:i.overflowIsOpen,children:(0,O.jsxs)("div",{className:"events-calendar-overflow-card",children:[(0,O.jsx)("span",{className:"events-calendar-overflow-card-label",children:l.format("dddd, MMMM D")}),!s.length&&(0,O.jsx)("div",{className:"events-calendar-overflow-card-text",children:"No events scheduled for this date"}),(0,O.jsx)("div",{className:"events-calendar-overflow-card-content",children:s.map(m=>(0,O.jsx)(Q,{view:"month",isInOverflow:!0,enableRescheduling:d,compact:e,date:l,dispatch:t,event:m,onEventClick:a,placeholderRef:n,renderContextMenu:o,state:i},m.id))})]})})}var R=require("react/jsx-runtime");function _r({calendar:e,compact:t=!1,enableDragCreation:r=!1,enableRescheduling:a=!1,events:n=[],popoverZIndex:o=101,isFetching:i=!1,noHeader:d=!1,onEventClick:l,onEventCreate:s,onEventReschedule:m,renderPopover:v,renderContextMenu:c,views:f=[...$]}){let{activeDate:h,setActiveDate:p,view:u,setView:b,state:g,dispatch:w}=vt(e),E=(0,Ce.useMemo)(()=>We(n),[n]),y=(0,Ce.useMemo)(()=>Ye(E,h,u),[E,h,u]),C=u==="week"||u==="day"?y.filter(oe=>oe.isAllDay):y,{eventAnchor:D,dragActive:L,eventDragActive:Y,popoverIsOpen:x,clickedEvent:X,placeholderEvent:q}=g,ne=()=>w({type:"reset_calendar"}),ae=()=>{(L||Y)&&w({type:"event_create_stop"})},Z=(0,Ce.useRef)(null),De=lt({enableDragCreation:r,dispatch:w,state:g,onEventCreate:s}),ke={activeDate:h,dispatch:w,state:g,events:y},Me={...ke,compact:t,onEventClick:l,handleStopDrag:ae,placeholderRef:Z,handleMouseEvent:De,onEventReschedule:m,renderContextMenu:c,enableRescheduling:a};return(0,R.jsxs)("div",{className:"events-calendar-wrapper",children:[d?null:(0,R.jsx)(Qe,{view:u,setActiveDate:p,setView:b,activeDate:h,views:f}),(0,R.jsxs)("div",{className:"events-calendar","data-withheader":!d,onClick:oe=>oe.stopPropagation(),children:[(0,R.jsx)(Ot,{visible:i}),(()=>{switch(u){case"year":return(0,R.jsx)(er,{...ke});case"month":return(0,R.jsx)(or,{...Me});case"week":case"day":return(0,R.jsx)(Jt,{...Me,view:u});default:return null}})(),v&&D&&(0,R.jsx)(Oe,{isOpen:x,anchor:D,zIndex:o,children:v({onClose:ne,clickedEvent:X,newEvent:q})}),(0,R.jsx)(ot,{state:g,compact:t,dispatch:w,events:C,onEventClick:l,placeholderRef:Z,renderContextMenu:c,enableRescheduling:a})]})]})}0&&(module.exports={CALENDAR_VIEWS,DAYS_IN_FULL_MONTH,DAY_LABELS_SHORT,DEFAULT_COLOR,EventsCalendar,HOURS,Header,MONTHS,arrangeWeekEvents,arrangeWeekdayEvents,createDayjsObjFromTime,filterByDate,filterByView,filterByWeek,getBackgroundFromGroups,getPlaceholderEvent,getTimeDiff,getTimeLabel,getVisibleEvents,hasOverlap,isBetween,parseRawEvents,returnValidStartEnd,setTime,updateEvent,useEventsCalendar});
//# sourceMappingURL=index.js.map