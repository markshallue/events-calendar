"use strict";"use client";var Pr=Object.create;var Ne=Object.defineProperty;var Rr=Object.getOwnPropertyDescriptor;var Or=Object.getOwnPropertyNames;var jr=Object.getPrototypeOf,Nr=Object.prototype.hasOwnProperty;var Vr=(e,t)=>{for(var r in t)Ne(e,r,{get:t[r],enumerable:!0})},Dt=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Or(t))!Nr.call(e,o)&&o!==r&&Ne(e,o,{get:()=>t[o],enumerable:!(a=Rr(t,o))||a.enumerable});return e};var S=(e,t,r)=>(r=e!=null?Pr(jr(e)):{},Dt(t||!e||!e.__esModule?Ne(r,"default",{value:e,enumerable:!0}):r,e)),Ir=e=>Dt(Ne({},"__esModule",{value:!0}),e);var Eo={};Vr(Eo,{CALENDAR_VIEWS:()=>F,DAYS_IN_FULL_MONTH:()=>et,DAY_LABELS_SHORT:()=>Qe,DEFAULT_COLOR:()=>fe,EventsCalendar:()=>Co,HOURS:()=>tt,Header:()=>vt,MONTHS:()=>pe,arrangeWeekEvents:()=>G,arrangeWeekdayEvents:()=>dt,createDayjsObjFromTime:()=>Wr,filterByDate:()=>_,filterByView:()=>ot,filterByWeek:()=>he,getBackgroundFromGroups:()=>J,getPlaceholderEvent:()=>ye,getTimeDiff:()=>W,getTimeLabel:()=>rt,getVisibleEvents:()=>it,hasOverlap:()=>U,isBetween:()=>P,parseRawEvents:()=>nt,returnValidStartEnd:()=>ge,setTime:()=>me,updateEvent:()=>ue,useEventsCalendar:()=>mt});module.exports=Ir(Eo);var Pe=require("react");var Ke={};var Lt=require("react");var ce={};function me(e,t){return e.hour(t.hour()).minute(t.minute())}var F=["year","month","week","day"],pe=["January","February","March","April","May","June","July","August","September","October","November","December"],Qe=["S","M","T","W","T","F","S"],et=42,fe="#0ea5e9",tt=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"];function P(e,t,r,a=!1){return e.isAfter(t)&&e.isBefore(r)||e.isSame(t,"d")||(a?!1:e.isSame(r,"d"))}function U(e,t,r,a){return P(e,r,a)||P(r,e,t)||P(a,e,t)}function ue({state:e,dispatch:t,date:r,view:a}){let o=a==="month"?"day":"minute";if(e.dragStartOffset===null){let c=r.diff(e.clickedEvent.start,o);t({type:"update_event",dragStartOffset:c});return}let{start:n,end:i,startTime:s,endTime:d}=e.clickedEvent,l=r.subtract(e.dragStartOffset,o),p=i.diff(n,o),f=l.add(p,o);a!=="month"&&!l.isSame(f,"day")||t({type:"update_event",event:{...e.placeholderEvent,start:a==="month"?l.hour(n.hour()).minute(n.minute()):l,end:a==="month"?f.hour(i.hour()).minute(i.minute()):f,startTime:a==="month"?s:l.format("h:mma"),endTime:a==="month"?d:f.format("h:mma")}})}function W(e,t){let r=e.hour()*60+e.minute();return t.hour()*60+t.minute()-r}function rt(e,t){if(!e.start||!e.end)return"";let r=t<=30?", ":"";return e.start.isBefore(e.end)?`${r}${e.start.format("h:mma")} - ${e.end.format("h:mma")}`:`${r}${e.end.format("h:mma")} - ${e.start.format("h:mma")}`}function he(e,t){let r=t.add(6,"d");return e.filter(({start:a,end:o})=>U(t,r,a,o||a))}function _(e,t){return e.filter(({start:r,end:a})=>P(t,r,a))}function ot(e,t,r){let a=r==="year"?"year":"month",o=t.startOf(a).day(0),n=t.endOf(a).day(6);return e.filter(({start:i,end:s})=>U(o,n,i,s))}var ve=S(require("dayjs")),at=(e,t)=>{let r=t.replace(/.{2}$/," $&").toUpperCase();return(0,ve.default)(`${e.format("DD-MMM-YYYY")} ${r}`)};function nt(e){return e.filter(t=>t.start||t.end).map((t,r)=>{let a=t.start?(0,ve.default)(t.start):(0,ve.default)(t.end);t.startTime&&(a=at(a,t.startTime));let o=t.end?(0,ve.default)(t.end):a;return(t.startTime||t.endTime||t.isAllDay===!1)&&(!t.startTime&&!t.endTime?o=a.add(1,"hour"):t.endTime?o=at(o,t.endTime):o=at(o,t.startTime).add(1,"hour")),{...t,id:t.id??r,title:t.title??"",start:a,end:o,isAllDay:t.isAllDay!==!1}})}function it(e,t,r,a){return e.filter(({order:o,start:n})=>o<r&&(a||t.day()===0||t.isSame(n,"day")))}function zr(e){return[...e].sort((r,a)=>{let o=r.end.diff(r.start,"day")+1,n=a.end.diff(a.start,"day")+1;return o>n?-1:o<n?1:r.start.isBefore(a.start,"day")?-1:a.start.isBefore(r.start,"day")?1:r.isAllDay&&!a.isAllDay?-1:!r.isAllDay&&a.isAllDay?1:0})}function Hr(e){let t=0;for(;e.has(t);)t++;return t}function G(e){if(e.length<2)return e.map(n=>({...n,order:0,indent:0}));let t=zr(e),[r,...a]=t,o=[{...r,order:0,indent:0}];return a.forEach(n=>{let i=n.start,s=n.end||i,d=new Set;for(let p of o){let f=p.start,c=p.end||f;U(i,s,f,c)&&d.add(p.order)}let l=Hr(d);o.push({...n,order:l,indent:0})}),o}var st=S(require("dayjs")),L={id:null,dragId:null,title:"Untitled",groups:[],start:(0,st.default)(),end:(0,st.default)(),startTime:void 0,endTime:void 0,isActive:!1,isAllDay:!0,indent:0,order:0};function ge(e,t){return t?e.isSame(t)||e.isBefore(t)?[e,t]:[t,e]:[e,e]}var ye=(e,t,r,a)=>{let[o,n]=ge(e,t),i=a&&r?o.add(15,"minute"):n;return{...L,id:null,start:o,end:i,isActive:!0,isAllDay:!r,startTime:r?o.format("h:mma"):void 0,endTime:r?i.format("h:mma"):void 0,order:r?100:0}};function Br(e){return e.length<2?e:e.sort((t,r)=>{let a=W(t.start,r.start);return a>0?-1:a<0?1:0})}function Yr(e,t,r){return e.isSame(t)||e.isAfter(t)&&e.isBefore(r)}function dt(e,t){if(e.length<2)return e.map(i=>({...i,order:0,indent:0}));let r=Br(e),[a,...o]=r,n=[{...a,order:0,indent:0}];return o.forEach((i,s)=>{let d=me(t,i.start),l=0;n.forEach(p=>{let f=me(t,p.start),c=me(t,p.end);Yr(d,f,c)&&(l+=1)}),n.push({...i,order:s+1,indent:l})}),n}var lt=S(require("dayjs")),Wr=(e,t,r="01-Jan-2000",a="01-Jan-2000")=>{let o=e?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",n=t?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",i=(0,lt.default)(`${r} ${o}`),s=(0,lt.default)(`${a} ${n}`);return{start:i,end:s}};function J(e){let t=e?.map(o=>o.color).filter(Boolean)??[];if(!t.length)return{backgroundColor:fe};if(t.length===1)return{backgroundColor:t[0]};let r=100/t.length;return{backgroundImage:`-webkit-linear-gradient(-30deg,${t.map((o,n)=>`${o} ${r*n}% ${r*n+r}%`).join(", ")})`}}var $r=({isTimeEvent:e,firstClickDate:t,start:r,date:a,dispatch:o})=>{if(e){let n=W(t,a)<0?ge(r,t.add(15,"minute"))[1]:t,i=r.hour(a.hour()).minute(a.minute());if(Math.abs(W(n,a))>=15){let s=ye(n,i,!0);o({type:"update_event",event:s})}}else{let n=ye(t,a);o({type:"update_event",event:n})}},kt=({enableDragCreation:e,dispatch:t,state:r,onEventCreate:a})=>{if(!e)return s=>{s.type==="mousedown"&&t({type:"reset_calendar"})};let o=()=>t({type:"open_popover"}),n=()=>t({type:"reset_calendar"});return(s,d,l,p)=>{let{dragActive:f,firstClickDate:c,placeholderEvent:u}=r,{start:g}=u;if(s.button!==0){f&&t({type:"event_create_stop"});return}switch(s.type){case"mousedown":{if(r.eventAnchor||r.overflowIsOpen){t({type:"reset_calendar"});return}let m=ye(d,d,l,!0);t({type:"event_create_start",date:d,event:m,anchor:p.current});break}case"mouseenter":{if(s.buttons!==1||!f||!c)return;$r({isTimeEvent:l,firstClickDate:c,start:g,date:d,dispatch:t});break}case"mouseup":{if(!f)return;a&&a({clickedEvent:r.clickedEvent,newEvent:r.placeholderEvent,eventRef:p.current,openPopover:o,reset:n}),t({type:"event_create_end",anchor:p.current})}}}};var z=require("react"),Fr={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Ur(e){let t=(0,z.useRef)(0),r=(0,z.useRef)(null),[a,o]=(0,z.useState)(Fr),n=(0,z.useMemo)(()=>typeof window<"u"?new ResizeObserver(i=>{let s=i[0];s&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{r.current&&o(s.contentRect)}))}):null,[]);return(0,z.useEffect)(()=>(r.current&&n?.observe(r.current,e),()=>{n?.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[r.current]),[r,a]}function Mt(e){let[t,{width:r,height:a}]=Ur(e);return{ref:t,width:r,height:a}}var Tt=require("react"),k=require("@floating-ui/react");function At({dispatch:e,event:t,isInOverflow:r,hasContextMenu:a,state:o}){let[n,i]=(0,Tt.useState)(!1),s=()=>i(!1),d=t.id!==null&&o.clickedEvent?.id===t.id,{refs:l,floatingStyles:p,context:f}=(0,k.useFloating)({open:n,onOpenChange:i,middleware:[(0,k.offset)({mainAxis:5,alignmentAxis:4}),(0,k.flip)({fallbackPlacements:["left-start"]}),(0,k.shift)({padding:10})],placement:"right-start"}),c=(0,k.useDismiss)(f),{getFloatingProps:u}=(0,k.useInteractions)([c]);return{handleContextMenu:(m,h)=>{a&&(m.preventDefault(),!(o.popoverIsOpen||o.overflowIsOpen&&!r)&&(l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m.clientX,y:m.clientY,top:m.clientY,right:m.clientX,bottom:m.clientY,left:m.clientX}}}),e({type:"open_context_menu",event:t,anchor:h.current}),i(!0)))},isActive:d,contextIsOpen:n,refs:l,floatingStyles:p,getFloatingProps:u,closeContextMenu:s}}var ct=S(require("dayjs")),X=require("react");var be={clickedEvent:L,popoverIsOpen:!1,eventAnchor:null,dragActive:!1,firstClickDate:null,placeholderEvent:L,dragStartOffset:null,eventDragActive:!1,overflowAnchor:null,overflowIsOpen:!1};function St(e,t){switch(t.type){case"reset_calendar":return be;case"open_overflow":return{...e,...be,overflowIsOpen:!0,overflowAnchor:t.anchor||e.overflowAnchor};case"open_popover":return{...e,popoverIsOpen:!0};case"open_context_menu":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor};case"set_clicked_event":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor,placeholderEvent:L};case"update_event":return{...e,dragStartOffset:t.dragStartOffset??e.dragStartOffset,placeholderEvent:{...e.placeholderEvent,...t.event,id:null}};case"event_create_start":return{...e,dragActive:!0,firstClickDate:t.date||e.firstClickDate,placeholderEvent:{...e.placeholderEvent,...t.event,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_end":return{...e,dragActive:!1,firstClickDate:null,placeholderEvent:{...e.placeholderEvent,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_stop":return{...e,dragActive:!1,firstClickDate:null,clickedEvent:L,placeholderEvent:L,eventDragActive:!1};case"event_reschedule_start":return{...e,eventDragActive:!0,clickedEvent:t.event||e.clickedEvent,placeholderEvent:{...e.placeholderEvent,order:0,...t.event,id:null,isActive:!0}};case"event_reschedule_end":return{...e,eventDragActive:!1,dragStartOffset:null,eventAnchor:t.anchor||e.eventAnchor};default:return console.log(`Invalid action type ${t.type} passed to calendar reducer`),e}}function mt({isInitialised:e=!1,initialDate:t=(0,ct.default)(),initialView:r="month",closeOnClickOutside:a=!0}={}){let[o,n]=(0,X.useState)((0,ct.default)(t)),[i,s]=(0,X.useState)(r),[d,l]=(0,X.useReducer)(St,be);return(0,X.useEffect)(()=>{if(!a||e)return;let p=()=>l({type:"reset_calendar"});return window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[l,e,a]),{activeDate:o,setActiveDate:n,view:i,setView:s,state:d,dispatch:l}}function Pt(e){let r=mt({isInitialised:!!e});return e||r}var we={};var ee=require("react/jsx-runtime");function Rt({event:e,isCompact:t}){let{title:r,start:a,groups:o}=e,n=J(o),s={border:`1px solid ${(o?.map(d=>d.color).filter(Boolean)??[])[0]??fe}`};return(0,ee.jsxs)("div",{className:`${we.timeContainer}`,"data-sm":t,style:s,children:[(0,ee.jsx)("div",{className:`${we.timeDot}`,style:n}),(0,ee.jsx)("div",{className:`${we.timeText}`,children:a.format("h:mma")}),(0,ee.jsx)("span",{className:`${we.timeLabel}`,children:r})]})}var Ve={};var Ot=e=>{switch(e){case"both":return"polygon(10px 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 10px 100%, 0% 50%)";case"left":return"polygon(10px 0%, 100% 0%, 100% 100%, 10px 100%, 0% 50%)";case"right":return"polygon(0% 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 0% 100%)";case"none":return;default:return}};var jt=(e,t,r,a,o,n)=>{if(e)return{width:"100%"};let i=t.start.isSame(r,"w")?t.start.day():0,s=t.end.isSame(r,"w")?t.end.day():6;return{position:"absolute",left:n?"0.125rem":`calc(${i*100/7}% + 0.125rem)`,top:`calc(${n?4:a?24:26}px + ${t.order*(a?21:22)}px + ${o?6:0}px)`,width:n?"calc(100% - 6px)":`calc(${100*(1+(s-i))/7}% - 0.25rem - 1px)`}};function Nt(e,t){return!t.isActive&&t.id===e.placeholderEvent.dragId}var Vt=(e,t,r,a,o)=>{let n=e?r.isBefore(t,"day"):!!o?.first&&r.isBefore(o.first,"day"),i=e?a.isAfter(t,"day"):!!o?.last&&a.isAfter(o.last,"day");return n&&i?"both":n?"left":i?"right":"none"};var It=(e,t,r,a,o)=>{let n=r===0?6:0;return{gridColumnStart:r+1,gridRowStart:e.start&&e.start.hour()*4+Math.round(e.start.minute()/15)+1,gridRowEnd:e.end&&e.end.hour()*4+Math.round(e.end.minute()/15)+1,height:12*((t||60)/15)-2,borderWidth:e.indent>0?t>30?"1px":"0.5px":0,marginLeft:a*e.indent+n,width:`calc(100% - ${a*(e.indent+1)+n}px)`,zIndex:o?100:1+e.order,...J(e.groups)}};var Ie=require("react/jsx-runtime");function _t({date:e,event:t,minMaxDatesInView:r,isCompact:a,isInOverflow:o}){let n=Vt(o,e,t.start,t.end,r),i=Ot(n),s=J(t.groups);return(0,Ie.jsx)("div",{className:Ve.container,style:{...s,clipPath:i},children:(0,Ie.jsx)("div",{className:Ve.content,"data-sm":a,children:(0,Ie.jsx)("span",{className:Ve.text,"data-arrows":n,children:t.title})})})}var M=require("react/jsx-runtime");function te({view:e,enableRescheduling:t,compact:r=!1,date:a,dispatch:o,event:n,isInWeekHeader:i=!1,isInOverflow:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,placeholderRef:f,renderContextMenu:c,state:u}){let g=(0,Lt.useRef)(null),m=!!c,h=!!p||t,v=e==="month",b=e==="day",w=()=>o({type:"open_popover"}),x=()=>o({type:"reset_calendar"}),y=()=>o({type:"reset_calendar"}),E=(I,Tr,je,Ar)=>{if(I.stopPropagation(),Tr||!je.current)return;let Ze=A&&u.eventAnchor?.dataset.anchorday===je.current.dataset.anchorday;!s&&u.overflowIsOpen&&o({type:"reset_calendar"}),Ze||o({type:"set_clicked_event",event:n,anchor:je.current});let Sr=()=>Ze?x():w();Ar?.({event:n,isDoubleClick:Ze,eventRef:je.current,openPopover:w,closePopover:x,togglePopover:Sr})},{handleContextMenu:D,isActive:A,contextIsOpen:Y,refs:$,floatingStyles:C,getFloatingProps:K,closeContextMenu:Q}=At({dispatch:o,event:n,state:u,hasContextMenu:m,isInOverflow:s}),ie=n.id===null,se=ie&&n.start.isSame(a,"d")?f:g,de=Math.abs(W(n.start,n.end)),le=de<=30,Xe=b?120:20,Re=b?0:a.day(),Oe=()=>{o({type:"reset_calendar"}),t&&!s&&o({type:"event_reschedule_start",event:{...n,dragId:n.id,order:v?n.order:1e3}})},qe=v?jt(s,n,a,r,i,d):It(n,de,Re,Xe,h&&A);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:v?ce.monthItemContainer:ce.weekItemContainer,"data-interactive":h,"data-active":h&&A,"data-anchorday":a.format("DD-MMM-YYYY"),"data-placeholder":ie,"data-dragactive":u.dragActive||u.eventDragActive,"data-isdragging":Nt(u,n),"data-sm":r,"data-time":v&&!n.isAllDay,draggable:"true",onClick:I=>E(I,ie,se,p),onContextMenu:I=>D(I,se),onDragStart:Oe,ref:se,style:qe,children:v?n.isAllDay?(0,M.jsx)(_t,{date:a,event:n,isCompact:r,isInOverflow:s,minMaxDatesInView:l}):(0,M.jsx)(Rt,{event:n,isCompact:r}):(0,M.jsxs)("div",{className:ce.itemLabelWrapper,"data-short":le,children:[(0,M.jsx)("span",{style:le?void 0:{width:"100%"},children:n.title}),(0,M.jsx)("span",{className:ce.timeText,children:rt(n,de)})]})}),Y&&(0,M.jsx)("div",{ref:$.setFloating,style:{...C,zIndex:2},...K(),children:c&&c({event:n,closeContextMenu:Q,onClose:y,openPopover:w})})]})}var Yt=require("react-dom"),_e=require("react");var T=require("@floating-ui/react-dom"),Xr=32,zt=32,Ht=16;function Bt({anchor:e}){let t={name:"preventViewportOverflow",async fn(o){let n=await(0,T.detectOverflow)(o),i=o.x;n.left>0&&(i=o.x+n.left+zt),n.right>0&&(i=o.x-n.right-zt);let s=o.y;return n.top>0&&(s=o.y+n.top+Ht),n.bottom>0&&(s=o.y-n.bottom-Ht),o.middlewareData.hide?.referenceHidden?{...o,x:i}:{...o,x:i,y:s}}},{refs:r,floatingStyles:a}=(0,T.useFloating)({elements:{reference:e},placement:"bottom",strategy:"fixed",whileElementsMounted:T.autoUpdate,middleware:[(0,T.hide)(),(0,T.offset)(8),(0,T.autoPlacement)({crossAxis:!0,padding:Xr}),t]});return{refs:r,floatingStyles:a}}var pt=require("react/jsx-runtime");function Wt({anchor:e,zIndex:t,colorScheme:r,children:a}){let o=(0,_e.useRef)({}),{refs:n,floatingStyles:i}=Bt({anchor:e});return(0,_e.useEffect)(()=>{setTimeout(()=>{o.current={transitionDuration:"250ms",transitionProperty:"all"}},100)},[]),(0,Yt.createPortal)((0,pt.jsx)("div",{ref:n.setFloating,style:{...i,...o.current,zIndex:t},"data-ec-color-scheme":r,children:(0,pt.jsx)("div",{onClick:s=>s.stopPropagation(),children:a})}),document.body)}var $t=require("react/jsx-runtime");function Le({anchor:e,colorScheme:t,isOpen:r,zIndex:a=1,children:o}){return!r||!e?null:(0,$t.jsx)(Wt,{anchor:e,zIndex:a,colorScheme:t,children:o})}var ft={};var Ut=S(require("dayjs"));var ze={};var Ft=require("react");var re={};var xe=require("react/jsx-runtime");function He({date:e,dispatch:t,isCompact:r,numOverflowEvents:a,state:o}){let n=(0,Ft.useRef)(null),i=s=>{o.overflowIsOpen&&s.target===o.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:e,anchor:n.current})};if(a)return(0,xe.jsxs)("div",{className:re.container,"data-sm":r,"data-date":e.format("DD-MMM-YYYY"),onClick:i,onMouseDown:s=>s.stopPropagation(),ref:n,children:[(0,xe.jsx)("span",{className:`${re.label} ${re.smOnly}`,children:`+${a}`}),(0,xe.jsxs)("span",{className:`${re.label} ${re.lgOnly}`,children:[a," more"]})]})}var oe=require("react/jsx-runtime");function Gt({dayRecord:e,dispatch:t,isCompact:r,numOverflowEvents:a,state:o}){let{date:n,isCurrentMonth:i}=e,s=n.isSame((0,Ut.default)(),"day"),d=s?"white":i?"dark":"dim";return(0,oe.jsxs)("div",{className:ze.cellHeader,children:[(0,oe.jsx)("div",{className:ze.dateContainer,"data-today":s,children:(0,oe.jsx)("span",{className:ze.dateLabel,"data-color":d,"data-sm":r,children:n.date()})}),(0,oe.jsx)(He,{date:n,dispatch:t,isCompact:r,numOverflowEvents:a,state:o})]})}var N=require("react/jsx-runtime"),Qr=(e,t,r=!1)=>{let{isActive:a,isAllDay:o,start:n,end:i}=e;return a&&(!r||o)&&P(t,n,i)&&(t.day()===0||t.isSame(n,"day"))};function Be({EVENT_LIMIT:e,enableRescheduling:t,compact:r,dayRecord:a,dispatch:o,handleMouseEvent:n,headerHeight:i="100%",isInWeekHeader:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,onEventReschedule:f,orderedEvents:c,placeholderRef:u,renderContextMenu:g,state:m}){let{date:h}=a,v=_(c,h),b=it(v,h,e,d),w=v.reduce((C,K)=>C+(K.order>=e?1:0),0),x=(d||s)&&w>0;Qr(m.placeholderEvent,h,s||d)&&b.push(m.placeholderEvent);let E=()=>o({type:"open_popover"}),D=()=>o({type:"reset_calendar"}),A=C=>{n(C,h,!1,u)},Y=C=>{m.eventDragActive&&ue({state:m,dispatch:o,date:h,view:"month"}),n(C,h,!1,u)},$=C=>{m.eventDragActive&&(o({type:"event_reschedule_end",anchor:u.current}),f?.({clickedEvent:m.clickedEvent,newEvent:m.placeholderEvent,eventRef:u.current,openPopover:E,reset:D})),n(C,h,!1,u)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:ft.cell,"data-border":!d&&h.day()!==6,onMouseDown:A,onMouseEnter:Y,onMouseUp:$,style:{height:i,cursor:m.eventDragActive?"grabbing":"auto"},children:[!s&&!d&&(0,N.jsx)(Gt,{state:m,dispatch:o,isCompact:r,dayRecord:a,numOverflowEvents:w}),(0,N.jsx)("div",{className:ft.cellContent,"data-week":s||d,children:x&&(0,N.jsx)(He,{date:h,state:m,dispatch:o,isCompact:r,numOverflowEvents:w})})]}),b.map(C=>(0,N.jsx)(te,{date:h,view:"month",state:m,event:C,compact:r,dispatch:o,onEventClick:p,isInDayHeader:d,isInWeekHeader:s,placeholderRef:u,renderContextMenu:g,minMaxDatesInView:l,enableRescheduling:t},C.id))]})}var ut={};var ht=require("react/jsx-runtime");function Jt({visible:e}){if(e)return(0,ht.jsx)("div",{className:ut.loaderWrapper,children:(0,ht.jsx)("span",{className:ut.loader})})}var H={};var Xt={};var qt=require("react/jsx-runtime");function ae({isGroupButton:e,active:t=!1,onClick:r=()=>null,variant:a,children:o}){return(0,qt.jsx)("button",{type:"button",onClick:r,"data-group":e,"data-active":t,"data-variant":a,className:Xt.button,children:o})}var Ce=require("react/jsx-runtime");function Zt({hideViewToggle:e,views:t,setView:r,view:a,children:o}){if(t.length<1&&!o)return;let n=F.filter(i=>t.includes(i));return(0,Ce.jsxs)("div",{className:H.controls,children:[!e&&n.length>1&&(0,Ce.jsx)("div",{className:H.buttonGroup,children:n.map(i=>(0,Ce.jsx)(ae,{isGroupButton:!0,active:a===i,onClick:()=>r(i),children:i},i))}),o]})}var er=S(require("dayjs"));var Ee=require("react/jsx-runtime");function Kt({size:e="24",stroke:t="2"}){return(0,Ee.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-left",children:[(0,Ee.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,Ee.jsx)("path",{d:"M15 6l-6 6l6 6"})]})}var De=require("react/jsx-runtime");function Qt({size:e="24",stroke:t="2"}){return(0,De.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-right",children:[(0,De.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,De.jsx)("path",{d:"M9 6l6 6l-6 6"})]})}var V=require("react/jsx-runtime"),oo=(e,t)=>{let r=e.startOf("week"),a=e.endOf("week");return t==="year"?e.format("YYYY"):t==="month"?e.format("MMMM YYYY"):t==="week"?`${r.format("MMM DD")} - ${a.format("MMM DD, YYYY")}`:e.format("D MMMM, YYYY")};function tr({activeDate:e,setActiveDate:t,view:r}){let a=()=>t((0,er.default)()),o=i=>t(s=>s.add(1,i)),n=i=>t(s=>s.subtract(1,i));return(0,V.jsxs)("div",{className:H.navigation,children:[(0,V.jsx)(ae,{variant:"outline",onClick:a,children:"Today"}),(0,V.jsxs)("div",{className:H.actions,children:[(0,V.jsx)(ae,{variant:"subtle",onClick:()=>n(r),children:(0,V.jsx)(Kt,{size:"1.5rem"})}),(0,V.jsx)(ae,{variant:"subtle",onClick:()=>o(r),children:(0,V.jsx)(Qt,{size:"1.5rem"})})]}),(0,V.jsx)("span",{className:H.date,children:oo(e,r)})]})}var ke=require("react/jsx-runtime");function vt({activeDate:e,onClick:t=()=>null,hideViewToggle:r,setActiveDate:a,setView:o=()=>null,views:n=[...F],view:i="month",customControls:s}){return(0,ke.jsxs)("div",{className:H.header,onClick:t,children:[(0,ke.jsx)(tr,{activeDate:e,setActiveDate:a,view:i}),(0,ke.jsx)(Zt,{hideViewToggle:r,views:n,setView:o,view:i,children:s})]})}var bt=require("react");var Me={};var gt=S(require("dayjs")),Ye=require("react"),no=48,io=60,so=(0,gt.default)().diff((0,gt.default)().startOf("day"),"m"),lo=no/io;function rr({minutesToScroll:e=so,offset:t=140}={}){let r=(0,Ye.useRef)(null);return(0,Ye.useEffect)(()=>{if(!r.current)return;let a=lo*e-t;r.current.scrollTo({top:a})},[e,t]),r}var or=(e,t)=>{if(t==="day")return[{date:e}];let r=e.startOf("week"),o=r.subtract(r.day(),"d"),n=[];for(let i=0;i<7;i++)n.push({date:o,isCurrentMonth:o.month()===e.month()}),o=o.add(1,"day");return n};function ar(e,t){return e.reduce((r,a,o)=>({...r,[o]:dt(_(t,a.date),a.date)}),{})}var We={};var $e=require("react/jsx-runtime");function nr(){return(0,$e.jsx)("div",{className:We.hoursColumn,children:tt.map(e=>(0,$e.jsx)("div",{className:We.hour,children:(0,$e.jsx)("span",{className:We.hourLabel,children:e})},e))})}var ir=S(require("dayjs"));var Fe={};var Te=require("react/jsx-runtime"),Ue=(0,ir.default)();function sr({activeDate:e,isDayView:t}){if(!e.isSame(Ue,"day"))return;let r=t?1:Ue.day()+1,a=Ue.hour()*4+Math.round(Ue.minute()/15)+1;return(0,Te.jsxs)("div",{className:Fe.wrapper,style:{gridColumn:r,gridRow:a},children:[(0,Te.jsx)("div",{className:Fe.dot}),(0,Te.jsx)("div",{className:Fe.line})]})}var dr={};var Ae=require("react/jsx-runtime"),yt=e=>Array(e).fill(0).map((t,r)=>r),fo=(e,t,r,a,o)=>(o==="day"?e:e.startOf("week").add(t,"d")).hour(r).minute(a*15);function lr({view:e,activeDate:t,handleMouseEvent:r,placeholderRef:a,state:o,dispatch:n,onEventReschedule:i}){let s=e==="day"?[0]:yt(7),d=yt(24),l=yt(4),p=()=>n({type:"open_popover"}),f=()=>n({type:"reset_calendar"});return(0,Ae.jsx)(Ae.Fragment,{children:s.map(c=>d.map(u=>l.map(g=>{let m=fo(t,c,u,g,e);return(0,Ae.jsx)("div",{className:dr.gridCell,"data-isweekview":e==="week",onMouseDown:h=>r(h,m,!0,a),onMouseEnter:h=>{o.eventDragActive&&ue({state:o,dispatch:n,date:m,view:e}),r(h,m,!0,a)},onMouseUp:h=>{o.eventDragActive&&(n({type:"event_reschedule_end",anchor:a.current}),i?.({clickedEvent:o.clickedEvent,newEvent:o.placeholderEvent,eventRef:a.current,openPopover:p,reset:f})),r(h,m,!0,a)},style:{gridColumnStart:c+1,gridRow:`${u*4+g+1} / ${u*4+g+2}`,cursor:o.eventDragActive?"grabbing":"auto"}},`${c}${u}${g}`)})))})}var Ge={};var mr=S(require("dayjs")),ne=require("react/jsx-runtime"),cr=2;function pr({view:e,enableRescheduling:t,compact:r,allDayEvents:a,dispatch:o,handleMouseEvent:n,handleStopDrag:i,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,weekDatesArray:u}){let g=e==="day"?_(a,u[0].date):he(a,u[0].date),m=G(g),h=m.length>0?Math.max(...m.map(y=>y.order+1)):0,v=Math.min(h,cr+1),b=r?20:23,w=v>0?8:0,x=b*v+w;return(0,ne.jsx)("div",{className:Ge.headerRow,"data-isweekview":e==="week",onMouseLeave:i,children:u.map((y,E)=>{let{date:D}=y,A=e==="week"||g.length>0;return(0,ne.jsxs)("div",{className:Ge.headerCell,"data-border":A,children:[e==="week"&&(0,ne.jsx)("div",{className:Ge.headerLabel,"data-today":D.isSame((0,mr.default)(),"day"),onMouseEnter:i,children:`${D.format("ddd")} ${D.format("DD")}`}),(0,ne.jsx)(Be,{isInDayHeader:e==="day",isInWeekHeader:e==="week",EVENT_LIMIT:cr,enableRescheduling:t,compact:r,dayRecord:y,dispatch:o,handleMouseEvent:n,headerHeight:x,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,orderedEvents:m,placeholderRef:p,renderContextMenu:f,state:c})]},E)})})}var R=require("react/jsx-runtime");function fr({view:e,activeDate:t,compact:r,dispatch:a,enableRescheduling:o,events:n,handleMouseEvent:i,handleStopDrag:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c}){let u=e==="day",g=e==="week",m=n.filter(y=>y.isAllDay),h=n.filter(y=>!y.isAllDay),v=rr(),b=(0,bt.useMemo)(()=>or(t,e),[t,e]),w={first:u?t:b[0].date,last:u?t:b[6].date},x=(0,bt.useMemo)(()=>ar(b,h),[h,b]);return(0,R.jsxs)("div",{className:Me.timeView,children:[(0,R.jsx)(pr,{allDayEvents:m,compact:r,dispatch:a,enableRescheduling:o,handleMouseEvent:i,handleStopDrag:s,minMaxDatesInView:w,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,view:e,weekDatesArray:b}),(0,R.jsx)("div",{ref:v,className:Me.scrollWrapper,children:(0,R.jsxs)("div",{className:Me.gridWrapper,children:[(0,R.jsx)(nr,{}),(0,R.jsxs)("div",{className:Me.grid,"data-isweekview":g,onMouseEnter:s,onMouseLeave:s,children:[(0,R.jsx)(lr,{activeDate:t,dispatch:a,handleMouseEvent:i,onEventReschedule:l,placeholderRef:p,state:c,view:e}),(0,R.jsx)(sr,{activeDate:t,isDayView:u}),b.map(({date:y},E)=>{let D=x[E],{isActive:A,isAllDay:Y,start:$,end:C}=c.placeholderEvent;return A&&!Y&&P(y,$,C)&&D.push(c.placeholderEvent),D.map(Q=>(0,R.jsx)(te,{date:y,dispatch:a,enableRescheduling:o,event:Q,onEventClick:d,placeholderRef:p,renderContextMenu:f,state:c,view:e},Q.id))})]})]})})]})}var q={};var hr=require("react");var ur={};var gr=require("react/jsx-runtime");function vr({date:e,handleClick:t,isToday:r,isDimmed:a,isActive:o}){let n=(0,hr.useRef)(null);return(0,gr.jsx)("div",{ref:n,"data-date":e.format("DD-MMM-YYYY"),className:ur.date,"data-today":r,"data-dimmed":a,"data-active":o,onMouseDown:i=>i.stopPropagation(),onClick:i=>t(i,e,n),children:e.format("D")})}var yr=S(require("dayjs"));function br(e,t){let r={},a=new Set;t.forEach(({start:n,end:i})=>{let s=n.clone().startOf("day"),d=i.clone().startOf("day");for(;s.isBefore(d,"day")||s.isSame(d,"day");)a.add(s.format("YYYY-MM-DD")),s=s.add(1,"day")});let o=e.startOf("year");return pe.forEach((n,i)=>{let s=o.clone().day(0),d=Array.from({length:42},(l,p)=>{let f=s.clone().add(p,"day"),c=f.isSame((0,yr.default)(),"day"),u=o.isSame(f,"month"),g=u&&a.has(f.format("YYYY-MM-DD"));return{date:f,isToday:c,isActive:g,isCurrentMonth:u}});r[n]=d,o=o.month(i+1)}),r}var B=require("react/jsx-runtime");function wr({activeDate:e,dispatch:t,events:r,state:a}){let o=br(e,r),n=()=>t({type:"reset_calendar"}),i=(s,d,l)=>{a.overflowIsOpen&&s.target===a.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:d,anchor:l.current})};return(0,B.jsx)("div",{className:q.scrollWrapper,children:(0,B.jsx)("div",{className:q.yearView,onMouseDown:n,children:pe.map(s=>(0,B.jsxs)("div",{className:q.month,children:[(0,B.jsx)("div",{className:q.monthLabel,children:s}),(0,B.jsxs)("div",{className:q.monthDates,children:[Qe.map((d,l)=>(0,B.jsx)("div",{className:q.monthHeaderDay,children:d},`${s}-${l}`)),o[s].map(({date:d,isToday:l,isCurrentMonth:p,isActive:f},c)=>(0,B.jsx)(vr,{date:d,handleClick:i,isToday:l,isActive:f,isDimmed:!p},c))]})]},s))})})}var Ct=require("react");var Je={};var wt={};var xt=require("react/jsx-runtime"),bo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function xr({isCompact:e}){return(0,xt.jsx)("div",{className:wt.monthHeader,"data-sm":e,children:bo.map((t,r)=>(0,xt.jsx)("div",{className:wt.headerCell,children:t},r))})}var Cr=(e,t)=>{if(e===0)return 0;let r=2,a=8,o=26,n=t?18:20;return Math.max(Math.floor((e-o-a)/(n+r)),0)};var Er=e=>{let t=e.startOf("month").day(0),r=t,a=e.add(1,"month").month(),o=[],n=[],i=1;for(;r.subtract(r.day(),"d").month()!==a;)o.push({date:r,isCurrentMonth:r.month()===e.month()}),i===7&&(n.push(o),o=[],i=0),i++,r=r.add(1,"day");return{weeks:n,first:t,last:r}};function Dr(e,t){return e.reduce((r,a,o)=>({...r,[o]:G(he(t,a[0].date))}),{})}var Z=require("react/jsx-runtime");function kr({enableRescheduling:e,compact:t,activeDate:r,dispatch:a,events:o,handleMouseEvent:n,handleStopDrag:i,onEventClick:s,onEventReschedule:d,placeholderRef:l,renderContextMenu:p,state:f}){let c=(0,Ct.useMemo)(()=>Er(r),[r]),u={first:c.first,last:c.last},{ref:g,height:m}=Mt(),h=m/c.weeks.length,v=Cr(h,t),b=(0,Ct.useMemo)(()=>Dr(c.weeks,o),[o,c.weeks]);return(0,Z.jsxs)("div",{className:Je.monthView,children:[(0,Z.jsx)(xr,{isCompact:t}),(0,Z.jsx)("div",{className:Je.grid,onMouseLeave:i,ref:g,children:c.weeks.map((w,x)=>{let y=m>0?b[x]:[];return(0,Z.jsx)("div",{className:Je.row,children:w.map((E,D)=>(0,Z.jsx)(Be,{EVENT_LIMIT:v,enableRescheduling:e,compact:t,dayRecord:E,dispatch:a,handleMouseEvent:n,isInWeekHeader:!1,minMaxDatesInView:u,onEventClick:s,onEventReschedule:d,orderedEvents:y,placeholderRef:l,renderContextMenu:p,state:f},D))},x)})})]})}var Mr=S(require("dayjs"));var Se={};var O=require("react/jsx-runtime"),xo=e=>e?(0,Mr.default)(e):void 0;function Et({compact:e,dispatch:t,events:r,colorScheme:a,onEventClick:o,placeholderRef:n,renderContextMenu:i,state:s,enableRescheduling:d}){let l=xo(s.overflowAnchor?.dataset.date);if(!l||!s.overflowAnchor)return(0,O.jsx)(O.Fragment,{});let p=G(_(r,l));return(0,O.jsx)(Le,{zIndex:2,anchor:s.overflowAnchor,isOpen:s.overflowIsOpen,colorScheme:a,children:(0,O.jsxs)("div",{className:Se.overflowCard,children:[(0,O.jsx)("span",{className:Se.label,children:l.format("dddd, MMMM D")}),!p.length&&(0,O.jsx)("div",{className:Se.empty,children:"No events scheduled for this date"}),(0,O.jsx)("div",{className:Se.eventsWrapper,children:p.map(f=>(0,O.jsx)(te,{view:"month",isInOverflow:!0,enableRescheduling:d,compact:e,date:l,dispatch:t,event:f,onEventClick:o,placeholderRef:n,renderContextMenu:i,state:s},f.id))})]})})}var j=require("react/jsx-runtime");function Co({calendar:e,compact:t=!1,colorScheme:r="light",enableDragCreation:a=!1,enableRescheduling:o=!1,events:n=[],popoverZIndex:i=101,isFetching:s=!1,noHeader:d=!1,onEventClick:l,onEventCreate:p,onEventReschedule:f,renderPopover:c,renderContextMenu:u,views:g=[...F]}){let{activeDate:m,setActiveDate:h,view:v,setView:b,state:w,dispatch:x}=Pt(e),y=(0,Pe.useMemo)(()=>nt(n),[n]),E=(0,Pe.useMemo)(()=>ot(y,m,v),[y,m,v]),A=v==="week"||v==="day"?E.filter(I=>I.isAllDay):E,{eventAnchor:Y,dragActive:$,eventDragActive:C,popoverIsOpen:K,clickedEvent:Q,placeholderEvent:ie}=w,se=()=>x({type:"reset_calendar"}),de=()=>{($||C)&&x({type:"event_create_stop"})},le=(0,Pe.useRef)(null),Xe=kt({enableDragCreation:a,dispatch:x,state:w,onEventCreate:p}),Re={activeDate:m,dispatch:x,state:w,events:E},Oe={...Re,compact:t,onEventClick:l,handleStopDrag:de,placeholderRef:le,handleMouseEvent:Xe,onEventReschedule:f,renderContextMenu:u,enableRescheduling:o},qe=()=>{switch(v){case"year":return(0,j.jsx)(wr,{...Re});case"month":return(0,j.jsx)(kr,{...Oe});case"week":case"day":return(0,j.jsx)(fr,{...Oe,view:v});default:return null}};return(0,j.jsxs)("div",{className:Ke.root,"data-ec-color-scheme":r,children:[d?null:(0,j.jsx)(vt,{view:v,setActiveDate:h,setView:b,activeDate:m,views:g}),(0,j.jsxs)("div",{className:Ke.calendar,"data-withheader":!d,onClick:I=>I.stopPropagation(),children:[(0,j.jsx)(Jt,{visible:s}),qe(),c&&Y&&(0,j.jsx)(Le,{isOpen:K,anchor:Y,zIndex:i,colorScheme:r,children:c({onClose:se,clickedEvent:Q,newEvent:ie})}),(0,j.jsx)(Et,{state:w,compact:t,dispatch:x,events:A,colorScheme:r,onEventClick:l,placeholderRef:le,renderContextMenu:u,enableRescheduling:o})]})]})}0&&(module.exports={CALENDAR_VIEWS,DAYS_IN_FULL_MONTH,DAY_LABELS_SHORT,DEFAULT_COLOR,EventsCalendar,HOURS,Header,MONTHS,arrangeWeekEvents,arrangeWeekdayEvents,createDayjsObjFromTime,filterByDate,filterByView,filterByWeek,getBackgroundFromGroups,getPlaceholderEvent,getTimeDiff,getTimeLabel,getVisibleEvents,hasOverlap,isBetween,parseRawEvents,returnValidStartEnd,setTime,updateEvent,useEventsCalendar});
//# sourceMappingURL=index.js.map