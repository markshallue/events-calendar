"use client";import{useMemo as cr,useRef as Xo}from"react";var Oe={};import{useRef as Lr}from"react";var Q={};function de(e,t){return e.hour(t.hour()).minute(t.minute())}var H=["year","month","week","day"],le=["January","February","March","April","May","June","July","August","September","October","November","December"],We=["S","M","T","W","T","F","S"],Fe=42,ce="#0ea5e9",Ue=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"];function T(e,t,r,n=!1){return e.isAfter(t)&&e.isBefore(r)||e.isSame(t,"d")||(n?!1:e.isSame(r,"d"))}function L(e,t,r,n){return T(e,r,n)||T(r,e,t)||T(n,e,t)}function me({state:e,dispatch:t,date:r,view:n}){let o=n==="month"?"day":"minute";if(e.dragStartOffset===null){let c=r.diff(e.clickedEvent.start,o);t({type:"update_event",dragStartOffset:c});return}let{start:a,end:i,startTime:s,endTime:d}=e.clickedEvent,l=r.subtract(e.dragStartOffset,o),p=i.diff(a,o),f=l.add(p,o);n!=="month"&&!l.isSame(f,"day")||t({type:"update_event",event:{...e.placeholderEvent,start:n==="month"?l.hour(a.hour()).minute(a.minute()):l,end:n==="month"?f.hour(i.hour()).minute(i.minute()):f,startTime:n==="month"?s:l.format("h:mma"),endTime:n==="month"?d:f.format("h:mma")}})}function j(e,t){let r=e.hour()*60+e.minute();return t.hour()*60+t.minute()-r}function Ge(e,t){if(!e.start||!e.end)return"";let r=t<=30?", ":"";return e.start.isBefore(e.end)?`${r}${e.start.format("h:mma")} - ${e.end.format("h:mma")}`:`${r}${e.end.format("h:mma")} - ${e.start.format("h:mma")}`}function pe(e,t){let r=t.add(6,"d");return e.filter(({start:n,end:o})=>L(t,r,n,o||n))}function O(e,t){return e.filter(({start:r,end:n})=>T(t,r,n))}function Je(e,t,r){let n=r==="year"?"year":"month",o=t.startOf(n).day(0),a=t.endOf(n).day(6);return e.filter(({start:i,end:s})=>L(o,a,i,s))}import fe from"dayjs";var Re=(e,t)=>{let r=t.replace(/.{2}$/," $&").toUpperCase();return fe(`${e.format("DD-MMM-YYYY")} ${r}`)};function Xe(e){return e.filter(t=>t.start||t.end).map((t,r)=>{let n=t.start?fe(t.start):fe(t.end);t.startTime&&(n=Re(n,t.startTime));let o=t.end?fe(t.end):n;return(t.startTime||t.endTime||t.isAllDay===!1)&&(!t.startTime&&!t.endTime?o=n.add(1,"hour"):t.endTime?o=Re(o,t.endTime):o=Re(o,t.startTime).add(1,"hour")),{...t,id:t.id??r,title:t.title??"",start:n,end:o,isAllDay:t.isAllDay!==!1}})}function qe(e,t,r,n){return e.filter(({order:o,start:a})=>o<r&&(n||t.day()===0||t.isSame(a,"day")))}function gr(e){return[...e].sort((r,n)=>{let o=r.end.diff(r.start,"day")+1,a=n.end.diff(n.start,"day")+1;return o>a?-1:o<a?1:r.start.isBefore(n.start,"day")?-1:n.start.isBefore(r.start,"day")?1:r.isAllDay&&!n.isAllDay?-1:!r.isAllDay&&n.isAllDay?1:0})}function yr(e){let t=0;for(;e.has(t);)t++;return t}function B(e){if(e.length<2)return e.map(a=>({...a,order:0,indent:0}));let t=gr(e),[r,...n]=t,o=[{...r,order:0,indent:0}];return n.forEach(a=>{let i=a.start,s=a.end||i,d=new Set;for(let p of o){let f=p.start,c=p.end||f;L(i,s,f,c)&&d.add(p.order)}let l=yr(d);o.push({...a,order:l,indent:0})}),o}import Ze from"dayjs";var A={id:null,dragId:null,title:"Untitled",groups:[],start:Ze(),end:Ze(),startTime:void 0,endTime:void 0,isActive:!1,isAllDay:!0,indent:0,order:0};function ue(e,t){return t?e.isSame(t)||e.isBefore(t)?[e,t]:[t,e]:[e,e]}var ve=(e,t,r,n)=>{let[o,a]=ue(e,t),i=n&&r?o.add(15,"minute"):a;return{...A,id:null,start:o,end:i,isActive:!0,isAllDay:!r,startTime:r?o.format("h:mma"):void 0,endTime:r?i.format("h:mma"):void 0,order:r?100:0}};function Cr(e){return e.length<2?e:e.sort((t,r)=>{let n=j(t.start,r.start);return n>0?-1:n<0?1:0})}function Er(e,t,r){return e.isSame(t)||e.isAfter(t)&&e.isBefore(r)}function Ke(e,t){if(e.length<2)return e.map(i=>({...i,order:0,indent:0}));let r=Cr(e),[n,...o]=r,a=[{...n,order:0,indent:0}];return o.forEach((i,s)=>{let d=de(t,i.start),l=0;a.forEach(p=>{let f=de(t,p.start),c=de(t,p.end);Er(d,f,c)&&(l+=1)}),a.push({...i,order:s+1,indent:l})}),a}import Qe from"dayjs";var On=(e,t,r="01-Jan-2000",n="01-Jan-2000")=>{let o=e?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",a=t?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",i=Qe(`${r} ${o}`),s=Qe(`${n} ${a}`);return{start:i,end:s}};function Y(e){let t=e?.map(o=>o.color).filter(Boolean)??[];if(!t.length)return{backgroundColor:ce};if(t.length===1)return{backgroundColor:t[0]};let r=100/t.length;return{backgroundImage:`-webkit-linear-gradient(-30deg,${t.map((o,a)=>`${o} ${r*a}% ${r*a+r}%`).join(", ")})`}}var wr=({isTimeEvent:e,firstClickDate:t,start:r,date:n,dispatch:o})=>{if(e){let a=j(t,n)<0?ue(r,t.add(15,"minute"))[1]:t,i=r.hour(n.hour()).minute(n.minute());if(Math.abs(j(a,n))>=15){let s=ve(a,i,!0);o({type:"update_event",event:s})}}else{let a=ve(t,n);o({type:"update_event",event:a})}},et=({enableDragCreation:e,dispatch:t,state:r,onEventCreate:n})=>{if(!e)return s=>{s.type==="mousedown"&&t({type:"reset_calendar"})};let o=()=>t({type:"open_popover"}),a=()=>t({type:"reset_calendar"});return(s,d,l,p)=>{let{dragActive:f,firstClickDate:c,placeholderEvent:u}=r,{start:g}=u;if(s.button!==0){f&&t({type:"event_create_stop"});return}switch(s.type){case"mousedown":{if(r.eventAnchor||r.overflowIsOpen){t({type:"reset_calendar"});return}let m=ve(d,d,l,!0);t({type:"event_create_start",date:d,event:m,anchor:p.current});break}case"mouseenter":{if(s.buttons!==1||!f||!c)return;wr({isTimeEvent:l,firstClickDate:c,start:g,date:d,dispatch:t});break}case"mouseup":{if(!f)return;n&&n({clickedEvent:r.clickedEvent,newEvent:r.placeholderEvent,eventRef:p.current,openPopover:o,reset:a}),t({type:"event_create_end",anchor:p.current})}}}};import{useEffect as br,useMemo as Dr,useRef as tt,useState as xr}from"react";var Mr={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Tr(e){let t=tt(0),r=tt(null),[n,o]=xr(Mr),a=Dr(()=>typeof window<"u"?new ResizeObserver(i=>{let s=i[0];s&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{r.current&&o(s.contentRect)}))}):null,[]);return br(()=>(r.current&&a?.observe(r.current,e),()=>{a?.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[r.current]),[r,n]}function rt(e){let[t,{width:r,height:n}]=Tr(e);return{ref:t,width:r,height:n}}import{useState as kr}from"react";import{useFloating as Ar,flip as Sr,offset as Pr,shift as Or,useDismiss as Rr,useInteractions as jr}from"@floating-ui/react";function ot({dispatch:e,event:t,isInOverflow:r,hasContextMenu:n,state:o}){let[a,i]=kr(!1),s=()=>i(!1),d=t.id!==null&&o.clickedEvent?.id===t.id,{refs:l,floatingStyles:p,context:f}=Ar({open:a,onOpenChange:i,middleware:[Pr({mainAxis:5,alignmentAxis:4}),Sr({fallbackPlacements:["left-start"]}),Or({padding:10})],placement:"right-start"}),c=Rr(f),{getFloatingProps:u}=jr([c]);return{handleContextMenu:(m,v)=>{n&&(m.preventDefault(),!(o.popoverIsOpen||o.overflowIsOpen&&!r)&&(l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m.clientX,y:m.clientY,top:m.clientY,right:m.clientX,bottom:m.clientY,left:m.clientX}}}),e({type:"open_context_menu",event:t,anchor:v.current}),i(!0)))},isActive:d,contextIsOpen:a,refs:l,floatingStyles:p,getFloatingProps:u,closeContextMenu:s}}import at from"dayjs";import{useEffect as Nr,useReducer as Vr,useState as it}from"react";var ee={clickedEvent:A,popoverIsOpen:!1,eventAnchor:null,dragActive:!1,firstClickDate:null,placeholderEvent:A,dragStartOffset:null,eventDragActive:!1,overflowAnchor:null,overflowIsOpen:!1};function nt(e,t){switch(t.type){case"reset_calendar":return ee;case"open_overflow":return{...e,...ee,overflowIsOpen:!0,overflowAnchor:t.anchor||e.overflowAnchor};case"open_popover":return{...e,popoverIsOpen:!0};case"open_context_menu":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor};case"set_clicked_event":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor,placeholderEvent:A};case"update_event":return{...e,dragStartOffset:t.dragStartOffset??e.dragStartOffset,placeholderEvent:{...e.placeholderEvent,...t.event,id:null}};case"event_create_start":return{...e,dragActive:!0,firstClickDate:t.date||e.firstClickDate,placeholderEvent:{...e.placeholderEvent,...t.event,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_end":return{...e,dragActive:!1,firstClickDate:null,placeholderEvent:{...e.placeholderEvent,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_stop":return{...e,dragActive:!1,firstClickDate:null,clickedEvent:A,placeholderEvent:A,eventDragActive:!1};case"event_reschedule_start":return{...e,eventDragActive:!0,clickedEvent:t.event||e.clickedEvent,placeholderEvent:{...e.placeholderEvent,order:0,...t.event,id:null,isActive:!0}};case"event_reschedule_end":return{...e,eventDragActive:!1,dragStartOffset:null,eventAnchor:t.anchor||e.eventAnchor};default:return console.log(`Invalid action type ${t.type} passed to calendar reducer`),e}}function st({isInitialised:e=!1,initialDate:t=at(),initialView:r="month",closeOnClickOutside:n=!0}={}){let[o,a]=it(at(t)),[i,s]=it(r),[d,l]=Vr(nt,ee);return Nr(()=>{if(!n||e)return;let p=()=>l({type:"reset_calendar"});return window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[l,e,n]),{activeDate:o,setActiveDate:a,view:i,setView:s,state:d,dispatch:l}}function dt(e){let r=st({isInitialised:!!e});return e||r}var te={};import{jsx as je,jsxs as Ir}from"react/jsx-runtime";function lt({event:e,isCompact:t}){let{title:r,start:n,groups:o}=e,a=Y(o),s={border:`1px solid ${(o?.map(d=>d.color).filter(Boolean)??[])[0]??ce}`};return Ir("div",{className:`${te.timeContainer}`,"data-sm":t,style:s,children:[je("div",{className:`${te.timeDot}`,style:a}),je("div",{className:`${te.timeText}`,children:n.format("h:mma")}),je("span",{className:`${te.timeLabel}`,children:r})]})}var he={};var ct=e=>{switch(e){case"both":return"polygon(10px 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 10px 100%, 0% 50%)";case"left":return"polygon(10px 0%, 100% 0%, 100% 100%, 10px 100%, 0% 50%)";case"right":return"polygon(0% 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 0% 100%)";case"none":return;default:return}};var mt=(e,t,r,n,o,a)=>{if(e)return{width:"100%"};let i=t.start.isSame(r,"w")?t.start.day():0,s=t.end.isSame(r,"w")?t.end.day():6;return{position:"absolute",left:a?"0.125rem":`calc(${i*100/7}% + 0.125rem)`,top:`calc(${a?4:n?24:26}px + ${t.order*(n?21:22)}px + ${o?6:0}px)`,width:a?"calc(100% - 6px)":`calc(${100*(1+(s-i))/7}% - 0.25rem - 1px)`}};function pt(e,t){return!t.isActive&&t.id===e.placeholderEvent.dragId}var ft=(e,t,r,n,o)=>{let a=e?r.isBefore(t,"day"):!!o?.first&&r.isBefore(o.first,"day"),i=e?n.isAfter(t,"day"):!!o?.last&&n.isAfter(o.last,"day");return a&&i?"both":a?"left":i?"right":"none"};var ut=(e,t,r,n,o)=>{let a=r===0?6:0;return{gridColumnStart:r+1,gridRowStart:e.start&&e.start.hour()*4+Math.round(e.start.minute()/15)+1,gridRowEnd:e.end&&e.end.hour()*4+Math.round(e.end.minute()/15)+1,height:12*((t||60)/15)-2,borderWidth:e.indent>0?t>30?"1px":"0.5px":0,marginLeft:n*e.indent+a,width:`calc(100% - ${n*(e.indent+1)+a}px)`,zIndex:o?100:1+e.order,...Y(e.groups)}};import{jsx as Ne}from"react/jsx-runtime";function vt({date:e,event:t,minMaxDatesInView:r,isCompact:n,isInOverflow:o}){let a=ft(o,e,t.start,t.end,r),i=ct(a),s=Y(t.groups);return Ne("div",{className:he.container,style:{...s,clipPath:i},children:Ne("div",{className:he.content,"data-sm":n,children:Ne("span",{className:he.text,"data-arrows":a,children:t.title})})})}import{Fragment as Br,jsx as z,jsxs as ht}from"react/jsx-runtime";function $({view:e,enableRescheduling:t,compact:r=!1,date:n,dispatch:o,event:a,isInWeekHeader:i=!1,isInOverflow:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,placeholderRef:f,renderContextMenu:c,state:u}){let g=Lr(null),m=!!c,v=!!p||t,h=e==="month",C=e==="day",E=()=>o({type:"open_popover"}),w=()=>o({type:"reset_calendar"}),y=()=>o({type:"reset_calendar"}),D=(k,pr,se,fr)=>{if(k.stopPropagation(),pr||!se.current)return;let Pe=M&&u.eventAnchor?.dataset.anchorday===se.current.dataset.anchorday;!s&&u.overflowIsOpen&&o({type:"reset_calendar"}),Pe||o({type:"set_clicked_event",event:a,anchor:se.current});let ur=()=>Pe?w():E();fr?.({event:a,isDoubleClick:Pe,eventRef:se.current,openPopover:E,closePopover:w,togglePopover:ur})},{handleContextMenu:x,isActive:M,contextIsOpen:P,refs:R,floatingStyles:b,getFloatingProps:_,closeContextMenu:I}=ot({dispatch:o,event:a,state:u,hasContextMenu:m,isInOverflow:s}),X=a.id===null,q=X&&a.start.isSame(n,"d")?f:g,Z=Math.abs(j(a.start,a.end)),K=Z<=30,Ae=C?120:20,ae=C?0:n.day(),ie=()=>{o({type:"reset_calendar"}),t&&!s&&o({type:"event_reschedule_start",event:{...a,dragId:a.id,order:h?a.order:1e3}})},Se=h?mt(s,a,n,r,i,d):ut(a,Z,ae,Ae,v&&M);return ht(Br,{children:[z("div",{className:h?Q.monthItemContainer:Q.weekItemContainer,"data-interactive":v,"data-active":v&&M,"data-anchorday":n.format("DD-MMM-YYYY"),"data-placeholder":X,"data-dragactive":u.dragActive||u.eventDragActive,"data-isdragging":pt(u,a),"data-sm":r,"data-time":h&&!a.isAllDay,draggable:"true",onClick:k=>D(k,X,q,p),onContextMenu:k=>x(k,q),onDragStart:ie,ref:q,style:Se,children:h?a.isAllDay?z(vt,{date:n,event:a,isCompact:r,isInOverflow:s,minMaxDatesInView:l}):z(lt,{event:a,isCompact:r}):ht("div",{className:Q.itemLabelWrapper,"data-short":K,children:[z("span",{style:K?void 0:{width:"100%"},children:a.title}),z("span",{className:Q.timeText,children:Ge(a,Z)})]})}),P&&z("div",{ref:R.setFloating,style:{...b,zIndex:2},..._(),children:c&&c({event:a,closeContextMenu:I,onClose:y,openPopover:E})})]})}import{createPortal as Jr}from"react-dom";import{useEffect as Xr,useRef as qr}from"react";import{useFloating as Yr,autoPlacement as zr,offset as $r,detectOverflow as Wr,autoUpdate as Fr,hide as Ur}from"@floating-ui/react-dom";var Gr=32,gt=32,yt=16;function Ct({anchor:e}){let t={name:"preventViewportOverflow",async fn(o){let a=await Wr(o),i=o.x;a.left>0&&(i=o.x+a.left+gt),a.right>0&&(i=o.x-a.right-gt);let s=o.y;return a.top>0&&(s=o.y+a.top+yt),a.bottom>0&&(s=o.y-a.bottom-yt),o.middlewareData.hide?.referenceHidden?{...o,x:i}:{...o,x:i,y:s}}},{refs:r,floatingStyles:n}=Yr({elements:{reference:e},placement:"bottom",strategy:"fixed",whileElementsMounted:Fr,middleware:[Ur(),$r(8),zr({crossAxis:!0,padding:Gr}),t]});return{refs:r,floatingStyles:n}}import{jsx as Et}from"react/jsx-runtime";function wt({anchor:e,zIndex:t,colorScheme:r,children:n}){let o=qr({}),{refs:a,floatingStyles:i}=Ct({anchor:e});return Xr(()=>{setTimeout(()=>{o.current={transitionDuration:"250ms",transitionProperty:"all"}},100)},[]),Jr(Et("div",{ref:a.setFloating,style:{...i,...o.current,zIndex:t},"data-ec-color-scheme":r,children:Et("div",{onClick:s=>s.stopPropagation(),children:n})}),document.body)}import{jsx as Zr}from"react/jsx-runtime";function ge({anchor:e,colorScheme:t,isOpen:r,zIndex:n=1,children:o}){return!r||!e?null:Zr(wt,{anchor:e,zIndex:n,colorScheme:t,children:o})}var Ve={};import oo from"dayjs";var ye={};import{useRef as to}from"react";var W={};import{jsx as ro,jsxs as bt}from"react/jsx-runtime";function Ce({date:e,dispatch:t,isCompact:r,numOverflowEvents:n,state:o}){let a=to(null),i=s=>{o.overflowIsOpen&&s.target===o.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:e,anchor:a.current})};if(n)return bt("div",{className:W.container,"data-sm":r,"data-date":e.format("DD-MMM-YYYY"),onClick:i,onMouseDown:s=>s.stopPropagation(),ref:a,children:[ro("span",{className:`${W.label} ${W.smOnly}`,children:`+${n}`}),bt("span",{className:`${W.label} ${W.lgOnly}`,children:[n," more"]})]})}import{jsx as _e,jsxs as no}from"react/jsx-runtime";function Dt({dayRecord:e,dispatch:t,isCompact:r,numOverflowEvents:n,state:o}){let{date:a,isCurrentMonth:i}=e,s=a.isSame(oo(),"day"),d=s?"white":i?"dark":"dim";return no("div",{className:ye.cellHeader,children:[_e("div",{className:ye.dateContainer,"data-today":s,children:_e("span",{className:ye.dateLabel,"data-color":d,"data-sm":r,children:a.date()})}),_e(Ce,{date:a,dispatch:t,isCompact:r,numOverflowEvents:n,state:o})]})}import{Fragment as io,jsx as Ee,jsxs as xt}from"react/jsx-runtime";var ao=(e,t,r=!1)=>{let{isActive:n,isAllDay:o,start:a,end:i}=e;return n&&(!r||o)&&T(t,a,i)&&(t.day()===0||t.isSame(a,"day"))};function we({EVENT_LIMIT:e,enableRescheduling:t,compact:r,dayRecord:n,dispatch:o,handleMouseEvent:a,headerHeight:i="100%",isInWeekHeader:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,onEventReschedule:f,orderedEvents:c,placeholderRef:u,renderContextMenu:g,state:m}){let{date:v}=n,h=O(c,v),C=qe(h,v,e,d),E=h.reduce((b,_)=>b+(_.order>=e?1:0),0),w=(d||s)&&E>0;ao(m.placeholderEvent,v,s||d)&&C.push(m.placeholderEvent);let D=()=>o({type:"open_popover"}),x=()=>o({type:"reset_calendar"}),M=b=>{a(b,v,!1,u)},P=b=>{m.eventDragActive&&me({state:m,dispatch:o,date:v,view:"month"}),a(b,v,!1,u)},R=b=>{m.eventDragActive&&(o({type:"event_reschedule_end",anchor:u.current}),f?.({clickedEvent:m.clickedEvent,newEvent:m.placeholderEvent,eventRef:u.current,openPopover:D,reset:x})),a(b,v,!1,u)};return xt(io,{children:[xt("div",{className:Ve.cell,"data-border":!d&&v.day()!==6,onMouseDown:M,onMouseEnter:P,onMouseUp:R,style:{height:i,cursor:m.eventDragActive?"grabbing":"auto"},children:[!s&&!d&&Ee(Dt,{state:m,dispatch:o,isCompact:r,dayRecord:n,numOverflowEvents:E}),Ee("div",{className:Ve.cellContent,"data-week":s||d,children:w&&Ee(Ce,{date:v,state:m,dispatch:o,isCompact:r,numOverflowEvents:E})})]}),C.map(b=>Ee($,{date:v,view:"month",state:m,event:b,compact:r,dispatch:o,onEventClick:p,isInDayHeader:d,isInWeekHeader:s,placeholderRef:u,renderContextMenu:g,minMaxDatesInView:l,enableRescheduling:t},b.id))]})}var Ie={};import{jsx as Mt}from"react/jsx-runtime";function Tt({visible:e}){if(e)return Mt("div",{className:Ie.loaderWrapper,children:Mt("span",{className:Ie.loader})})}var S={};var kt={};import{jsx as mo}from"react/jsx-runtime";function F({isGroupButton:e,active:t=!1,onClick:r=()=>null,variant:n,children:o}){return mo("button",{type:"button",onClick:r,"data-group":e,"data-active":t,"data-variant":n,className:kt.button,children:o})}import{jsx as At,jsxs as po}from"react/jsx-runtime";function St({hideViewToggle:e,views:t,setView:r,view:n,children:o}){if(t.length<1&&!o)return;let a=H.filter(i=>t.includes(i));return po("div",{className:S.controls,children:[!e&&a.length>1&&At("div",{className:S.buttonGroup,children:a.map(i=>At(F,{isGroupButton:!0,active:n===i,onClick:()=>r(i),children:i},i))}),o]})}import vo from"dayjs";import{jsx as Pt,jsxs as fo}from"react/jsx-runtime";function Ot({size:e="24",stroke:t="2"}){return fo("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-left",children:[Pt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Pt("path",{d:"M15 6l-6 6l6 6"})]})}import{jsx as Rt,jsxs as uo}from"react/jsx-runtime";function jt({size:e="24",stroke:t="2"}){return uo("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-right",children:[Rt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Rt("path",{d:"M9 6l6 6l-6 6"})]})}import{jsx as U,jsxs as Nt}from"react/jsx-runtime";var ho=(e,t)=>{let r=e.startOf("week"),n=e.endOf("week");return t==="year"?e.format("YYYY"):t==="month"?e.format("MMMM YYYY"):t==="week"?`${r.format("MMM DD")} - ${n.format("MMM DD, YYYY")}`:e.format("D MMMM, YYYY")};function Vt({activeDate:e,setActiveDate:t,view:r}){let n=()=>t(vo()),o=i=>t(s=>s.add(1,i)),a=i=>t(s=>s.subtract(1,i));return Nt("div",{className:S.navigation,children:[U(F,{variant:"outline",onClick:n,children:"Today"}),Nt("div",{className:S.actions,children:[U(F,{variant:"subtle",onClick:()=>a(r),children:U(Ot,{size:"1.5rem"})}),U(F,{variant:"subtle",onClick:()=>o(r),children:U(jt,{size:"1.5rem"})})]}),U("span",{className:S.date,children:ho(e,r)})]})}import{jsx as _t,jsxs as go}from"react/jsx-runtime";function It({activeDate:e,onClick:t=()=>null,hideViewToggle:r,setActiveDate:n,setView:o=()=>null,views:a=[...H],view:i="month",customControls:s}){return go("div",{className:S.header,onClick:t,children:[_t(Vt,{activeDate:e,setActiveDate:n,view:i}),_t(St,{hideViewToggle:r,views:a,setView:o,view:i,children:s})]})}import{useMemo as qt}from"react";var re={};import Ht from"dayjs";import{useEffect as Co,useRef as Eo}from"react";var wo=48,bo=60,Do=Ht().diff(Ht().startOf("day"),"m"),xo=wo/bo;function Lt({minutesToScroll:e=Do,offset:t=140}={}){let r=Eo(null);return Co(()=>{if(!r.current)return;let n=xo*e-t;r.current.scrollTo({top:n})},[e,t]),r}var Bt=(e,t)=>{if(t==="day")return[{date:e}];let r=e.startOf("week"),o=r.subtract(r.day(),"d"),a=[];for(let i=0;i<7;i++)a.push({date:o,isCurrentMonth:o.month()===e.month()}),o=o.add(1,"day");return a};function Yt(e,t){return e.reduce((r,n,o)=>({...r,[o]:Ke(O(t,n.date),n.date)}),{})}var be={};import{jsx as He}from"react/jsx-runtime";function zt(){return He("div",{className:be.hoursColumn,children:Ue.map(e=>He("div",{className:be.hour,children:He("span",{className:be.hourLabel,children:e})},e))})}import ko from"dayjs";var De={};import{jsx as $t,jsxs as Ao}from"react/jsx-runtime";var xe=ko();function Wt({activeDate:e,isDayView:t}){if(!e.isSame(xe,"day"))return;let r=t?1:xe.day()+1,n=xe.hour()*4+Math.round(xe.minute()/15)+1;return Ao("div",{className:De.wrapper,style:{gridColumn:r,gridRow:n},children:[$t("div",{className:De.dot}),$t("div",{className:De.line})]})}var Ft={};import{Fragment as Oo,jsx as Ut}from"react/jsx-runtime";var Le=e=>Array(e).fill(0).map((t,r)=>r),Po=(e,t,r,n,o)=>(o==="day"?e:e.startOf("week").add(t,"d")).hour(r).minute(n*15);function Gt({view:e,activeDate:t,handleMouseEvent:r,placeholderRef:n,state:o,dispatch:a,onEventReschedule:i}){let s=e==="day"?[0]:Le(7),d=Le(24),l=Le(4),p=()=>a({type:"open_popover"}),f=()=>a({type:"reset_calendar"});return Ut(Oo,{children:s.map(c=>d.map(u=>l.map(g=>{let m=Po(t,c,u,g,e);return Ut("div",{className:Ft.gridCell,"data-isweekview":e==="week",onMouseDown:v=>r(v,m,!0,n),onMouseEnter:v=>{o.eventDragActive&&me({state:o,dispatch:a,date:m,view:e}),r(v,m,!0,n)},onMouseUp:v=>{o.eventDragActive&&(a({type:"event_reschedule_end",anchor:n.current}),i?.({clickedEvent:o.clickedEvent,newEvent:o.placeholderEvent,eventRef:n.current,openPopover:p,reset:f})),r(v,m,!0,n)},style:{gridColumnStart:c+1,gridRow:`${u*4+g+1} / ${u*4+g+2}`,cursor:o.eventDragActive?"grabbing":"auto"}},`${c}${u}${g}`)})))})}var Me={};import jo from"dayjs";import{jsx as Be,jsxs as No}from"react/jsx-runtime";var Jt=2;function Xt({view:e,enableRescheduling:t,compact:r,allDayEvents:n,dispatch:o,handleMouseEvent:a,handleStopDrag:i,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,weekDatesArray:u}){let g=e==="day"?O(n,u[0].date):pe(n,u[0].date),m=B(g),v=m.length>0?Math.max(...m.map(y=>y.order+1)):0,h=Math.min(v,Jt+1),C=r?20:23,E=h>0?8:0,w=C*h+E;return Be("div",{className:Me.headerRow,"data-isweekview":e==="week",onMouseLeave:i,children:u.map((y,D)=>{let{date:x}=y,M=e==="week"||g.length>0;return No("div",{className:Me.headerCell,"data-border":M,children:[e==="week"&&Be("div",{className:Me.headerLabel,"data-today":x.isSame(jo(),"day"),onMouseEnter:i,children:`${x.format("ddd")} ${x.format("DD")}`}),Be(we,{isInDayHeader:e==="day",isInWeekHeader:e==="week",EVENT_LIMIT:Jt,enableRescheduling:t,compact:r,dayRecord:y,dispatch:o,handleMouseEvent:a,headerHeight:w,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,orderedEvents:m,placeholderRef:p,renderContextMenu:f,state:c})]},D)})})}import{jsx as G,jsxs as Ye}from"react/jsx-runtime";function Zt({view:e,activeDate:t,compact:r,dispatch:n,enableRescheduling:o,events:a,handleMouseEvent:i,handleStopDrag:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c}){let u=e==="day",g=e==="week",m=a.filter(y=>y.isAllDay),v=a.filter(y=>!y.isAllDay),h=Lt(),C=qt(()=>Bt(t,e),[t,e]),E={first:u?t:C[0].date,last:u?t:C[6].date},w=qt(()=>Yt(C,v),[v,C]);return Ye("div",{className:re.timeView,children:[G(Xt,{allDayEvents:m,compact:r,dispatch:n,enableRescheduling:o,handleMouseEvent:i,handleStopDrag:s,minMaxDatesInView:E,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,view:e,weekDatesArray:C}),G("div",{ref:h,className:re.scrollWrapper,children:Ye("div",{className:re.gridWrapper,children:[G(zt,{}),Ye("div",{className:re.grid,"data-isweekview":g,onMouseEnter:s,onMouseLeave:s,children:[G(Gt,{activeDate:t,dispatch:n,handleMouseEvent:i,onEventReschedule:l,placeholderRef:p,state:c,view:e}),G(Wt,{activeDate:t,isDayView:u}),C.map(({date:y},D)=>{let x=w[D],{isActive:M,isAllDay:P,start:R,end:b}=c.placeholderEvent;return M&&!P&&T(y,R,b)&&x.push(c.placeholderEvent),x.map(I=>G($,{date:y,dispatch:n,enableRescheduling:o,event:I,onEventClick:d,placeholderRef:p,renderContextMenu:f,state:c,view:e},I.id))})]})]})})]})}var N={};import{useRef as Io}from"react";var Kt={};import{jsx as Ho}from"react/jsx-runtime";function Qt({date:e,handleClick:t,isToday:r,isDimmed:n,isActive:o}){let a=Io(null);return Ho("div",{ref:a,"data-date":e.format("DD-MMM-YYYY"),className:Kt.date,"data-today":r,"data-dimmed":n,"data-active":o,onMouseDown:i=>i.stopPropagation(),onClick:i=>t(i,e,a),children:e.format("D")})}import Lo from"dayjs";function er(e,t){let r={},n=new Set;t.forEach(({start:a,end:i})=>{let s=a.clone().startOf("day"),d=i.clone().startOf("day");for(;s.isBefore(d,"day")||s.isSame(d,"day");)n.add(s.format("YYYY-MM-DD")),s=s.add(1,"day")});let o=e.startOf("year");return le.forEach((a,i)=>{let s=o.clone().day(0),d=Array.from({length:42},(l,p)=>{let f=s.clone().add(p,"day"),c=f.isSame(Lo(),"day"),u=o.isSame(f,"month"),g=u&&n.has(f.format("YYYY-MM-DD"));return{date:f,isToday:c,isActive:g,isCurrentMonth:u}});r[a]=d,o=o.month(i+1)}),r}import{jsx as oe,jsxs as tr}from"react/jsx-runtime";function rr({activeDate:e,dispatch:t,events:r,state:n}){let o=er(e,r),a=()=>t({type:"reset_calendar"}),i=(s,d,l)=>{n.overflowIsOpen&&s.target===n.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:d,anchor:l.current})};return oe("div",{className:N.scrollWrapper,children:oe("div",{className:N.yearView,onMouseDown:a,children:le.map(s=>tr("div",{className:N.month,children:[oe("div",{className:N.monthLabel,children:s}),tr("div",{className:N.monthDates,children:[We.map((d,l)=>oe("div",{className:N.monthHeaderDay,children:d},`${s}-${l}`)),o[s].map(({date:d,isToday:l,isCurrentMonth:p,isActive:f},c)=>oe(Qt,{date:d,handleClick:i,isToday:l,isActive:f,isDimmed:!p},c))]})]},s))})})}import{useMemo as dr}from"react";var Te={};var ze={};import{jsx as or}from"react/jsx-runtime";var zo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function nr({isCompact:e}){return or("div",{className:ze.monthHeader,"data-sm":e,children:zo.map((t,r)=>or("div",{className:ze.headerCell,children:t},r))})}var ar=(e,t)=>{if(e===0)return 0;let r=2,n=8,o=26,a=t?18:20;return Math.max(Math.floor((e-o-n)/(a+r)),0)};var ir=e=>{let t=e.startOf("month").day(0),r=t,n=e.add(1,"month").month(),o=[],a=[],i=1;for(;r.subtract(r.day(),"d").month()!==n;)o.push({date:r,isCurrentMonth:r.month()===e.month()}),i===7&&(a.push(o),o=[],i=0),i++,r=r.add(1,"day");return{weeks:a,first:t,last:r}};function sr(e,t){return e.reduce((r,n,o)=>({...r,[o]:B(pe(t,n[0].date))}),{})}import{jsx as ke,jsxs as $o}from"react/jsx-runtime";function lr({enableRescheduling:e,compact:t,activeDate:r,dispatch:n,events:o,handleMouseEvent:a,handleStopDrag:i,onEventClick:s,onEventReschedule:d,placeholderRef:l,renderContextMenu:p,state:f}){let c=dr(()=>ir(r),[r]),u={first:c.first,last:c.last},{ref:g,height:m}=rt(),v=m/c.weeks.length,h=ar(v,t),C=dr(()=>sr(c.weeks,o),[o,c.weeks]);return $o("div",{className:Te.monthView,children:[ke(nr,{isCompact:t}),ke("div",{className:Te.grid,onMouseLeave:i,ref:g,children:c.weeks.map((E,w)=>{let y=m>0?C[w]:[];return ke("div",{className:Te.row,children:E.map((D,x)=>ke(we,{EVENT_LIMIT:h,enableRescheduling:e,compact:t,dayRecord:D,dispatch:n,handleMouseEvent:a,isInWeekHeader:!1,minMaxDatesInView:u,onEventClick:s,onEventReschedule:d,orderedEvents:y,placeholderRef:l,renderContextMenu:p,state:f},x))},w)})})]})}import Fo from"dayjs";var ne={};import{Fragment as Go,jsx as J,jsxs as Jo}from"react/jsx-runtime";var Uo=e=>e?Fo(e):void 0;function $e({compact:e,dispatch:t,events:r,colorScheme:n,onEventClick:o,placeholderRef:a,renderContextMenu:i,state:s,enableRescheduling:d}){let l=Uo(s.overflowAnchor?.dataset.date);if(!l||!s.overflowAnchor)return J(Go,{});let p=B(O(r,l));return J(ge,{zIndex:2,anchor:s.overflowAnchor,isOpen:s.overflowIsOpen,colorScheme:n,children:Jo("div",{className:ne.overflowCard,children:[J("span",{className:ne.label,children:l.format("dddd, MMMM D")}),!p.length&&J("div",{className:ne.empty,children:"No events scheduled for this date"}),J("div",{className:ne.eventsWrapper,children:p.map(f=>J($,{view:"month",isInOverflow:!0,enableRescheduling:d,compact:e,date:l,dispatch:t,event:f,onEventClick:o,placeholderRef:a,renderContextMenu:i,state:s},f.id))})]})})}import{jsx as V,jsxs as mr}from"react/jsx-runtime";function jd({calendar:e,compact:t=!1,colorScheme:r="light",enableDragCreation:n=!1,enableRescheduling:o=!1,events:a=[],popoverZIndex:i=101,isFetching:s=!1,noHeader:d=!1,onEventClick:l,onEventCreate:p,onEventReschedule:f,renderPopover:c,renderContextMenu:u,views:g=[...H]}){let{activeDate:m,setActiveDate:v,view:h,setView:C,state:E,dispatch:w}=dt(e),y=cr(()=>Xe(a),[a]),D=cr(()=>Je(y,m,h),[y,m,h]),M=h==="week"||h==="day"?D.filter(k=>k.isAllDay):D,{eventAnchor:P,dragActive:R,eventDragActive:b,popoverIsOpen:_,clickedEvent:I,placeholderEvent:X}=E,q=()=>w({type:"reset_calendar"}),Z=()=>{(R||b)&&w({type:"event_create_stop"})},K=Xo(null),Ae=et({enableDragCreation:n,dispatch:w,state:E,onEventCreate:p}),ae={activeDate:m,dispatch:w,state:E,events:D},ie={...ae,compact:t,onEventClick:l,handleStopDrag:Z,placeholderRef:K,handleMouseEvent:Ae,onEventReschedule:f,renderContextMenu:u,enableRescheduling:o},Se=()=>{switch(h){case"year":return V(rr,{...ae});case"month":return V(lr,{...ie});case"week":case"day":return V(Zt,{...ie,view:h});default:return null}};return mr("div",{className:Oe.root,"data-ec-color-scheme":r,children:[d?null:V(It,{view:h,setActiveDate:v,setView:C,activeDate:m,views:g}),mr("div",{className:Oe.calendar,"data-withheader":!d,onClick:k=>k.stopPropagation(),children:[V(Tt,{visible:s}),Se(),c&&P&&V(ge,{isOpen:_,anchor:P,zIndex:i,colorScheme:r,children:c({onClose:q,clickedEvent:I,newEvent:X})}),V($e,{state:E,compact:t,dispatch:w,events:M,colorScheme:r,onEventClick:l,placeholderRef:K,renderContextMenu:u,enableRescheduling:o})]})]})}export{H as CALENDAR_VIEWS,Fe as DAYS_IN_FULL_MONTH,We as DAY_LABELS_SHORT,ce as DEFAULT_COLOR,jd as EventsCalendar,Ue as HOURS,It as Header,le as MONTHS,B as arrangeWeekEvents,Ke as arrangeWeekdayEvents,On as createDayjsObjFromTime,O as filterByDate,Je as filterByView,pe as filterByWeek,Y as getBackgroundFromGroups,ve as getPlaceholderEvent,j as getTimeDiff,Ge as getTimeLabel,qe as getVisibleEvents,L as hasOverlap,T as isBetween,Xe as parseRawEvents,ue as returnValidStartEnd,de as setTime,me as updateEvent,st as useEventsCalendar};
//# sourceMappingURL=index.mjs.map