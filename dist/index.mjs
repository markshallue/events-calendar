"use client";import{useMemo as cr,useRef as Xo}from"react";var Re={};import{useRef as zr}from"react";var Q={};function de(e,t){return e.hour(t.hour()).minute(t.minute())}var L=["year","month","week","day"],le=["January","February","March","April","May","June","July","August","September","October","November","December"],$e=["S","M","T","W","T","F","S"],Fe=42,ce="#0ea5e9",Ue=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"];function M(e,t,r,a=!1){return e.isAfter(t)&&e.isBefore(r)||e.isSame(t,"d")||(a?!1:e.isSame(r,"d"))}function z(e,t,r,a){return M(e,r,a)||M(r,e,t)||M(a,e,t)}function me({state:e,dispatch:t,date:r,view:a}){let o=a==="month"?"day":"minute";if(e.dragStartOffset===null){let c=r.diff(e.clickedEvent.start,o);t({type:"update_event",dragStartOffset:c});return}let{start:n,end:i,startTime:s,endTime:d}=e.clickedEvent,l=r.subtract(e.dragStartOffset,o),p=i.diff(n,o),f=l.add(p,o);a!=="month"&&!l.isSame(f,"day")||t({type:"update_event",event:{...e.placeholderEvent,start:a==="month"?l.hour(n.hour()).minute(n.minute()):l,end:a==="month"?f.hour(i.hour()).minute(i.minute()):f,startTime:a==="month"?s:l.format("h:mma"),endTime:a==="month"?d:f.format("h:mma")}})}function j(e,t){let r=e.hour()*60+e.minute();return t.hour()*60+t.minute()-r}function Ge(e,t){if(!e.start||!e.end)return"";let r=t<=30?", ":"";return e.start.isBefore(e.end)?`${r}${e.start.format("h:mma")} - ${e.end.format("h:mma")}`:`${r}${e.end.format("h:mma")} - ${e.start.format("h:mma")}`}function pe(e,t){let r=t.add(6,"d");return e.filter(({start:a,end:o})=>z(t,r,a,o||a))}function R(e,t){return e.filter(({start:r,end:a})=>M(t,r,a))}function Je(e,t,r){let a=r==="year"?"year":"month",o=t.startOf(a).day(0),n=t.endOf(a).day(6);return e.filter(({start:i,end:s})=>z(o,n,i,s))}import fe from"dayjs";var Oe=(e,t)=>{let r=t.replace(/.{2}$/," $&").toUpperCase();return fe(`${e.format("DD-MMM-YYYY")} ${r}`)};function Xe(e){return e.filter(t=>t.start||t.end).map((t,r)=>{let a=t.start?fe(t.start):fe(t.end);t.startTime&&(a=Oe(a,t.startTime));let o=t.end?fe(t.end):a;return(t.startTime||t.endTime||t.isAllDay===!1)&&(!t.startTime&&!t.endTime?o=a.add(1,"hour"):t.endTime?o=Oe(o,t.endTime):o=Oe(o,t.startTime).add(1,"hour")),{...t,id:t.id??r,title:t.title??"",start:a,end:o,isAllDay:t.isAllDay!==!1}})}function qe(e,t,r,a){return e.filter(({order:o,start:n})=>o<r&&(a||t.day()===0||t.isSame(n,"day")))}function gr(e){return[...e].sort((r,a)=>{let o=r.end.diff(r.start,"day")+1,n=a.end.diff(a.start,"day")+1;return o>n?-1:o<n?1:r.start.isBefore(a.start,"day")?-1:a.start.isBefore(r.start,"day")?1:r.isAllDay&&!a.isAllDay?-1:!r.isAllDay&&a.isAllDay?1:0})}function yr(e){let t=0;for(;e.has(t);)t++;return t}function H(e){if(e.length<2)return e.map(n=>({...n,order:0,indent:0}));let t=gr(e),[r,...a]=t,o=[{...r,order:0,indent:0}];return a.forEach(n=>{let i=n.start,s=n.end||i,d=new Set;for(let p of o){let f=p.start,c=p.end||f;z(i,s,f,c)&&d.add(p.order)}let l=yr(d);o.push({...n,order:l,indent:0})}),o}import Ze from"dayjs";var A={id:null,dragId:null,title:"Untitled",groups:[],start:Ze(),end:Ze(),startTime:void 0,endTime:void 0,isActive:!1,isAllDay:!0,indent:0,order:0};function ue(e,t){return t?e.isSame(t)||e.isBefore(t)?[e,t]:[t,e]:[e,e]}var he=(e,t,r,a)=>{let[o,n]=ue(e,t),i=a&&r?o.add(15,"minute"):n;return{...A,id:null,start:o,end:i,isActive:!0,isAllDay:!r,startTime:r?o.format("h:mma"):void 0,endTime:r?i.format("h:mma"):void 0,order:r?100:0}};function br(e){return e.length<2?e:e.sort((t,r)=>{let a=j(t.start,r.start);return a>0?-1:a<0?1:0})}function wr(e,t,r){return e.isSame(t)||e.isAfter(t)&&e.isBefore(r)}function Ke(e,t){if(e.length<2)return e.map(i=>({...i,order:0,indent:0}));let r=br(e),[a,...o]=r,n=[{...a,order:0,indent:0}];return o.forEach((i,s)=>{let d=de(t,i.start),l=0;n.forEach(p=>{let f=de(t,p.start),c=de(t,p.end);wr(d,f,c)&&(l+=1)}),n.push({...i,order:s+1,indent:l})}),n}import Qe from"dayjs";var Pa=(e,t,r="01-Jan-2000",a="01-Jan-2000")=>{let o=e?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",n=t?.replace(/.{2}$/," $&").toUpperCase()||"12:00 AM",i=Qe(`${r} ${o}`),s=Qe(`${a} ${n}`);return{start:i,end:s}};function B(e){let t=e?.map(o=>o.color).filter(Boolean)??[];if(!t.length)return{backgroundColor:ce};if(t.length===1)return{backgroundColor:t[0]};let r=100/t.length;return{backgroundImage:`-webkit-linear-gradient(-30deg,${t.map((o,n)=>`${o} ${r*n}% ${r*n+r}%`).join(", ")})`}}var xr=({isTimeEvent:e,firstClickDate:t,start:r,date:a,dispatch:o})=>{if(e){let n=j(t,a)<0?ue(r,t.add(15,"minute"))[1]:t,i=r.hour(a.hour()).minute(a.minute());if(Math.abs(j(n,a))>=15){let s=he(n,i,!0);o({type:"update_event",event:s})}}else{let n=he(t,a);o({type:"update_event",event:n})}},et=({enableDragCreation:e,dispatch:t,state:r,onEventCreate:a})=>{if(!e)return s=>{s.type==="mousedown"&&t({type:"reset_calendar"})};let o=()=>t({type:"open_popover"}),n=()=>t({type:"reset_calendar"});return(s,d,l,p)=>{let{dragActive:f,firstClickDate:c,placeholderEvent:u}=r,{start:g}=u;if(s.button!==0){f&&t({type:"event_create_stop"});return}switch(s.type){case"mousedown":{if(r.eventAnchor||r.overflowIsOpen){t({type:"reset_calendar"});return}let m=he(d,d,l,!0);t({type:"event_create_start",date:d,event:m,anchor:p.current});break}case"mouseenter":{if(s.buttons!==1||!f||!c)return;xr({isTimeEvent:l,firstClickDate:c,start:g,date:d,dispatch:t});break}case"mouseup":{if(!f)return;a&&a({clickedEvent:r.clickedEvent,newEvent:r.placeholderEvent,eventRef:p.current,openPopover:o,reset:n}),t({type:"event_create_end",anchor:p.current})}}}};import{useEffect as Cr,useMemo as Er,useRef as tt,useState as Dr}from"react";var kr={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Mr(e){let t=tt(0),r=tt(null),[a,o]=Dr(kr),n=Er(()=>typeof window<"u"?new ResizeObserver(i=>{let s=i[0];s&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{r.current&&o(s.contentRect)}))}):null,[]);return Cr(()=>(r.current&&n?.observe(r.current,e),()=>{n?.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[r.current]),[r,a]}function rt(e){let[t,{width:r,height:a}]=Mr(e);return{ref:t,width:r,height:a}}import{useState as Tr}from"react";import{useFloating as Ar,flip as Sr,offset as Pr,shift as Rr,useDismiss as Or,useInteractions as jr}from"@floating-ui/react";function ot({dispatch:e,event:t,isInOverflow:r,hasContextMenu:a,state:o}){let[n,i]=Tr(!1),s=()=>i(!1),d=t.id!==null&&o.clickedEvent?.id===t.id,{refs:l,floatingStyles:p,context:f}=Ar({open:n,onOpenChange:i,middleware:[Pr({mainAxis:5,alignmentAxis:4}),Sr({fallbackPlacements:["left-start"]}),Rr({padding:10})],placement:"right-start"}),c=Or(f),{getFloatingProps:u}=jr([c]);return{handleContextMenu:(m,h)=>{a&&(m.preventDefault(),!(o.popoverIsOpen||o.overflowIsOpen&&!r)&&(l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m.clientX,y:m.clientY,top:m.clientY,right:m.clientX,bottom:m.clientY,left:m.clientX}}}),e({type:"open_context_menu",event:t,anchor:h.current}),i(!0)))},isActive:d,contextIsOpen:n,refs:l,floatingStyles:p,getFloatingProps:u,closeContextMenu:s}}import nt from"dayjs";import{useEffect as Nr,useReducer as Vr,useState as it}from"react";var ee={clickedEvent:A,popoverIsOpen:!1,eventAnchor:null,dragActive:!1,firstClickDate:null,placeholderEvent:A,dragStartOffset:null,eventDragActive:!1,overflowAnchor:null,overflowIsOpen:!1};function at(e,t){switch(t.type){case"reset_calendar":return ee;case"open_overflow":return{...e,...ee,overflowIsOpen:!0,overflowAnchor:t.anchor||e.overflowAnchor};case"open_popover":return{...e,popoverIsOpen:!0};case"open_context_menu":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor};case"set_clicked_event":return{...e,clickedEvent:t.event||e.clickedEvent,eventAnchor:t.anchor||e.eventAnchor,placeholderEvent:A};case"update_event":return{...e,dragStartOffset:t.dragStartOffset??e.dragStartOffset,placeholderEvent:{...e.placeholderEvent,...t.event,id:null}};case"event_create_start":return{...e,dragActive:!0,firstClickDate:t.date||e.firstClickDate,placeholderEvent:{...e.placeholderEvent,...t.event,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_end":return{...e,dragActive:!1,firstClickDate:null,placeholderEvent:{...e.placeholderEvent,isActive:!0},eventAnchor:t.anchor||e.eventAnchor};case"event_create_stop":return{...e,dragActive:!1,firstClickDate:null,clickedEvent:A,placeholderEvent:A,eventDragActive:!1};case"event_reschedule_start":return{...e,eventDragActive:!0,clickedEvent:t.event||e.clickedEvent,placeholderEvent:{...e.placeholderEvent,order:0,...t.event,id:null,isActive:!0}};case"event_reschedule_end":return{...e,eventDragActive:!1,dragStartOffset:null,eventAnchor:t.anchor||e.eventAnchor};default:return console.log(`Invalid action type ${t.type} passed to calendar reducer`),e}}function st({isInitialised:e=!1,initialDate:t=nt(),initialView:r="month",closeOnClickOutside:a=!0}={}){let[o,n]=it(nt(t)),[i,s]=it(r),[d,l]=Vr(at,ee);return Nr(()=>{if(!a||e)return;let p=()=>l({type:"reset_calendar"});return window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[l,e,a]),{activeDate:o,setActiveDate:n,view:i,setView:s,state:d,dispatch:l}}function dt(e){let r=st({isInitialised:!!e});return e||r}var te={};import{jsx as je,jsxs as _r}from"react/jsx-runtime";function lt({event:e,isCompact:t}){let{title:r,start:a,groups:o}=e,n=B(o),s={border:`1px solid ${(o?.map(d=>d.color).filter(Boolean)??[])[0]??ce}`};return _r("div",{className:`${te.timeContainer}`,"data-sm":t,style:s,children:[je("div",{className:`${te.timeDot}`,style:n}),je("div",{className:`${te.timeText}`,children:a.format("h:mma")}),je("span",{className:`${te.timeLabel}`,children:r})]})}var ve={};var ct=e=>{switch(e){case"both":return"polygon(10px 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 10px 100%, 0% 50%)";case"left":return"polygon(10px 0%, 100% 0%, 100% 100%, 10px 100%, 0% 50%)";case"right":return"polygon(0% 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 0% 100%)";case"none":return;default:return}};var mt=(e,t,r,a,o,n)=>{if(e)return{width:"100%"};let i=t.start.isSame(r,"w")?t.start.day():0,s=t.end.isSame(r,"w")?t.end.day():6;return{position:"absolute",left:n?"0.125rem":`calc(${i*100/7}% + 0.125rem)`,top:`calc(${n?4:a?24:26}px + ${t.order*(a?21:22)}px + ${o?6:0}px)`,width:n?"calc(100% - 6px)":`calc(${100*(1+(s-i))/7}% - 0.25rem - 1px)`}};function pt(e,t){return!t.isActive&&t.id===e.placeholderEvent.dragId}var ft=(e,t,r,a,o)=>{let n=e?r.isBefore(t,"day"):!!o?.first&&r.isBefore(o.first,"day"),i=e?a.isAfter(t,"day"):!!o?.last&&a.isAfter(o.last,"day");return n&&i?"both":n?"left":i?"right":"none"};var ut=(e,t,r,a,o)=>{let n=r===0?6:0;return{gridColumnStart:r+1,gridRowStart:e.start&&e.start.hour()*4+Math.round(e.start.minute()/15)+1,gridRowEnd:e.end&&e.end.hour()*4+Math.round(e.end.minute()/15)+1,height:12*((t||60)/15)-2,borderWidth:e.indent>0?t>30?"1px":"0.5px":0,marginLeft:a*e.indent+n,width:`calc(100% - ${a*(e.indent+1)+n}px)`,zIndex:o?100:1+e.order,...B(e.groups)}};import{jsx as Ne}from"react/jsx-runtime";function ht({date:e,event:t,minMaxDatesInView:r,isCompact:a,isInOverflow:o}){let n=ft(o,e,t.start,t.end,r),i=ct(n),s=B(t.groups);return Ne("div",{className:ve.container,style:{...s,clipPath:i},children:Ne("div",{className:ve.content,"data-sm":a,children:Ne("span",{className:ve.text,"data-arrows":n,children:t.title})})})}import{Fragment as Hr,jsx as Y,jsxs as vt}from"react/jsx-runtime";function W({view:e,enableRescheduling:t,compact:r=!1,date:a,dispatch:o,event:n,isInWeekHeader:i=!1,isInOverflow:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,placeholderRef:f,renderContextMenu:c,state:u}){let g=zr(null),m=!!c,h=!!p||t,v=e==="month",b=e==="day",w=()=>o({type:"open_popover"}),x=()=>o({type:"reset_calendar"}),y=()=>o({type:"reset_calendar"}),E=(T,pr,se,fr)=>{if(T.stopPropagation(),pr||!se.current)return;let Pe=k&&u.eventAnchor?.dataset.anchorday===se.current.dataset.anchorday;!s&&u.overflowIsOpen&&o({type:"reset_calendar"}),Pe||o({type:"set_clicked_event",event:n,anchor:se.current});let ur=()=>Pe?x():w();fr?.({event:n,isDoubleClick:Pe,eventRef:se.current,openPopover:w,closePopover:x,togglePopover:ur})},{handleContextMenu:D,isActive:k,contextIsOpen:P,refs:O,floatingStyles:C,getFloatingProps:I,closeContextMenu:_}=ot({dispatch:o,event:n,state:u,hasContextMenu:m,isInOverflow:s}),X=n.id===null,q=X&&n.start.isSame(a,"d")?f:g,Z=Math.abs(j(n.start,n.end)),K=Z<=30,Ae=b?120:20,ne=b?0:a.day(),ie=()=>{o({type:"reset_calendar"}),t&&!s&&o({type:"event_reschedule_start",event:{...n,dragId:n.id,order:v?n.order:1e3}})},Se=v?mt(s,n,a,r,i,d):ut(n,Z,ne,Ae,h&&k);return vt(Hr,{children:[Y("div",{className:v?Q.monthItemContainer:Q.weekItemContainer,"data-interactive":h,"data-active":h&&k,"data-anchorday":a.format("DD-MMM-YYYY"),"data-placeholder":X,"data-dragactive":u.dragActive||u.eventDragActive,"data-isdragging":pt(u,n),"data-sm":r,"data-time":v&&!n.isAllDay,draggable:"true",onClick:T=>E(T,X,q,p),onContextMenu:T=>D(T,q),onDragStart:ie,ref:q,style:Se,children:v?n.isAllDay?Y(ht,{date:a,event:n,isCompact:r,isInOverflow:s,minMaxDatesInView:l}):Y(lt,{event:n,isCompact:r}):vt("div",{className:Q.itemLabelWrapper,"data-short":K,children:[Y("span",{style:K?void 0:{width:"100%"},children:n.title}),Y("span",{className:Q.timeText,children:Ge(n,Z)})]})}),P&&Y("div",{ref:O.setFloating,style:{...C,zIndex:2},...I(),children:c&&c({event:n,closeContextMenu:_,onClose:y,openPopover:w})})]})}import{createPortal as Jr}from"react-dom";import{useEffect as Xr,useRef as qr}from"react";import{useFloating as Br,autoPlacement as Yr,offset as Wr,detectOverflow as $r,autoUpdate as Fr,hide as Ur}from"@floating-ui/react-dom";var Gr=32,gt=32,yt=16;function bt({anchor:e}){let t={name:"preventViewportOverflow",async fn(o){let n=await $r(o),i=o.x;n.left>0&&(i=o.x+n.left+gt),n.right>0&&(i=o.x-n.right-gt);let s=o.y;return n.top>0&&(s=o.y+n.top+yt),n.bottom>0&&(s=o.y-n.bottom-yt),o.middlewareData.hide?.referenceHidden?{...o,x:i}:{...o,x:i,y:s}}},{refs:r,floatingStyles:a}=Br({elements:{reference:e},placement:"bottom",strategy:"fixed",whileElementsMounted:Fr,middleware:[Ur(),Wr(8),Yr({crossAxis:!0,padding:Gr}),t]});return{refs:r,floatingStyles:a}}import{jsx as wt}from"react/jsx-runtime";function xt({anchor:e,zIndex:t,colorScheme:r,children:a}){let o=qr({}),{refs:n,floatingStyles:i}=bt({anchor:e});return Xr(()=>{setTimeout(()=>{o.current={transitionDuration:"250ms",transitionProperty:"all"}},100)},[]),Jr(wt("div",{ref:n.setFloating,style:{...i,...o.current,zIndex:t},"data-ec-color-scheme":r,children:wt("div",{onClick:s=>s.stopPropagation(),children:a})}),document.body)}import{jsx as Zr}from"react/jsx-runtime";function ge({anchor:e,colorScheme:t,isOpen:r,zIndex:a=1,children:o}){return!r||!e?null:Zr(xt,{anchor:e,zIndex:a,colorScheme:t,children:o})}var Ve={};import oo from"dayjs";var ye={};import{useRef as to}from"react";var $={};import{jsx as ro,jsxs as Ct}from"react/jsx-runtime";function be({date:e,dispatch:t,isCompact:r,numOverflowEvents:a,state:o}){let n=to(null),i=s=>{o.overflowIsOpen&&s.target===o.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:e,anchor:n.current})};if(a)return Ct("div",{className:$.container,"data-sm":r,"data-date":e.format("DD-MMM-YYYY"),onClick:i,onMouseDown:s=>s.stopPropagation(),ref:n,children:[ro("span",{className:`${$.label} ${$.smOnly}`,children:`+${a}`}),Ct("span",{className:`${$.label} ${$.lgOnly}`,children:[a," more"]})]})}import{jsx as Ie,jsxs as ao}from"react/jsx-runtime";function Et({dayRecord:e,dispatch:t,isCompact:r,numOverflowEvents:a,state:o}){let{date:n,isCurrentMonth:i}=e,s=n.isSame(oo(),"day"),d=s?"white":i?"dark":"dim";return ao("div",{className:ye.cellHeader,children:[Ie("div",{className:ye.dateContainer,"data-today":s,children:Ie("span",{className:ye.dateLabel,"data-color":d,"data-sm":r,children:n.date()})}),Ie(be,{date:n,dispatch:t,isCompact:r,numOverflowEvents:a,state:o})]})}import{Fragment as io,jsx as we,jsxs as Dt}from"react/jsx-runtime";var no=(e,t,r=!1)=>{let{isActive:a,isAllDay:o,start:n,end:i}=e;return a&&(!r||o)&&M(t,n,i)&&(t.day()===0||t.isSame(n,"day"))};function xe({EVENT_LIMIT:e,enableRescheduling:t,compact:r,dayRecord:a,dispatch:o,handleMouseEvent:n,headerHeight:i="100%",isInWeekHeader:s=!1,isInDayHeader:d=!1,minMaxDatesInView:l,onEventClick:p,onEventReschedule:f,orderedEvents:c,placeholderRef:u,renderContextMenu:g,state:m}){let{date:h}=a,v=R(c,h),b=qe(v,h,e,d),w=v.reduce((C,I)=>C+(I.order>=e?1:0),0),x=(d||s)&&w>0;no(m.placeholderEvent,h,s||d)&&b.push(m.placeholderEvent);let E=()=>o({type:"open_popover"}),D=()=>o({type:"reset_calendar"}),k=C=>{n(C,h,!1,u)},P=C=>{m.eventDragActive&&me({state:m,dispatch:o,date:h,view:"month"}),n(C,h,!1,u)},O=C=>{m.eventDragActive&&(o({type:"event_reschedule_end",anchor:u.current}),f?.({clickedEvent:m.clickedEvent,newEvent:m.placeholderEvent,eventRef:u.current,openPopover:E,reset:D})),n(C,h,!1,u)};return Dt(io,{children:[Dt("div",{className:Ve.cell,"data-border":!d&&h.day()!==6,onMouseDown:k,onMouseEnter:P,onMouseUp:O,style:{height:i,cursor:m.eventDragActive?"grabbing":"auto"},children:[!s&&!d&&we(Et,{state:m,dispatch:o,isCompact:r,dayRecord:a,numOverflowEvents:w}),we("div",{className:Ve.cellContent,"data-week":s||d,children:x&&we(be,{date:h,state:m,dispatch:o,isCompact:r,numOverflowEvents:w})})]}),b.map(C=>we(W,{date:h,view:"month",state:m,event:C,compact:r,dispatch:o,onEventClick:p,isInDayHeader:d,isInWeekHeader:s,placeholderRef:u,renderContextMenu:g,minMaxDatesInView:l,enableRescheduling:t},C.id))]})}var _e={};import{jsx as kt}from"react/jsx-runtime";function Mt({visible:e}){if(e)return kt("div",{className:_e.loaderWrapper,children:kt("span",{className:_e.loader})})}var S={};var Tt={};import{jsx as mo}from"react/jsx-runtime";function F({isGroupButton:e,active:t=!1,onClick:r=()=>null,variant:a,children:o}){return mo("button",{type:"button",onClick:r,"data-group":e,"data-active":t,"data-variant":a,className:Tt.button,children:o})}import{jsx as At,jsxs as po}from"react/jsx-runtime";function St({hideViewToggle:e,views:t,setView:r,view:a,children:o}){if(t.length<1&&!o)return;let n=L.filter(i=>t.includes(i));return po("div",{className:S.controls,children:[!e&&n.length>1&&At("div",{className:S.buttonGroup,children:n.map(i=>At(F,{isGroupButton:!0,active:a===i,onClick:()=>r(i),children:i},i))}),o]})}import ho from"dayjs";import{jsx as Pt,jsxs as fo}from"react/jsx-runtime";function Rt({size:e="24",stroke:t="2"}){return fo("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-left",children:[Pt("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Pt("path",{d:"M15 6l-6 6l6 6"})]})}import{jsx as Ot,jsxs as uo}from"react/jsx-runtime";function jt({size:e="24",stroke:t="2"}){return uo("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-right",children:[Ot("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Ot("path",{d:"M9 6l6 6l-6 6"})]})}import{jsx as U,jsxs as Nt}from"react/jsx-runtime";var vo=(e,t)=>{let r=e.startOf("week"),a=e.endOf("week");return t==="year"?e.format("YYYY"):t==="month"?e.format("MMMM YYYY"):t==="week"?`${r.format("MMM DD")} - ${a.format("MMM DD, YYYY")}`:e.format("D MMMM, YYYY")};function Vt({activeDate:e,setActiveDate:t,view:r}){let a=()=>t(ho()),o=i=>t(s=>s.add(1,i)),n=i=>t(s=>s.subtract(1,i));return Nt("div",{className:S.navigation,children:[U(F,{variant:"outline",onClick:a,children:"Today"}),Nt("div",{className:S.actions,children:[U(F,{variant:"subtle",onClick:()=>n(r),children:U(Rt,{size:"1.5rem"})}),U(F,{variant:"subtle",onClick:()=>o(r),children:U(jt,{size:"1.5rem"})})]}),U("span",{className:S.date,children:vo(e,r)})]})}import{jsx as It,jsxs as go}from"react/jsx-runtime";function _t({activeDate:e,onClick:t=()=>null,hideViewToggle:r,setActiveDate:a,setView:o=()=>null,views:n=[...L],view:i="month",customControls:s}){return go("div",{className:S.header,onClick:t,children:[It(Vt,{activeDate:e,setActiveDate:a,view:i}),It(St,{hideViewToggle:r,views:n,setView:o,view:i,children:s})]})}import{useMemo as qt}from"react";var re={};import Lt from"dayjs";import{useEffect as bo,useRef as wo}from"react";var xo=48,Co=60,Eo=Lt().diff(Lt().startOf("day"),"m"),Do=xo/Co;function zt({minutesToScroll:e=Eo,offset:t=140}={}){let r=wo(null);return bo(()=>{if(!r.current)return;let a=Do*e-t;r.current.scrollTo({top:a})},[e,t]),r}var Ht=(e,t)=>{if(t==="day")return[{date:e}];let r=e.startOf("week"),o=r.subtract(r.day(),"d"),n=[];for(let i=0;i<7;i++)n.push({date:o,isCurrentMonth:o.month()===e.month()}),o=o.add(1,"day");return n};function Bt(e,t){return e.reduce((r,a,o)=>({...r,[o]:Ke(R(t,a.date),a.date)}),{})}var Ce={};import{jsx as Le}from"react/jsx-runtime";function Yt(){return Le("div",{className:Ce.hoursColumn,children:Ue.map(e=>Le("div",{className:Ce.hour,children:Le("span",{className:Ce.hourLabel,children:e})},e))})}import To from"dayjs";var Ee={};import{jsx as Wt,jsxs as Ao}from"react/jsx-runtime";var De=To();function $t({activeDate:e,isDayView:t}){if(!e.isSame(De,"day"))return;let r=t?1:De.day()+1,a=De.hour()*4+Math.round(De.minute()/15)+1;return Ao("div",{className:Ee.wrapper,style:{gridColumn:r,gridRow:a},children:[Wt("div",{className:Ee.dot}),Wt("div",{className:Ee.line})]})}var Ft={};import{Fragment as Ro,jsx as Ut}from"react/jsx-runtime";var ze=e=>Array(e).fill(0).map((t,r)=>r),Po=(e,t,r,a,o)=>(o==="day"?e:e.startOf("week").add(t,"d")).hour(r).minute(a*15);function Gt({view:e,activeDate:t,handleMouseEvent:r,placeholderRef:a,state:o,dispatch:n,onEventReschedule:i}){let s=e==="day"?[0]:ze(7),d=ze(24),l=ze(4),p=()=>n({type:"open_popover"}),f=()=>n({type:"reset_calendar"});return Ut(Ro,{children:s.map(c=>d.map(u=>l.map(g=>{let m=Po(t,c,u,g,e);return Ut("div",{className:Ft.gridCell,"data-isweekview":e==="week",onMouseDown:h=>r(h,m,!0,a),onMouseEnter:h=>{o.eventDragActive&&me({state:o,dispatch:n,date:m,view:e}),r(h,m,!0,a)},onMouseUp:h=>{o.eventDragActive&&(n({type:"event_reschedule_end",anchor:a.current}),i?.({clickedEvent:o.clickedEvent,newEvent:o.placeholderEvent,eventRef:a.current,openPopover:p,reset:f})),r(h,m,!0,a)},style:{gridColumnStart:c+1,gridRow:`${u*4+g+1} / ${u*4+g+2}`,cursor:o.eventDragActive?"grabbing":"auto"}},`${c}${u}${g}`)})))})}var ke={};import jo from"dayjs";import{jsx as He,jsxs as No}from"react/jsx-runtime";var Jt=2;function Xt({view:e,enableRescheduling:t,compact:r,allDayEvents:a,dispatch:o,handleMouseEvent:n,handleStopDrag:i,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,weekDatesArray:u}){let g=e==="day"?R(a,u[0].date):pe(a,u[0].date),m=H(g),h=m.length>0?Math.max(...m.map(y=>y.order+1)):0,v=Math.min(h,Jt+1),b=r?20:23,w=v>0?8:0,x=b*v+w;return He("div",{className:ke.headerRow,"data-isweekview":e==="week",onMouseLeave:i,children:u.map((y,E)=>{let{date:D}=y,k=e==="week"||g.length>0;return No("div",{className:ke.headerCell,"data-border":k,children:[e==="week"&&He("div",{className:ke.headerLabel,"data-today":D.isSame(jo(),"day"),onMouseEnter:i,children:`${D.format("ddd")} ${D.format("DD")}`}),He(xe,{isInDayHeader:e==="day",isInWeekHeader:e==="week",EVENT_LIMIT:Jt,enableRescheduling:t,compact:r,dayRecord:y,dispatch:o,handleMouseEvent:n,headerHeight:x,minMaxDatesInView:s,onEventClick:d,onEventReschedule:l,orderedEvents:m,placeholderRef:p,renderContextMenu:f,state:c})]},E)})})}import{jsx as G,jsxs as Be}from"react/jsx-runtime";function Zt({view:e,activeDate:t,compact:r,dispatch:a,enableRescheduling:o,events:n,handleMouseEvent:i,handleStopDrag:s,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c}){let u=e==="day",g=e==="week",m=n.filter(y=>y.isAllDay),h=n.filter(y=>!y.isAllDay),v=zt(),b=qt(()=>Ht(t,e),[t,e]),w={first:u?t:b[0].date,last:u?t:b[6].date},x=qt(()=>Bt(b,h),[h,b]);return Be("div",{className:re.timeView,children:[G(Xt,{allDayEvents:m,compact:r,dispatch:a,enableRescheduling:o,handleMouseEvent:i,handleStopDrag:s,minMaxDatesInView:w,onEventClick:d,onEventReschedule:l,placeholderRef:p,renderContextMenu:f,state:c,view:e,weekDatesArray:b}),G("div",{ref:v,className:re.scrollWrapper,children:Be("div",{className:re.gridWrapper,children:[G(Yt,{}),Be("div",{className:re.grid,"data-isweekview":g,onMouseEnter:s,onMouseLeave:s,children:[G(Gt,{activeDate:t,dispatch:a,handleMouseEvent:i,onEventReschedule:l,placeholderRef:p,state:c,view:e}),G($t,{activeDate:t,isDayView:u}),b.map(({date:y},E)=>{let D=x[E],{isActive:k,isAllDay:P,start:O,end:C}=c.placeholderEvent;return k&&!P&&M(y,O,C)&&D.push(c.placeholderEvent),D.map(_=>G(W,{date:y,dispatch:a,enableRescheduling:o,event:_,onEventClick:d,placeholderRef:p,renderContextMenu:f,state:c,view:e},_.id))})]})]})})]})}var N={};import{useRef as _o}from"react";var Kt={};import{jsx as Lo}from"react/jsx-runtime";function Qt({date:e,handleClick:t,isToday:r,isDimmed:a,isActive:o}){let n=_o(null);return Lo("div",{ref:n,"data-date":e.format("DD-MMM-YYYY"),className:Kt.date,"data-today":r,"data-dimmed":a,"data-active":o,onMouseDown:i=>i.stopPropagation(),onClick:i=>t(i,e,n),children:e.format("D")})}import zo from"dayjs";function er(e,t){let r={},a=new Set;t.forEach(({start:n,end:i})=>{let s=n.clone().startOf("day"),d=i.clone().startOf("day");for(;s.isBefore(d,"day")||s.isSame(d,"day");)a.add(s.format("YYYY-MM-DD")),s=s.add(1,"day")});let o=e.startOf("year");return le.forEach((n,i)=>{let s=o.clone().day(0),d=Array.from({length:42},(l,p)=>{let f=s.clone().add(p,"day"),c=f.isSame(zo(),"day"),u=o.isSame(f,"month"),g=u&&a.has(f.format("YYYY-MM-DD"));return{date:f,isToday:c,isActive:g,isCurrentMonth:u}});r[n]=d,o=o.month(i+1)}),r}import{jsx as oe,jsxs as tr}from"react/jsx-runtime";function rr({activeDate:e,dispatch:t,events:r,state:a}){let o=er(e,r),n=()=>t({type:"reset_calendar"}),i=(s,d,l)=>{a.overflowIsOpen&&s.target===a.overflowAnchor?t({type:"reset_calendar"}):t({type:"open_overflow",date:d,anchor:l.current})};return oe("div",{className:N.scrollWrapper,children:oe("div",{className:N.yearView,onMouseDown:n,children:le.map(s=>tr("div",{className:N.month,children:[oe("div",{className:N.monthLabel,children:s}),tr("div",{className:N.monthDates,children:[$e.map((d,l)=>oe("div",{className:N.monthHeaderDay,children:d},`${s}-${l}`)),o[s].map(({date:d,isToday:l,isCurrentMonth:p,isActive:f},c)=>oe(Qt,{date:d,handleClick:i,isToday:l,isActive:f,isDimmed:!p},c))]})]},s))})})}import{useMemo as dr}from"react";var Me={};var Ye={};import{jsx as or}from"react/jsx-runtime";var Yo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function ar({isCompact:e}){return or("div",{className:Ye.monthHeader,"data-sm":e,children:Yo.map((t,r)=>or("div",{className:Ye.headerCell,children:t},r))})}var nr=(e,t)=>{if(e===0)return 0;let r=2,a=8,o=26,n=t?18:20;return Math.max(Math.floor((e-o-a)/(n+r)),0)};var ir=e=>{let t=e.startOf("month").day(0),r=t,a=e.add(1,"month").month(),o=[],n=[],i=1;for(;r.subtract(r.day(),"d").month()!==a;)o.push({date:r,isCurrentMonth:r.month()===e.month()}),i===7&&(n.push(o),o=[],i=0),i++,r=r.add(1,"day");return{weeks:n,first:t,last:r}};function sr(e,t){return e.reduce((r,a,o)=>({...r,[o]:H(pe(t,a[0].date))}),{})}import{jsx as Te,jsxs as Wo}from"react/jsx-runtime";function lr({enableRescheduling:e,compact:t,activeDate:r,dispatch:a,events:o,handleMouseEvent:n,handleStopDrag:i,onEventClick:s,onEventReschedule:d,placeholderRef:l,renderContextMenu:p,state:f}){let c=dr(()=>ir(r),[r]),u={first:c.first,last:c.last},{ref:g,height:m}=rt(),h=m/c.weeks.length,v=nr(h,t),b=dr(()=>sr(c.weeks,o),[o,c.weeks]);return Wo("div",{className:Me.monthView,children:[Te(ar,{isCompact:t}),Te("div",{className:Me.grid,onMouseLeave:i,ref:g,children:c.weeks.map((w,x)=>{let y=m>0?b[x]:[];return Te("div",{className:Me.row,children:w.map((E,D)=>Te(xe,{EVENT_LIMIT:v,enableRescheduling:e,compact:t,dayRecord:E,dispatch:a,handleMouseEvent:n,isInWeekHeader:!1,minMaxDatesInView:u,onEventClick:s,onEventReschedule:d,orderedEvents:y,placeholderRef:l,renderContextMenu:p,state:f},D))},x)})})]})}import Fo from"dayjs";var ae={};import{Fragment as Go,jsx as J,jsxs as Jo}from"react/jsx-runtime";var Uo=e=>e?Fo(e):void 0;function We({compact:e,dispatch:t,events:r,colorScheme:a,onEventClick:o,placeholderRef:n,renderContextMenu:i,state:s,enableRescheduling:d}){let l=Uo(s.overflowAnchor?.dataset.date);if(!l||!s.overflowAnchor)return J(Go,{});let p=H(R(r,l));return J(ge,{zIndex:2,anchor:s.overflowAnchor,isOpen:s.overflowIsOpen,colorScheme:a,children:Jo("div",{className:ae.overflowCard,children:[J("span",{className:ae.label,children:l.format("dddd, MMMM D")}),!p.length&&J("div",{className:ae.empty,children:"No events scheduled for this date"}),J("div",{className:ae.eventsWrapper,children:p.map(f=>J(W,{view:"month",isInOverflow:!0,enableRescheduling:d,compact:e,date:l,dispatch:t,event:f,onEventClick:o,placeholderRef:n,renderContextMenu:i,state:s},f.id))})]})})}import{jsx as V,jsxs as mr}from"react/jsx-runtime";function jd({calendar:e,compact:t=!1,colorScheme:r="light",enableDragCreation:a=!1,enableRescheduling:o=!1,events:n=[],popoverZIndex:i=101,isFetching:s=!1,noHeader:d=!1,onEventClick:l,onEventCreate:p,onEventReschedule:f,renderPopover:c,renderContextMenu:u,views:g=[...L]}){let{activeDate:m,setActiveDate:h,view:v,setView:b,state:w,dispatch:x}=dt(e),y=cr(()=>Xe(n),[n]),E=cr(()=>Je(y,m,v),[y,m,v]),k=v==="week"||v==="day"?E.filter(T=>T.isAllDay):E,{eventAnchor:P,dragActive:O,eventDragActive:C,popoverIsOpen:I,clickedEvent:_,placeholderEvent:X}=w,q=()=>x({type:"reset_calendar"}),Z=()=>{(O||C)&&x({type:"event_create_stop"})},K=Xo(null),Ae=et({enableDragCreation:a,dispatch:x,state:w,onEventCreate:p}),ne={activeDate:m,dispatch:x,state:w,events:E},ie={...ne,compact:t,onEventClick:l,handleStopDrag:Z,placeholderRef:K,handleMouseEvent:Ae,onEventReschedule:f,renderContextMenu:u,enableRescheduling:o},Se=()=>{switch(v){case"year":return V(rr,{...ne});case"month":return V(lr,{...ie});case"week":case"day":return V(Zt,{...ie,view:v});default:return null}};return mr("div",{className:Re.root,"data-ec-color-scheme":r,children:[d?null:V(_t,{view:v,setActiveDate:h,setView:b,activeDate:m,views:g}),mr("div",{className:Re.calendar,"data-withheader":!d,onClick:T=>T.stopPropagation(),children:[V(Mt,{visible:s}),Se(),c&&P&&V(ge,{isOpen:I,anchor:P,zIndex:i,colorScheme:r,children:c({onClose:q,clickedEvent:_,newEvent:X})}),V(We,{state:w,compact:t,dispatch:x,events:k,colorScheme:r,onEventClick:l,placeholderRef:K,renderContextMenu:u,enableRescheduling:o})]})]})}export{L as CALENDAR_VIEWS,Fe as DAYS_IN_FULL_MONTH,$e as DAY_LABELS_SHORT,ce as DEFAULT_COLOR,jd as EventsCalendar,Ue as HOURS,_t as Header,le as MONTHS,H as arrangeWeekEvents,Ke as arrangeWeekdayEvents,Pa as createDayjsObjFromTime,R as filterByDate,Je as filterByView,pe as filterByWeek,B as getBackgroundFromGroups,he as getPlaceholderEvent,j as getTimeDiff,Ge as getTimeLabel,qe as getVisibleEvents,z as hasOverlap,M as isBetween,Xe as parseRawEvents,ue as returnValidStartEnd,de as setTime,me as updateEvent,st as useEventsCalendar};
//# sourceMappingURL=index.mjs.map